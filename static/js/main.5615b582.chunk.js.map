{"version":3,"sources":["services/configs/client.js","services/configs/server.js","services/configs/status.js","services/configs/browser.js","services/configs/gamesetting.js","globals/state/GlobalContext.jsx","commons/NavigationBar.jsx","tools/notification.js","services/http/httpService.js","services/http/userServices.js","globals/redux/actions/player.js","globals/redux/actions/game.js","globals/state/GlobalStates.jsx","profile/panel/ProfilePanel.jsx","profile/panel/CollapsedPanel.jsx","users/AutoSignIn.jsx","services/http/chatServices.js","globals/redux/actions/interactions.js","commons/LoadingBar.jsx","layouts/ProfilePanelLayout.jsx","services/http/gameServices.js","tools/format.js","tables/scores/SingleScoreCard.jsx","tables/scores/AllScores.jsx","profile/friendgames/Record.jsx","globals/redux/actions/tools.js","profile/friendgames/FriendRecords.jsx","profile/friendgames/MyGamesAndFriends.jsx","services/http/noticeServices.js","profile/admin/NoticeManager.jsx","globals/redux/actions/message.js","chat/Message.jsx","chat/ChatBox.jsx","chat/ChatRoom.jsx","profile/edit/Credentials.jsx","profile/edit/PasswordChange.jsx","profile/edit/ImagePicker.jsx","profile/edit/AvatarChange.jsx","profile/edit/AcountManager.jsx","sidebars/SignInSideBar.jsx","sidebars/NoticeSideBar.jsx","sidebars/OnlineStatistics.jsx","chat/GameChatBox.jsx","sidebars/PlayerInfoSideBar.jsx","layouts/MainLayout.jsx","services/ws/gamePlaySocketServices.js","globals/redux/withReduxDashboard.js","games/gameplay/BriefScoreboard.jsx","games/gameplay/TableDesign.jsx","games/gameplay/GamePlay.jsx","games/SingleGame.jsx","games/competitions/CompetitionSummary.jsx","games/competitions/CompetitionsMain.jsx","games/GameDeck.jsx","informations/GameGuide.jsx","informations/ContactUs.jsx","tables/scores/ScoresTable.jsx","users/ModalSignIn.jsx","users/SignUp.jsx","tables/rankings/SinglePlayerCard.jsx","tables/rankings/AllPlayers.jsx","tables/rankings/Rankings.jsx","commons/MainRouter.jsx","tools/NotificationCenter.jsx","globals/redux/actions/index.js","services/ws/GlobalSocketManager.jsx","App.js","globals/redux/reducers/index.js","globals/redux/reducers/me.js","globals/redux/reducers/opponent.js","globals/redux/reducers/room.js","globals/redux/reducers/scoreboard.js","globals/redux/reducers/tools.js","globals/redux/reducers/statistics.js","globals/redux/reducers/message.js","globals/redux/reducers/interactions.js","globals/redux/store/index.js","index.js","services/configs/index.js"],"names":["Profile","module","exports","Root","SignUp","SignIn","GameDeck","Rankings","GameGuide","ContactUs","ChatRoom","MyGamesAndFriends","Notices","WebSocketRoot","wsGamePlayRoute","wsGlobalRoute","Users","Private","Credentials","MyAvatar","PasswordChange","Friends","Records","Administrators","Games","Mine","Chats","Interactions","SingleChat","NoticeManagement","Successful","CreatedSuccessfully","BadRequest","Unauthorized","Forbidden","NotFound","NotAcceptable","Conflict","SessionExpired","UnprocessableEntity","InternalServerError","isErrorExpected","error","response","status","save","token","sessionStorage","setItem","reset","clear","TOKEN","getItem","T3D","TableRowMargings","TurnTimeOut","RandomSearchRepeatLimit","GlobalContext","createContext","device","signOut","goTo","redirectToGamePlay","NavigationBar","me","useSelector","state","context","useContext","Navbar","style","borderBottom","bg","className","Container","Nav","activeClassName","to","Routes","Client","aria-hidden","Devices","SmartPhone","fullname","exact","Desktop","Sorry","text","toast","position","closeOnClick","icon","float","OK","success","Notify","info","Attention","onClick","warn","type","Boolean","axios","defaults","headers","post","put","interceptors","request","use","config","browserStorage","Authorization","Promise","reject","expectedErrors","Status","err","console","log","http","get","delete","Server","userServices","signUp","user","JSON","stringify","signIn","getPlayer","userID","getAvatar","getAllPlayers","getMe","getMyCredentials","editMyCredentials","newMe","changeMyPassword","passwords","uploadAvatar","avatar","formData","FormData","append","getMyFriends","isMyFriend","targetID","ResetOpponent","dispatch","a","ResetMyPlayer","LoadMyPlayer","data","player","payload","EnterRoom","room","withRouter","children","history","isDesktop","useMediaQuery","query","isSmartPhone","isTablet","useState","setDevice","useDispatch","useEffect","findIndex","mode","Provider","value","push","destination","ProfilePanel","props","Row","Button","border","variant","Configs","aria-current","isAdmin","width","height","CollapsedPanel","AutoSignIn","opponent","storageToken","chatServices","getOurChat","friendID","getMyInteractions","UpdateMyChatList","name","sent","recieved","getState","myinteractions","interactions","find","interact","with","messages","friend","date","Date","LoadingBar","loading","whichOne","setWhichOne","Math","floor","random","useLayoutEffect","document","body","overflowY","selectedLoader","time","customLoading","ProfilePanelLayout","setLoading","myInteractions","Array","forEach","ownerOf","map","msg","owner","Error","Col","lg","sm","gameServices","getAllGames","getMyGames","objectify","DateObject","calendar","persian","locale","persian_fa","toHijri","format","SingleScoreCard","Type","playerXName","playerOName","xScore","oScore","xBadge","setXBadge","oBadge","setOBadge","hijriDate","setHijriDate","Card","Body","Footer","block","size","AllScores","scores","length","score","players","gameID","Text","Record","title","small","ListGroup","Item","Badge","pill","ReapeatRandomSearch","previous","tools","randomSearchRepeats","GameSetting","CloseRandomSearch","EndFriendlyInvitation","friendlyGameTarget","ReloadRecords","recordReloadTrigger","reloadTrigger","FriendRecords","person","thisIsMe","gameType","setGameType","setAvatar","records","md","Image","src","alt","roundedCircle","points","wins","draws","loses","xs","InviteToFriendlyGame","setTimeout","InputGroup","Prepend","Radio","onChange","defaultChecked","myGames","setMyGames","filterID","setFilterID","selectedFriendIndex","setSelectedFriendIndex","friends","setFriends","friendsCount","setFriendsCount","serverResponse","reverse","Header","Tab","defaultActiveKey","onSelect","key","Link","eventKey","area-hidden","Content","Pane","filter","game","id","noticeServices","createNotice","notice","getAdvancedNotics","getShortNotices","editNotice","noticeID","NoticeManager","undefined","isAllowed","setAllowed","setTitle","setText","startDate","setStartDate","endDate","setEndDate","notices","setNotices","selectedNoticeID","setSelectedNoticeID","updateTrigger","setUpdateTrigger","resetStates","decoded_token","jwtdecode","admin","exp","now","createNewNotice","saveChanges","Form","Label","Control","e","target","pattern","onInput","setCustomValidity","onInvalid","placeholder","required","as","calendarPosition","Alert","color","fontSize","_id","selecteNotice","SendMessageTo","Message","previousDay","showDate","setShowDate","setTime","hDate","hTime","getDate","ChatBox","chat","myMessage","setMyMessage","message","mostRecentMessageRef","useRef","current","scrollIntoView","behavior","top","offsetTop","index","ref","onSubmit","event","preventDefault","composeMessage","sort","i1","i2","getTime","setFullname","studentID","setStudentID","email","setEmail","password","setPassword","pageUpdateTrigger","triggerPageUpdate","Group","disabled","newPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","checkConfirmPassword","ImagePicker","selector","preview","setPreview","rounded","imageFile","oFReader","FileReader","readAsDataURL","onload","oFREvent","result","updatePreview","files","accept","htmlFor","AvatarChange","myAvatar","selectMyAvatar","upload","AcountManager","TABS","Tabs","SignInSideBar","onSignInSubmitted","setState","Number","replace","this","autoComplete","Component","NoticeSideBar","uuidv1","OnlineStatistics","statistics","games","GameChatBox","PlayerInfoSideBar","scoreboard","personIsFriend","setPersonIsFriend","piece","setPiece","opp","isFriend","onFriendRequestClick","innerHTML","friendRequestTarget","Heading","shape","pathname","location","leftSideBar","setLeftSideBar","rightSideBar","setRightSideBar","setPrimaryRightSideBar","Tablet","createSocketRequest","rname","connect","roomName","resolve","server","WebSocket","onopen","send","onerror","close","onclose","withReduxDashboard","component","LoadThisPlayer","ExitRoom","UpdateScoreboard","details","CleanScoreboard","BriefScoreboard","timeRemaining","timeStamp","setTimeStamp","aThird","textAlign","TableDesign","dimension","table","onEachCellClick","normalCell","dimens","cell","setCell","i","cellWidths","cellHeights","deviceWidth","window","innerWidth","deviceHeight","innerHeight","margin","h","w","row","direction","marginLeft","column","GamePlay","selected","lineColor","turn","myTurn","socketGamePlay","playerOnline","timerID","connectionCheckTimerID","updateGameScorebaord","oppTurn","enableTimerForMyMove","timeout","clearInterval","setInterval","updatePlayerStates","disableAllTimers","clearTimeout","socketOnMessage","parse","cmd","startTime","IDs","opponentID","cellID","nextMove","verifyAndApplyTheMove","getCellCoordinates","cellButtons","focus","endThisGame","closeThisGame","forceConnectWS","nextJob","socket","onmessage","enableConnectionCheckTimer","navigator","onLine","dimen","onFloorId","selectedCellButton","cellButton","tempTable","inspectAreaAroundTheCell","playerInTheCell","rowCount","columnCount","floorMainDiagCount","floorSideDiagCount","tableMainDiagCount","tableSideDiagCount","tableAltitudeCount","connectTheScoreLines","count","firstCell","step","getElementsByClassName","SingleGame","searching","setSearching","onStartGameClick","borderRadius","padding","checked","CompetitionSummary","summary","CompetitionsMain","transition","friendlyGame","href","ScoresTable","liveScores","finalScores","showLiveOnes","btnShowLiveScores","btnShowFinalScores","allGames","then","isLive","catch","ModalSignIn","showModal","onCloseClick","onShowClick","onForgotPasswordClick","Modal","backdrop","show","onHide","closeButton","controlId","confirmPassword","firstname","lastname","onSignUpSubmit","trim","newUser","SinglePlayerCard","rowNumber","scope","AllPlayers","p","tempPlayers","p1","p2","MainRouter","path","gameInvitation","pushed","NewMsg","by","inviterID","ID","acceptedGame","onClose","expirationLength","iat","GlobalSocketManager","socketGlobal","setSocketGlobal","incommingFriendRequest","setIncommingFriendRequest","showFriendshipModal","setShowFriendshipModal","clientOnline","toggleClientOnline","pack","useCallback","enableGlobalTimer","iamSignedIn","iamBusy","command","UpdateStatistics","answer","targetName","askerID","askerName","RecieveGameInvitation","respondToFriendshipRequest","App","reducers","combineReducers","action","store","createStore","applyMiddleware","thunk","render","getElementById","ClientRoutes","require","ServerRoutes"],"mappings":"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","file":"static/js/main.5615b582.chunk.js","sourcesContent":["//client routes\r\n\r\n// Partial Routes\r\nconst Profile = \"/Profile\",\r\n    ChatRoom = \"ChatRoom\",\r\n    MyGamesAndFriends = \"GamesFriends\",\r\n    Notices = \"Notices\";\r\n\r\nmodule.exports = {\r\n    Root: \"/\",\r\n    SignUp: \"/SignUp\",\r\n    SignIn: \"/SignIn\",\r\n    GameDeck: \"/GameDeck\",\r\n    Rankings: \"/Rankings\",\r\n    GameGuide: \"/GameGuide\",\r\n    ContactUs: \"/ContacUs\",\r\n    Profile,\r\n    ChatRoom: `${Profile}/${ChatRoom}`,\r\n    MyGamesAndFriends: `${Profile}/${MyGamesAndFriends}`,\r\n    Notices: `${Profile}/${Notices}`,\r\n};\r\n","//server routes\r\nmodule.exports = {\r\n    Root: \"https://t3dweb.herokuapp.com\",\r\n    WebSocketRoot: \"wss://t3dweb.herokuapp.com/ws\",\r\n    wsGamePlayRoute: \"gameplay\",\r\n    wsGlobalRoute: \"global\",\r\n    SignUp: \"signup\",\r\n    SignIn: \"signin\",\r\n    Users: \"users\",\r\n    Private: \"private\",\r\n    Credentials: \"credentials\",\r\n    MyAvatar: \"avatar\",\r\n    PasswordChange: \"password\",\r\n    Friends: \"friends\",\r\n    Records: \"records\",\r\n    Administrators: \"administrators\",\r\n    Games: \"games\",\r\n    Mine: \"mine\",\r\n    Chats: \"chats\",\r\n    Interactions: \"interact\",\r\n    SingleChat: \"single\",\r\n    Notices: \"notices\",\r\n    NoticeManagement: \"manage\"\r\n};","const isErrorExpected = (error) => {\r\n    return (\r\n        error.response &&\r\n        error.response.status >= 400 && // >= 400\r\n        error.response.status < 500\r\n    );\r\n};\r\n\r\nmodule.exports = {\r\n    Successful: 200,\r\n    CreatedSuccessfully: 201,\r\n    BadRequest: 400,\r\n    Unauthorized: 401,\r\n    Forbidden: 403,\r\n    NotFound: 404,\r\n    NotAcceptable: 406,\r\n    Conflict: 409,\r\n    SessionExpired: 420,\r\n    UnprocessableEntity: 422,\r\n    InternalServerError: 500,\r\n    isErrorExpected,\r\n};\r\n","//browser storage keywords\r\nconst KeyToken = \"ptk\";\r\nmodule.exports = {\r\n    save: (token) => {\r\n        // use remember me option\r\n        sessionStorage.setItem(KeyToken, token);\r\n    },\r\n    reset: () => {\r\n        sessionStorage.clear();\r\n    },\r\n    TOKEN: () => sessionStorage.getItem(KeyToken),\r\n};\r\n","module.exports = {\r\n    T3D: {\r\n        TableRowMargings: [0, 41, 82, 123, 164],\r\n        TurnTimeOut: 45, //secs\r\n    },\r\n    RandomSearchRepeatLimit: 5,\r\n};\r\n","import { createContext } from \"react\";\r\n\r\nconst GlobalContext = createContext({\r\n    device: 0,\r\n    signOut: () => {},\r\n    goTo: () => {},\r\n    redirectToGamePlay: () => {}\r\n});\r\n\r\nexport default GlobalContext;","import { useContext } from \"react\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nimport { Devices, Routes } from \"../services/configs\";\r\n\r\nconst NavigationBar = () => {\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst context = useContext(GlobalContext);\r\n\r\n\treturn (\r\n\t\t<Navbar style={{borderBottom: '1px solid grey'}}  bg=\"light\" className=\"nav-pills text-right\">\r\n\t\t\t<Container className=\"text-right\">\r\n\t\t\t\t<Nav className=\"me-auto\">\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tactiveClassName=\"btn-success text-dark\"\r\n\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\tme\r\n\t\t\t\t\t\t\t\t? Routes.Client.Profile\r\n\t\t\t\t\t\t\t\t: Routes.Client.SignUp\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-address-card px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{me\r\n\t\t\t\t\t\t\t? context.device !== Devices.SmartPhone && me.fullname\r\n\t\t\t\t\t\t\t: \"ثبت نام\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.Root}\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i className=\"fa fa-home px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"صفحه اصلی\"}\r\n\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.GameDeck}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-gamepad px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"بازی ها\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t{me && (\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\t\tto={Routes.Client.ChatRoom}\r\n\t\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-comment px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t{context.device === Devices.Desktop && \"چت روم\"}\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.Rankings}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-list-ol px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"رنکینگ\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.GameGuide}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i className=\"fa fa-eye px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"راهنما\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.ContactUs}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-phone-square px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"تماس با ما\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</Nav>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n};\r\n\r\nexport default NavigationBar;\r\n","import { toast } from \"react-toastify\";\r\n\r\nexport const Sorry = (text) => {\r\n\ttoast.error(text, {\r\n\t\t// theme: \"light\",\r\n\t\tposition: \"top-right\",\r\n\t\tcloseOnClick: true,\r\n\t\ticon: (\r\n\t\t\t<i\r\n\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\tclassName=\"fa fa-times\"\r\n\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const OK = (text) => {\r\n\ttoast.success(text, {\r\n\t\t// theme: \"light\",\r\n\t\tposition: \"top-left\",\r\n\t\tcloseOnClick: true,\r\n\t\ticon: (\r\n\t\t\t<i\r\n\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\tclassName=\"fa fa-check\"\r\n\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const Notify = (text) => {\r\n\ttoast.info(text, {\r\n\t\t// theme: \"light\",\r\n\t\tposition: \"top-center\",\r\n\t\tcloseOnClick: true,\r\n\t\ticon: (\r\n\t\t\t<i\r\n\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\tclassName=\"fa fa-info\"\r\n\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t),\r\n\t});\r\n};\r\n\r\nexport const Attention = (text, onClick) => {\r\n\t/*toast.warn(text, {\r\n        type: \"colored\",\r\n        position: \"top-center\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-gavel\" aria-hidden=\"true\"></i>,\r\n    });*/\r\n\ttoast.warn(text, {\r\n\t\ttype: \"dark\",\r\n\t\tposition: \"top-center\",\r\n\t\tonClick, // check these two lines functionality to make sure they doesnt interfere with eachother\r\n\t\tcloseOnClick: !Boolean(onClick), //if it has an onClick, then dont close it, but if it hasnt any onClick then set closeOnClick to true\r\n\t\ticon: (\r\n\t\t\t<i\r\n\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\tclassName=\"fa fa-gavel\"\r\n\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t),\r\n\t});\r\n};\r\n\r\n//add maximum number of simultanious NewMsg s\r\nexport const NewMsg = ({ name, text }, onClick) => {\r\n\ttoast(\r\n\t\t<p className=\"text-right\">\r\n\t\t\t{`${name} : ${text}`}\r\n\t\t</p>,\r\n\t\t{\r\n\t\t\ttype: \"dark\",\r\n\t\t\tposition: \"top-left\",\r\n\t\t\tonClick,\r\n\t\t\ticon: (\r\n\t\t\t\t<i\r\n\t\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\t\tclassName=\"fa fa-envelope-o px-2 py-1\"\r\n\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t),\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport const Invitation = (by, accept, reject) => {\r\n\ttoast(\r\n\t\t<p className=\"text-right text-primary\">\r\n\t\t\t{`درخواست بازی ${by.type}*${by.type}*${by.type} از ${by.name}\\n برای پذیرفتن دعوت کلیک کنید`}\r\n\t\t</p>,\r\n\t\t{\r\n\t\t\tposition: \"top-left\",\r\n\t\t\tonClick: () => accept(by.ID, by.type),\r\n\t\t\tonClose: () => reject(),\r\n\t\t\ticon: (\r\n\t\t\t\t<i\r\n\t\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\t\tclassName=\"fa fa-gamepad px-2 py-1\"\r\n\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t),\r\n\t\t}\r\n\t);\r\n};\r\n","import axios from \"axios\";\r\nimport { Status, browserStorage } from \"../configs\";\r\nimport { Attention, Sorry } from \"../../tools/notification\";\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\naxios.defaults.headers.put[\"Content-Type\"] = \"application/json\";\r\n\r\n// put token in all request headers:\r\naxios.interceptors.request.use(\r\n\t(config) => {\r\n\t\tconst token = browserStorage.TOKEN();\r\n\t\tif (token) config.headers.Authorization = `Bearer ${token}`;\r\n\t\telse config.headers.Authorization = null;\r\n\t\treturn config;\r\n\t},\r\n\t(error) => {\r\n\t\t// what to do?\r\n\t\treturn Promise.reject(error);\r\n\t}\r\n);\r\n// what the f should i do?\r\n// (() => {\r\n//     const token = sessionStorage.getItem(\"token\");\r\n//     if (token)\r\n//         axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n//     else {\r\n//         delete axios.defaults.headers.common[\"Authorization\"];\r\n//         /*if setting null does not remove `Authorization` header then try\r\n//               delete axios.defaults.headers.common['Authorization'];\r\n//             */\r\n//     }\r\n//     console.log(\"token\", token);\r\n// })();\r\n\r\naxios.interceptors.response.use(null, (error) => {\r\n\ttry {\r\n\t\tconst expectedErrors =\r\n\t\t\terror.response &&\r\n\t\t\terror.response.status >= Status.BadRequest && // >= 400\r\n\t\t\terror.response.status < Status.InternalServerError; // < 500\r\n\r\n\t\t//*****notice: */\r\n\t\t//remove some oftheese errors... because they need to be costomized in every use in each components\r\n\t\t// change to switch\r\n\t\tif (error.response.status === Status.BadRequest) {\r\n\t\t\tSorry(\r\n\t\t\t\t\"مشکلی در ارسال درخواست شما به سرور وجود داشت، لطفا دوباره تلاش کنید\"\r\n\t\t\t);\r\n\t\t} else if (error.response.status === Status.Unauthorized) {\r\n\t\t\t// is this needed? browserStorage.reset();\r\n\t\t\tSorry(\r\n\t\t\t\t\"احراز هویت موفقیت آمیز نبود. لطفا وارد حساب کاربری خود شوید\"\r\n\t\t\t);\r\n\t\t\tbrowserStorage.reset();\r\n\t\t} else if (error.response.status === Status.Forbidden) {\r\n\t\t\tSorry(\"شماره دانشجویی یا رمز عبور نادرست است\");\r\n\t\t} else if (error.response.status === Status.NotAcceptable) {\r\n\t\t\t//or used Locked: 423\r\n\t\t\tSorry(\"این قسمت فقط مختص کاربران ادمین می باشد\");\r\n\t\t} else if (error.response.status === Status.Conflict) {\r\n\t\t\tAttention(\r\n\t\t\t\t\"کاربری با این شماره دانشجویی یا ایمیل قبلا ثبت نام کرده است\"\r\n\t\t\t);\r\n\t\t} else if (error.response.status === Status.SessionExpired) {\r\n\t\t\tSorry(\"نشست شما منقضی شده است، لطفا دوباره وارد حساب خود شوید.\");\r\n\t\t\tbrowserStorage.reset();\r\n\t\t\t//redirect to sign in page !\r\n\t\t} else if (error.response.status === Status.UnprocessableEntity) {\r\n\t\t\tSorry(\"ورودی شما با استانداردهای سایت مطابقت ندارد\");\r\n\t\t} else if (!expectedErrors) {\r\n\t\t\t// console.log(error);\r\n\t\t\tSorry(\r\n\t\t\t\t\"مشکلی از سمت سرور پیش آمده است ... لطفا لحظاتی بعد دوباره تلاش کنید\"\r\n\t\t\t);\r\n\t\t}\r\n\t} catch (err) {\r\n        console.log(error);\r\n    }\r\n\treturn Promise.reject(error);\r\n});\r\n\r\nconst http = {\r\n\tget: axios.get,\r\n\tpost: axios.post,\r\n\tput: axios.put,\r\n\tdelete: axios.delete,\r\n};\r\n\r\nexport default http;\r\n","import http from \"./httpService\";\r\nimport { Routes } from \"../configs\";\r\n\r\nconst { Server } = Routes;\r\n\r\nconst userServices = {\r\n\tsignUp: (user) =>\r\n\t\thttp.post(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.SignUp}`,\r\n\t\t\tJSON.stringify(user)\r\n\t\t),\r\n\tsignIn: (user) =>\r\n\t\thttp.post(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.SignIn}`,\r\n\t\t\tJSON.stringify(user)\r\n\t\t),\r\n\tgetPlayer: (userID) =>\r\n\t\thttp.get(`${Server.Root}/${Server.Users}/${Server.Records}/${userID}`),\r\n\tgetAvatar: (userID) =>\r\n\t\thttp.get(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.MyAvatar}/${userID}`\r\n\t\t),\r\n\tgetAllPlayers: () =>\r\n\t\thttp.get(`${Server.Root}/${Server.Users}/${Server.Records}`),\r\n\tgetMe: () => http.get(`${Server.Root}/${Server.Users}/${Server.Private}`),\r\n\tgetMyCredentials: () =>\r\n\t\thttp.get(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.Credentials}`\r\n\t\t),\r\n\teditMyCredentials: (newMe) =>\r\n\t\thttp.put(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.Credentials}`,\r\n\t\t\tJSON.stringify(newMe)\r\n\t\t),\r\n\tchangeMyPassword: (passwords) =>\r\n\t\thttp.put(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.Credentials}/${Server.PasswordChange}`,\r\n\t\t\tJSON.stringify(passwords)\r\n\t\t),\r\n\tuploadAvatar: (avatar) => {\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append(\"avatar\", avatar);\r\n\t\treturn http.post(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.MyAvatar}`,\r\n\t\t\tformData,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\tgetMyFriends: () =>\r\n\t\thttp.get(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.Credentials}/${Server.Friends}`\r\n\t\t),\r\n\tisMyFriend: (targetID) =>\r\n\t\thttp.get(\r\n\t\t\t`${Server.Root}/${Server.Users}/${Server.Private}/${Server.Credentials}/${Server.Friends}/${targetID}`\r\n\t\t)\r\n};\r\n\r\nexport default userServices;\r\n","import { Status } from \"../../../services/configs\";\r\nimport userServices from \"./../../../services/http/userServices\";\r\n\r\nexport const ResetOpponent = () =>{\r\n    return async (dispatch) => {\r\n        await dispatch({type: \"RESET_OPPONENT\"})\r\n    }\r\n}\r\n\r\nexport const ResetMyPlayer = () => {\r\n    return async (dispatch) => {\r\n        await dispatch({ type: \"RESET_MINE\" });\r\n    };\r\n};\r\n\r\nexport const LoadThisPlayer = (userID) => {\r\n\treturn async (dispatch) => {\r\n\t\tif (userID) {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data, status } = await userServices.getPlayer(userID);\r\n\t\t\t\tif (status === Status.Successful) {\r\n\t\t\t\t\tconst { player } = data;\r\n\t\t\t\t\tawait dispatch({ type: \"LOAD_OPPONENT\", payload: player });\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\t// ... toast proper message?\r\n\t\t\t\tawait dispatch(ResetOpponent());\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// ...propere message\r\n\t\t\tawait dispatch(ResetOpponent());\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const LoadMyPlayer = () => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tconst { data, status } = await userServices.getMe();\r\n\t\t\tif (status === Status.Successful) {\r\n\t\t\t\tconst { player } = data;\r\n\t\t\t\tawait dispatch({ type: \"LOAD_MINE\", payload: player });\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\t// ... toast proper message?\r\n\t\t\tawait dispatch(ResetMyPlayer());\r\n\t\t}\r\n\t};\r\n};\r\n","export const EnterRoom = (room) => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"ENTER_ROOM\",\r\n\t\t\tpayload: room,\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport const ExitRoom = () => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"EXIT_ROOM\",\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport const CleanScoreboard = () => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({ type: \"CLEAN_SCOREBOARD\" });\r\n\t};\r\n};\r\n\r\nexport const UpdateScoreboard = (details) => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"UPDATE_SCOREBOARD\",\r\n\t\t\tpayload: details,\r\n\t\t});\r\n\t};\r\n};\r\n\r\n/*export const SetGameID = (gameID) => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"SET_GAME_ID\",\r\n\t\t\tpayload: gameID,\r\n\t\t});\r\n\t};\r\n};*/\r\n","import { useMediaQuery } from \"react-responsive\";\r\nimport { useEffect, useState } from \"react\";\r\nimport GlobalContext from \"./GlobalContext\";\r\nimport { withRouter } from \"react-router\";\r\nimport { browserStorage, Routes } from \"../../services/configs\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { ResetMyPlayer } from './../redux/actions/player';\r\nimport { EnterRoom } from './../redux/actions/game';\r\nconst GlobalStates = ({ children, history }) => {\r\n\tconst isDesktop = useMediaQuery({ query: \"(min-width: 1200px)\" });\r\n\tconst isSmartPhone = useMediaQuery({ query: \"(max-width: 768px)\" });\r\n\tconst isTablet = !isDesktop && !isSmartPhone;\r\n\tconst [device, setDevice] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconsole.log(\"GlobalStates rendered\"); //s\r\n\tuseEffect(() => {\r\n\t\t// find device mode\r\n\t\t// array is sorted according to Configs.Devices\r\n\t\tsetDevice(\r\n\t\t\t[isDesktop, isTablet, isSmartPhone].findIndex((mode) => mode)\r\n\t\t); //return the index of the one that is true -> wich is the curret device mode\r\n\t}, [isDesktop, isTablet, isSmartPhone]);\r\n\r\n\tconst signOut = () => {\r\n\t\ttry {\r\n\t\t\tbrowserStorage.reset(); //sign out\r\n\t\t\thistory.push(Routes.Client.SignUp);\r\n\t\t\tdispatch(ResetMyPlayer());\r\n\t\t\t// edit .replace; use a function that doesnt recent BACK key on browser\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst redirectToGamePlay = (room) => {\r\n\t\tdispatch(EnterRoom(room));\r\n\t\thistory.push(Routes.Client.GameDeck);\r\n\t}\r\n\r\n\tconst goTo = (destination) => {\r\n\t\thistory.push(destination);\r\n\t}  \r\n\r\n\treturn (\r\n\t\t<GlobalContext.Provider value={{ device, signOut, redirectToGamePlay, goTo }}>\r\n\t\t\t{children}\r\n\t\t</GlobalContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default withRouter(GlobalStates);\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { Button, Row } from \"react-bootstrap\";\r\nimport \"../profile.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Fragment, useContext } from \"react\";\r\nimport Configs from \"../../services/configs\";\r\nimport GlobalContext from './../../globals/state/GlobalContext';\r\n\r\nconst ProfilePanel = (props) => {\r\n    const me = useSelector((state) => state.me);\r\n    const context = useContext(GlobalContext);\r\n\r\n    return (\r\n            <Row className=\"profile-panel-sidebar d-flex flex-column flex-shrink-0\">\r\n                <Button\r\n                    style={{ border: \"none\" }}\r\n                    variant=\"outline-warning\"\r\n                    className=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none\">\r\n                    <i className=\"fa fa-cogs px-2\" aria-hidden=\"true\"></i>\r\n                    پنل کاربری\r\n                </Button>\r\n                <hr />\r\n                <ul className=\"nav nav-pills flex-column mb-auto\">\r\n                    <li className=\"nav-item\">\r\n                        <NavLink\r\n                            exact\r\n                            to={Configs.Routes.Client.Profile}\r\n                            className=\"nav-link\"\r\n                            aria-current=\"page\">\r\n                            <i\r\n                                className=\"fa fa-user-o px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            مشخصات\r\n                        </NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink\r\n                            className=\"nav-link link-dark\"\r\n                            to={Configs.Routes.Client.MyGamesAndFriends}>\r\n                            <i\r\n                                className=\"fa fa-users px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            دوستان و بازی ها\r\n                        </NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink\r\n                            className=\"nav-link link-dark\"\r\n                            to={Configs.Routes.Client.ChatRoom}>\r\n                            <i\r\n                                className=\"fa fa-comment px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            چت روم\r\n                        </NavLink>\r\n                    </li>\r\n                    <hr />\r\n                    {me && me.isAdmin && (\r\n                        <Fragment>\r\n                            {/* admin tools */}\r\n                            <li>\r\n                                <NavLink\r\n                                    className=\"nav-link link-dark border-top\"\r\n                                    to={Configs.Routes.Client.Notices}>\r\n                                    <i\r\n                                        className=\"fa fa-newspaper-o px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                    اطلاعیه ها\r\n                                </NavLink>\r\n                            </li>\r\n                            <li>\r\n                                <NavLink\r\n                                    className=\"nav-link link-dark\"\r\n                                    to=\"/controlPanel/admin/whatever\">\r\n                                    <svg\r\n                                        className=\"bi me-2\"\r\n                                        width=\"16\"\r\n                                        height=\"16\"></svg>\r\n                                    امکانات ادمین\r\n                                </NavLink>\r\n                            </li>\r\n                        </Fragment>\r\n                    )}\r\n                </ul>\r\n                <hr />\r\n                <Button variant=\"outline-danger\" onClick={context.signOut}>\r\n                    <i className=\"fa fa-sign-out px-2\" aria-hidden=\"true\"></i>\r\n                    خروج از حساب کاربری\r\n                </Button>\r\n            </Row>\r\n    );\r\n};\r\n\r\nexport default ProfilePanel;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { Button, Navbar} from \"react-bootstrap\";\r\nimport \"../profile.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Fragment, useContext } from \"react\";\r\nimport Configs from \"../../services/configs\";\r\nimport GlobalContext from \"../../globals/state/GlobalContext\";\r\n\r\nconst CollapsedPanel = () => {\r\n    const me = useSelector((state) => state.me);\r\n    const context = useContext(GlobalContext);\r\n    return (\r\n        <Navbar bg=\"transparent\"  className=\"justify-content-center pt-2 p-0 nav-pills text-right w-100\">\r\n            <NavLink activeClassName=\"btn btn-primary\"\r\n                exact\r\n                to={Configs.Routes.Client.Profile}\r\n                className=\"nav-link mx-1\"\r\n                aria-current=\"page\">\r\n                <i className=\"fa fa-user-o\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n            <NavLink activeClassName=\"btn btn-primary\"\r\n                className=\"nav-link mx-1\"\r\n                to={Configs.Routes.Client.MyGamesAndFriends}>\r\n                <i className=\"fa fa-users\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n            <NavLink activeClassName=\"btn btn-primary\"\r\n                className=\"nav-link mx-1\"\r\n                to={Configs.Routes.Client.ChatRoom}>\r\n                <i className=\"fa fa-weixin\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n\r\n            {me && me.isAdmin && (\r\n                <Fragment>\r\n                    {/* admin tools */}\r\n                    <NavLink activeClassName=\"btn btn-primary\"\r\n                        className=\"nav-link mx-1 border-top\"\r\n                        to={Configs.Routes.Client.Notices}>\r\n                        <i className=\"fa fa-newspaper-o\" aria-hidden=\"true\"></i>\r\n                    </NavLink>\r\n                    <NavLink activeClassName=\"btn btn-primary\"\r\n                        className=\"nav-link mx-1\"\r\n                        to=\"/controlPanel/admin/whatever\">\r\n                        <svg className=\"bi me-2\" width=\"16\" height=\"16\"></svg>\r\n                    </NavLink>\r\n                </Fragment>\r\n            )}\r\n\r\n            <Button\r\n                variant=\"outline-danger\"\r\n                className=\"mx-3\"\r\n                onClick={context.signOut}>\r\n                <i className=\"fa fa-sign-out\" aria-hidden=\"true\"></i>\r\n            </Button>\r\n        </Navbar>\r\n    );\r\n};\r\n\r\nexport default CollapsedPanel;\r\n","import { useDispatch } from \"react-redux\";\r\nimport { browserStorage } from \"../services/configs\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { LoadMyPlayer } from \"../globals/redux/actions/player\";\r\nimport { ResetMyPlayer } from './../globals/redux/actions/player';\r\n\r\n// auto-sign in if store sign in data was reset\r\nconst AutoSignIn = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst opponent = useSelector((state) => state.opponent); //this is just to add opponent to useEffect dependencies\r\n\t// tis way, every time player game ends ( opponent resets ), player records will update\r\n\tconst storageToken = browserStorage.TOKEN();\r\n\tuseEffect(() => {\r\n\t\tif (storageToken) {\r\n\t\t\tconsole.log(`auth called then `);\r\n\t\t\tdispatch(LoadMyPlayer());\r\n\t\t} else {\r\n\t\t\tdispatch(ResetMyPlayer());\r\n\t\t}\r\n\t}, [storageToken, opponent, dispatch]);\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default AutoSignIn;\r\n","import { Routes } from '../configs';\r\n\r\nimport http from \"./httpService\";\r\n\r\nconst {Server} = Routes;\r\n\r\nconst chatServices = {\r\n    \r\n    getOurChat: (friendID) => {\r\n        return http.get(`${Server.Root}/${Server.Chats}/${Server.SingleChat}/${friendID}`);\r\n    },\r\n    getMyInteractions: () => {\r\n        return http.get(`${Server.Root}/${Server.Chats}/${Server.Interactions}`);\r\n    }\r\n};\r\n\r\nexport default chatServices;","import { Status } from \"../../../services/configs\";\r\nimport chatServices from \"../../../services/http/chatServices\";\r\nimport { Sorry } from \"../../../tools/notification\";\r\n\r\n// chats and friends\r\nexport const LoadInteractions = () => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tvar myInteractions = [];\r\n\t\t\tconst { status, data } = await chatServices.getMyInteractions();\r\n\t\t\tif (status === Status.Successful) {\r\n\t\t\t\tconst { interactions } = data;\r\n\t\t\t\tif (interactions instanceof Array) {\r\n\t\t\t\t\t//interactions catched from server side, but it requires modification: sorting, formatting messages\r\n\t\t\t\t\tinteractions.forEach((interact) => {\r\n\t\t\t\t\t\t// reformat clients chats in his/her own viewpoint\r\n\t\t\t\t\t\tconst { friend, messages, ownerOf } = interact;\r\n\t\t\t\t\t\tmyInteractions.push({\r\n\t\t\t\t\t\t\twith: friend,\r\n\t\t\t\t\t\t\tmessages: messages.map((msg) =>\r\n\t\t\t\t\t\t\t\townerOf === msg.owner\r\n\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\tme: msg.text,\r\n\t\t\t\t\t\t\t\t\t\t\tfriend: null,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: msg.date,\r\n\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\tme: null,\r\n\t\t\t\t\t\t\t\t\t\t\tfriend: msg.text,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: msg.date,\r\n\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait dispatch({\r\n\t\t\t\t\t\ttype: \"LOAD_INTERACTIONS\",\r\n\t\t\t\t\t\tpayload: myInteractions,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// dispatch friends here\r\n\t\t\t\t\t// myChats key-value array: its keys are friendID that is relative to a special chat\r\n\t\t\t\t} else throw new Error(\"null interaction response! means sth went wrong\");\r\n\t\t\t} else throw new Error(\"Error happened while forming chats list\");\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(\r\n\t\t\t\t`Loading chats interrupted cause of this error: ${err}`\r\n\t\t\t);\r\n\t\t\t//show proper message\r\n\t\t\tSorry(\r\n\t\t\t\t\"حین بارگذاری پیام ها مشکلی پیش آمد. لطفا لحظاتی بعد دوباره تلاش کنید\"\r\n\t\t\t);\r\n\t\t\tawait dispatch({ type: \"RESET_INTERACTIONS\" });\r\n\t\t}\r\n\t};\r\n};\r\n\r\n// export const ExtractFriends = () => {\r\n// \treturn async (dispatch, getState) => {\r\n// \t\tconst interactions = getState().interactions;\r\n// \t\tconst friends = Interactions\r\n// \t}\r\n// }\r\nexport const UpdateMyChatList = (name, friendID, text, { sent, recieved }) => {\r\n\t// one time u load from server, then new messages are simply pushed to previous data\r\n\treturn async (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tconst myinteractions = getState().interactions;\r\n\t\t\tmyinteractions\r\n\t\t\t\t.find((interact) => interact.with.userID === friendID)\r\n\t\t\t\t.messages.push({\r\n\t\t\t\t\tname: name, //is name needed?\r\n\t\t\t\t\tme: sent ? text : null,\r\n\t\t\t\t\tfriend: recieved ? text : null,\r\n\t\t\t\t\tdate: new Date(),\r\n\t\t\t\t});\r\n\r\n\t\t\tawait dispatch({\r\n\t\t\t\ttype: \"LOAD_INTERACTIONS\",\r\n\t\t\t\tpayload: myinteractions,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\t//..propeer message\r\n\t\t\t// ...reset?\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const ResetInteractions = () => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({ type: \"RESET_INTERACTIONS\" });\r\n\t};\r\n};\r\n","import { Fragment, useLayoutEffect, useState, useEffect } from \"react\";\r\nimport { Planets, Circle2, Sugar } from \"react-preloaders2\";\r\n\r\nconst LoadingBar = ({ loading }) => {\r\n    const [whichOne, setWhichOne] = useState(0);\r\n    useEffect(() => {\r\n        setWhichOne(Math.floor(Math.random() * 100)); //randomize animation\r\n    }, []);\r\n    useLayoutEffect(() => {\r\n        document.body.style = { overflowY: \"auto\" };\r\n        document.body.style = { height: \"auto\" };\r\n    }, [loading, whichOne]); //may have bug yet!!\r\n    //random animation\r\n    const selectedLoader =\r\n        whichOne % 3 === 0 ? (\r\n            <Circle2 time={0} customLoading={loading} />\r\n        ) : whichOne % 3 === 1 ? (\r\n            <Planets time={0} customLoading={loading} />\r\n        ) : (\r\n            <Sugar time={0} customLoading={loading} />\r\n        );\r\n\r\n    return <Fragment>{loading ? selectedLoader : null}</Fragment>;\r\n};\r\n\r\nexport default LoadingBar;\r\n","import { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { Devices } from \"../services/configs\";\r\nimport ProfilePanel from \"../profile/panel/ProfilePanel\";\r\nimport CollapsedPanel from \"../profile/panel/CollapsedPanel\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AutoSignIn from \"../users/AutoSignIn\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nimport {\r\n\tLoadInteractions,\r\n\tResetInteractions,\r\n} from \"../globals/redux/actions/interactions\";\r\nimport { LoadMyPlayer } from \"../globals/redux/actions/player\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\n\r\nconst ProfilePanelLayout = ({ children }) => {\r\n\tconst context = useContext(GlobalContext);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tawait dispatch(LoadMyPlayer());\r\n\t\t\t\tawait dispatch(LoadInteractions());\r\n\t\t\t\t// profile unmounted\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t\treturn () => {\r\n\t\t\t// remove chat list from redux to save memory\r\n\t\t\tdispatch(ResetInteractions());\r\n\t\t};\r\n\t}, [dispatch]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t<AutoSignIn />\r\n\t\t\t{context.device === Devices.Desktop ? (\r\n\t\t\t\t<Row className=\"w-100 mx-auto\">\r\n\t\t\t\t\t<Col lg={3}>\r\n\t\t\t\t\t\t<ProfilePanel />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={9}>{children}</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t) : (\r\n\t\t\t\t<Row className=\"w-100 mx-auto\">\r\n\t\t\t\t\t<Col className=\"mx-auto\" sm={12}>\r\n\t\t\t\t\t\t<CollapsedPanel />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={12}>{children}</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default ProfilePanelLayout;\r\n","import { Routes } from \"../configs\";\r\n\r\nimport http from \"./httpService\";\r\n\r\nconst { Server } = Routes;\r\n\r\nconst gameServices = {\r\n\tgetAllGames: () => {\r\n\t\treturn http.get(`${Server.Root}/${Server.Games}`);\r\n\t},\r\n\tgetMyGames: () => {\r\n\t\treturn http.get(`${Server.Root}/${Server.Games}/${Server.Mine}`);\r\n\t}\r\n};\r\n\r\nexport default gameServices;\r\n","import DateObject from \"react-date-object\";\r\nimport persian from \"react-date-object/calendars/persian\";\r\nimport persian_fa from \"react-date-object/locales/persian_fa\";\r\n\r\nconst objectify = (date) => {\r\n    return new DateObject({\r\n\t\tdate: new Date(date),\r\n\t\tcalendar: persian,\r\n\t\tlocale: persian_fa,\r\n\t});\r\n}\r\nexport const toHijri = (date) => {\r\n\treturn [\r\n\t\tobjectify(date).format(\"dddd DD MMMM YYYY\"),\r\n\t\tobjectify(date).format(\"hh:mm\"),\r\n\t];\r\n};\r\n\r\nexport const toTimeShort = (date) => {\r\n\treturn objectify(date).format(\"hh:mm\");\r\n};\r\n","import { Button, Card, Row } from \"react-bootstrap\";\r\nimport \"./scores.css\";\r\nimport { useEffect, useState } from 'react';\r\nimport { toHijri } from \"../../tools/format\";\r\n\r\nconst SingleScoreCard = ({\r\n    Type,\r\n    date,\r\n    playerXName,\r\n    playerOName,\r\n    xScore,\r\n    oScore,\r\n}) => {\r\n    // format score text:\r\n    const [xBadge, setXBadge] = useState(null);\r\n    const [oBadge, setOBadge] = useState(null);\r\n    const [hijriDate, setHijriDate] = useState(null);\r\n    useEffect(() => {\r\n        setHijriDate(toHijri(date)[0]);//toHijri = [date, time]\r\n        if (xScore > oScore) {\r\n            // x won\r\n            setXBadge(\"badge-success\");\r\n            setOBadge(\"badge-danger\");\r\n        } else if (xScore === oScore) {\r\n            //draw\r\n            setXBadge(\"badge-warning\");\r\n            setOBadge(\"badge-warning\");\r\n        } else {\r\n            // o won\r\n            setOBadge(\"badge-success\");\r\n            setXBadge(\"badge-danger\");\r\n        }\r\n    }, [date, xScore, oScore]);\r\n    // make this card 'bg-transparent' too?\r\n    return (\r\n        <Card border=\"dark\" className=\"single-score-card\">\r\n            {/* <Card.Header className=\"text-center border-dark\">{`T3D ${Type}x${Type}x${Type}`}</Card.Header> */}\r\n            <Card.Body>\r\n                <Row className=\"text-center mx-auto\">\r\n                    <span className=\"col-5\">{playerXName}</span>\r\n                    <span\r\n                        className={`badge badge-pill ${xBadge} single-score-badge col-1`}>\r\n                        {xScore}\r\n                    </span>\r\n\r\n                    <span\r\n                        className={`badge badge-pill ${oBadge} single-score-badge col-1`}>\r\n                        {oScore}\r\n                    </span>\r\n                    <span className=\"col-5\">{playerOName}</span>\r\n                </Row>\r\n            </Card.Body>\r\n            <Card.Footer className=\"p-0\">\r\n                <Button\r\n                    variant=\"outline-dark\"\r\n                    block\r\n                    size=\"lg\"\r\n                    className=\"replay-game-button\">\r\n                        {hijriDate} \r\n                        <i className=\"fa fa-pie-chart px-3\" aria-hidden=\"true\"></i>\r\n                </Button>\r\n            </Card.Footer>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default SingleScoreCard;\r\n","import { Fragment } from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport SingleScoreCard from \"./SingleScoreCard\";\r\n\r\nconst AllScores = ({scores}) => {\r\n    return ( \r\n        <Fragment>\r\n            { scores.length ? scores.map(score => (\r\n                <SingleScoreCard key={score.gameID}\r\n                    Type={score.Type}\r\n                    date={score.date}\r\n                    playerXName={score.players[0].name}\r\n                    playerOName={score.players[1].name}\r\n                    xScore={score.players[0].score}\r\n                    oScore={score.players[1].score}\r\n                ></SingleScoreCard>\r\n            )) :\r\n            <Card className=\"bg-transparent mx-auto mt-3\" border=\"danger\">\r\n                <Card.Body className=\"text-center\">\r\n                    <Card.Text>\r\n                        هیچ بازی ای انجام نگرفته است\r\n                    </Card.Text>\r\n                </Card.Body>\r\n                </Card>}\r\n        </Fragment>\r\n     );\r\n};\r\n \r\nexport default AllScores;","\r\nimport { Card, Col, ListGroup, Row } from 'react-bootstrap';\r\nimport { Badge } from 'react-bootstrap';\r\nimport '../profile.css';\r\n\r\nconst Record = ({children,title, small}) => {\r\n    return (\r\n        <ListGroup.Item className=\"h-100 bg-transparent\">\r\n            <Row className={!small && \"h-100 py-2\"}>\r\n                <Col className=\"text-center\">\r\n                    <Card.Text>{title}</Card.Text>\r\n                </Col>\r\n                <Col className={small ? \"text-left\" : \"text-center\"}>\r\n                    <Badge\r\n                        className=\"friend-badge-font-size\"\r\n                        pill\r\n                        variant=\"primary\">\r\n                        {children}\r\n                    </Badge>\r\n                </Col>\r\n            </Row>\r\n        </ListGroup.Item>\r\n    );\r\n};\r\n\r\nexport default Record;\r\n","import { GameSetting } from \"../../../services/configs\";\r\n\r\nexport const ReapeatRandomSearch = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.randomSearchRepeats = (previous.randomSearchRepeats + 1) % GameSetting.RandomSearchRepeatLimit;\r\n\t\t// randomSearchRepeats === 0 => means nor search is not happening or its happening and has reached to maximum allowed retries\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const CloseRandomSearch = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.randomSearchRepeats = 0;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const SendFriendRequestTo = (targetID) => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.friendRequestTarget = targetID;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const EndFriendRequest = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.friendRequestTarget = null;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const InviteToFriendlyGame = (targetID, gameType) => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.friendlyGameTarget = { targetID, type: gameType };\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const EndFriendlyInvitation = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.friendlyGameTarget = null;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const RecieveGameInvitation = (ID, name, gameType) => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.gameInvitation = { ID, name, type: gameType };\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const RejectGameInvitation = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.gameInvitation = null;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const AcceptInvitation = (inviterID, gameType) => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.acceptedGame = { inviterID, type: gameType };\r\n\t\tprevious.gameInvitation = null;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n\r\nexport const ReloadRecords = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst previous = { ...(getState().tools) };\r\n\t\tprevious.recordReloadTrigger = !previous.reloadTrigger;\r\n\t\tawait dispatch({ type: \"UPDATE_TOOLS\", payload: previous });\r\n\t};\r\n};\r\n","import {\r\n\tButton,\r\n\tCard,\r\n\tCol,\r\n\tListGroup,\r\n\tRow,\r\n\tInputGroup,\r\n\tImage,\r\n} from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport \"../profile.css\";\r\nimport Record from \"./Record\";\r\nimport { Sorry } from \"./../../tools/notification\";\r\nimport { useState, useEffect } from \"react\";\r\nimport userServices from \"./../../services/http/userServices\";\r\nimport {\r\n\tEndFriendlyInvitation,\r\n\tInviteToFriendlyGame,\r\n} from \"../../globals/redux/actions/tools\";\r\nimport { Status } from \"../../services/configs\";\r\nconst FriendRecords = ({ person, thisIsMe }) => {\r\n\tconst room = useSelector((state) => state.room);\r\n\tconst [gameType, setGameType] = useState(4);\r\n\tconst [avatar, setAvatar] = useState(null);//s\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (person) {\r\n\t\t\t(async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { data, status } = await userServices.getAvatar(\r\n\t\t\t\t\t\tperson.userID\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (status === Status.Successful) setAvatar(data.avatar);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\"مشکلی در بارگذاری آواتار این شخص پیش آمد ... لطفا اتصال اینترنت خود را بررسی کنید.\"\r\n\t\t\t\t\t);\r\n\t\t\t\t\t// use- no-avatar.png here too?\r\n\t\t\t\t\t// in case server return wrong?\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t}, [person]);\r\n\tconst onInviteToGameClick = () => {\r\n\t\tif (!room.type && !room.type && !thisIsMe) {\r\n\t\t\t//if you want to enable players play multiple games then remove this\r\n\t\t\t// if player isnt still in a game\r\n\t\t\t//check room info?\r\n\t\t\tdispatch(InviteToFriendlyGame(person.userID, gameType));\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t//Notify('دوست مورد نظر درخواست شما را نپذیرفت')\r\n\t\t\t\tdispatch(EndFriendlyInvitation());\r\n\t\t\t}, 10000);\r\n\t\t} else {\r\n\t\t\tSorry(\"برای شروع بازی جدید، باید بازی قبلی شما به اتمام برسد\");\r\n\t\t}\r\n\t};\r\n\tconst { records } = person;\r\n\r\n\treturn (\r\n\t\t<Card border=\"success\" bg=\"transparent\" className=\"friend-records\">\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<Row className=\"w-100 p-0 mx-auto\">\r\n\t\t\t\t\t{/* <hr /> */}\r\n\t\t\t\t\t<Col\r\n\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\tmd={12}\r\n\t\t\t\t\t\tlg={3}\r\n\t\t\t\t\t\tclassName=\"text-center mx-auuto\">\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tclassName=\"friends-section-avatar\"\r\n\t\t\t\t\t\t\tsrc={avatar}\r\n\t\t\t\t\t\t\talt=\"خطا\"\r\n\t\t\t\t\t\t\troundedCircle\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={12} md={12} lg={9}>\r\n\t\t\t\t\t\t<ListGroup className=\"list-group list-group-flush\">\r\n\t\t\t\t\t\t\t<Row className=\"h-100\">\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 h-100 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"امتیاز بازیکن\">\r\n\t\t\t\t\t\t\t\t\t\t{records.points}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 h-100 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد بردها\">\r\n\t\t\t\t\t\t\t\t\t\t{records.wins}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row className=\"h-100\">\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 h-100 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد تساوی\">\r\n\t\t\t\t\t\t\t\t\t\t{records.draws}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 h-100 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد باختها\">\r\n\t\t\t\t\t\t\t\t\t\t{records.loses}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card.Body>\r\n\t\t\t{!thisIsMe && person && (\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col sm={4} xs={12}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tonClick={onInviteToGameClick}>\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tclassName=\"fa fa-handshake-o px-2\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\tدرخواست بازی\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col sm={8} xs={12}>\r\n\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\t\t\tvalue={3}\r\n\t\t\t\t\t\t\t\t\t\tname=\"dimension\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={() => setGameType(3)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Text>3 * 3 * 3</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\t\t\tvalue={4}\r\n\t\t\t\t\t\t\t\t\t\tname=\"dimension\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={() => setGameType(4)}\r\n\t\t\t\t\t\t\t\t\t\tdefaultChecked\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Text>4 * 4 * 4</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\t\t\tvalue={5}\r\n\t\t\t\t\t\t\t\t\t\tname=\"dimension\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={() => setGameType(5)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<InputGroup.Text>5 * 5 * 5</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t)}\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default FriendRecords;\r\n","import { useState, useEffect } from \"react\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport Configs from \"../../services/configs\";\r\nimport gameServices from \"../../services/http/gameServices\";\r\nimport { Card, Col, Nav, Row, Tab } from \"react-bootstrap\";\r\nimport AllScores from \"../../tables/scores/AllScores\";\r\nimport \"../profile.css\";\r\nimport FriendRecords from \"./FriendRecords\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst MyGamesAndFriends = () => {\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [myGames, setMyGames] = useState([]);\r\n\tconst [filterID, setFilterID] = useState(\"me\");\r\n\tconst [selectedFriendIndex, setSelectedFriendIndex] = useState(-1);\r\n\tconst [friends, setFriends] = useState([]);\r\n\tconst [friendsCount, setFriendsCount] = useState(0);\r\n\tconst interactions = useSelector((state) => state.interactions); //.map((interact) => interact.with)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (friendsCount !== interactions.length) {\r\n\t\t\t//thsi if checks whether change made in interaction is friend/unfriend operation or not\r\n\t\t\t//otherwise, every new message sent or recieved cause a new .map calling!\r\n\r\n\t\t\t// const temp = interactions;\r\n\t\t\t// const sorted = temp.sort((f1, f2) => f2.name - f1.name);\r\n\t\t\tsetFriends(interactions.map((interact) => interact.with));\r\n\t\t\tsetFriendsCount(interactions.length);\r\n\t\t}\r\n\t}, [interactions, friendsCount]);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true); // use preloader here?\r\n\t\t\t\tlet serverResponse = await gameServices.getMyGames();\r\n\t\t\t\tif (serverResponse.status === Configs.Status.Successful)\r\n\t\t\t\t\tsetMyGames(serverResponse.data.myGames.reverse());\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetSelectedFriendIndex(\r\n\t\t\tfilterID !== \"me\"\r\n\t\t\t\t? friends.findIndex((friend) => friend.userID === filterID)\r\n\t\t\t\t: -1\r\n\t\t);\r\n\t\t// if filterID === \"me\" || frined id wia .findIndex not found ---> returns -1\r\n\t}, [filterID, friends]);\r\n\r\n\tconst unfriend = (friend) => {\r\n\t\t//... show a modal or sth to ask if user's sure\r\n\t\t// send proper http request to clear both from each others friend list\r\n\t};\r\n\treturn (\r\n\t\t<Card border=\"secondary\" bg=\"transparent\" className=\"big-single-card\">\r\n\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\tلیست دوستان و آمار بازی ها\r\n\t\t\t</Card.Header>\r\n\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t<Tab.Container\r\n\t\t\t\t\tdefaultActiveKey={filterID}\r\n\t\t\t\t\tonSelect={(key) => setFilterID(key)}>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\tlg={3}\r\n\t\t\t\t\t\t\tmd={4}\r\n\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\tclassName=\"friend-list-name-length tabs-list-friends-in-games-scrollable\">\r\n\t\t\t\t\t\t\t<Nav\r\n\t\t\t\t\t\t\t\tvariant=\"pills\"\r\n\t\t\t\t\t\t\t\tclassName=\"flex-column text-right\">\r\n\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"me\">\r\n\t\t\t\t\t\t\t\t\t\tهمه بازی ها\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t{friends.map((friend) => (\r\n\t\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link eventKey={friend.userID}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Row className=\"m-0 w-100\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col>{friend.name}</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col xs={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunfriend(friend)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"icon-unfriend fa fa-times pl-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tarea-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{/* EDIT MAIL LAYOUT <Col> LIKE THIS */}\r\n\t\t\t\t\t\t<Col lg={9} md={8} sm={12}>\r\n\t\t\t\t\t\t\t<Tab.Content>\r\n\t\t\t\t\t\t\t\t<Tab.Pane eventKey=\"me\">\r\n\t\t\t\t\t\t\t\t\t{me && (\r\n\t\t\t\t\t\t\t\t\t\t<FriendRecords\r\n\t\t\t\t\t\t\t\t\t\t\tperson={me}\r\n\t\t\t\t\t\t\t\t\t\t\tthisIsMe={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<AllScores scores={myGames} />\r\n\t\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t\t{friends.map((friend) => (\r\n\t\t\t\t\t\t\t\t\t<Tab.Pane eventKey={friend.userID}>\r\n\t\t\t\t\t\t\t\t\t\t<FriendRecords\r\n\t\t\t\t\t\t\t\t\t\t\tperson={\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedFriendIndex !== -1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? friends[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFriendIndex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: me\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tthisIsMe={\r\n\t\t\t\t\t\t\t\t\t\t\t\tme.userID ===\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedFriendIndex\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<AllScores\r\n\t\t\t\t\t\t\t\t\t\t\tscores={myGames.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(game) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.userID ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgame.players[0].id ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.userID ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgame.players[1].id\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Tab.Content>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Tab.Container>\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default MyGamesAndFriends;\r\n","import http from \"./httpService\";\r\nimport { Routes } from \"../configs\";\r\n\r\nconst {Server} = Routes;\r\nconst noticeServices = {\r\n    createNotice: (notice) => {\r\n        return http.post(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}`,\r\n            JSON.stringify(notice)\r\n        );\r\n    },\r\n    getAdvancedNotics: () => { //returns all notices with complete data esp. with ID\r\n        return http.get(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}`\r\n        );\r\n    },\r\n    getShortNotices: () => {\r\n        return http.get(`${Server.Root}/${Server.Notices}`);\r\n    },\r\n    editNotice: (noticeID, notice) => {\r\n        return http.put(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}/${noticeID}`,\r\n            JSON.stringify(notice)\r\n        );\r\n    }\r\n};\r\n\r\nexport default noticeServices;\r\n","import { Fragment, useState, useEffect } from \"react\";\r\nimport { Form, Card, Col, Row, Button, Alert } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport DatePicker from \"react-multi-date-picker\";\r\nimport persian from \"react-date-object/calendars/persian\";\r\nimport persian_fa from \"react-date-object/locales/persian_fa\";\r\nimport noticeServices from \"../../services/http/noticeServices\";\r\nimport { Status, browserStorage } from \"../../services/configs\";\r\nimport \"../profile.css\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport jwtdecode from \"jwt-decode\";\r\nimport { OK, Sorry } from \"../../tools/notification\";\r\nconst NoticeManager = () => {\r\n\t//u can create another component for listing notices ?\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst [isAllowed, setAllowed] = useState(undefined);\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [text, setText] = useState(\"\");\r\n\tconst [startDate, setStartDate] = useState(null);\r\n\tconst [endDate, setEndDate] = useState(null);\r\n\tconst [notices, setNotices] = useState([]);\r\n\tconst [selectedNoticeID, setSelectedNoticeID] = useState(null);\r\n\tconst [updateTrigger, setUpdateTrigger] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst resetStates = () => {\r\n\t\tsetTitle(\"\");\r\n\t\tsetText(\"\");\r\n\t\tsetStartDate(null);\r\n\t\tsetEndDate(null);\r\n\t\tsetSelectedNoticeID(null);\r\n\t\tsetUpdateTrigger(!updateTrigger); // updateTrigger: true <===> false -> chane -> useEffects calls\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t//use another simpler preloader\r\n\t\t//load all notices in left side for selecting: load all and push them in notices state\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tconst { status, data } =\r\n\t\t\t\t\tawait noticeServices.getAdvancedNotics();\r\n\t\t\t\tif (status === Status.Successful) {\r\n\t\t\t\t\t//return data.notices;\r\n\t\t\t\t\tif (data.notices.length) setNotices(data.notices.reverse());\r\n\t\t\t\t\t//if all is empty\r\n\t\t\t\t\tif (data.notices.length === 0) {\r\n\t\t\t\t\t\tsetNotices([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: \"پیام\",\r\n\t\t\t\t\t\t\t\ttext: \"اطلاعیه جدیدی وجود ندارد\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetNotices([\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"خطا\",\r\n\t\t\t\t\t\ttext: \"...مشکلی حین بارگذاری اطلاعیه ها پیش آمد. دوباره امتحان کنید\",\r\n\t\t\t\t\t},\r\n\t\t\t\t]);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [updateTrigger]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst token = browserStorage.TOKEN();\r\n        let isAdmin = undefined;\r\n\t\tif (token) {\r\n\t\t\tconst decoded_token = jwtdecode(browserStorage.TOKEN());\r\n\t\t\tisAdmin = decoded_token &&\r\n\t\t\t\tdecoded_token.user.admin &&\r\n\t\t\t\tdecoded_token.exp > Date.now() / 1000; //user is admin and token not expired\r\n\t\t\t// show proper message for simple users\r\n\t\t\tif (!me || isAdmin === false) {\r\n\t\t\t\t//in first render a wronge message will be shown! find a fix\r\n\t\t\t\t//2nd condition must be exactly the same\r\n\t\t\t\tSorry(\"متاسفانه شما مجوز دسترسی به این صفحه را ندارید.\");\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n        else isAdmin = false;\r\n\t\tsetAllowed(isAdmin);\r\n\t}, [me]);\r\n\t//***** in server implemented a middleware for this, is this needed? */\r\n\r\n\t//runs when create notice button clicks\r\n\tconst createNewNotice = async () => {\r\n\t\t//add patern and stuff to states and inputs\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst { status } = await noticeServices.createNotice({\r\n\t\t\t\ttitle,\r\n\t\t\t\ttext,\r\n\t\t\t\tstartDate: new Date(startDate),\r\n\t\t\t\tendDate: new Date(endDate),\r\n\t\t\t});\r\n\t\t\t//*********** */\r\n\t\t\t//COMPLETELY CHECK NOTICE IN CLIENT AND SERVER\r\n\t\t\tif (status === Status.CreatedSuccessfully) {\r\n\t\t\t\tOK(`اطلاعیه ی ${title} با موفقیت ساخته شد`);\r\n\t\t\t\tresetStates();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره اطلاعیه بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\tconst selecteNotice = (notice) => {\r\n\t\t// console.log(notice);\r\n\t\tsetSelectedNoticeID(notice._id);\r\n\t\tsetTitle(notice.title);\r\n\t\tsetText(notice.text);\r\n\t\tsetStartDate(new Date(notice.startDate));\r\n\t\tsetEndDate(new Date(notice.endDate));\r\n\t};\r\n\r\n\tconst cancelEditing = () => {\r\n\t\tresetStates();\r\n\t};\r\n\r\n\tconst saveChanges = async () => {\r\n\t\t//add patern and stuff to states and inputs\r\n\t\tif (!selectedNoticeID) return;\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { status } = await noticeServices.editNotice(\r\n\t\t\t\tselectedNoticeID,\r\n\t\t\t\t{ title, text, startDate, endDate }\r\n\t\t\t);\r\n\t\t\tif (status === Status.Successful) {\r\n\t\t\t\tOK(`اطلاعیه ی ${title} با مورفقیت ویرایش شد`);\r\n\t\t\t\tresetStates();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t};\r\n\t// if admin status is checked directly by server then start rendering the page\r\n\t//consists two part\" right part => used for creating and editing notices\r\n\t//left part lists all notices and allows admin to select one => after selecting the notice will be ready to be edited on right side\r\n\r\n\t//edit all heights in control panel\r\n\t//add patern and stuff to states and inputs\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{me && isAllowed && (\r\n\t\t\t\t<Row style={{ height: \"100%\" }}>\r\n\t\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t\t<Col lg={6} md={5} sm={12}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tborder=\"success\"\r\n\t\t\t\t\t\t\tbg=\"transparent\"\r\n\t\t\t\t\t\t\tclassName=\"mx-auto notice-manager-card\">\r\n\t\t\t\t\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\t\t\t\t\tاطلاعیه جدید\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Card.Body className=\"text-right\">\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-auto\">\r\n\t\t\t\t\t\t\t\t\tعنوان اطلاعیه\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tpattern=\".{3,30}\"\r\n\t\t\t\t\t\t\t\t\tonInput={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\t\"عنوان اطلاعیه باید حداقل 3 و حداکثر 30 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"عنوان\"\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-auto\">\r\n\t\t\t\t\t\t\t\t\tتوضیحات\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\t\tpattern=\".{5,200}\"\r\n\t\t\t\t\t\t\t\t\tonInput={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\t\"متن اطلاعیه باید حداقل 5 و حداکثر 200 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto h-25\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"متن کامل اطلاعیه را وارد کنید\"\r\n\t\t\t\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setText(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-2\">\r\n\t\t\t\t\t\t\t\t\tتاریخ شروع نمایش\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto w-100\"\r\n\t\t\t\t\t\t\t\t\tcalendar={persian}\r\n\t\t\t\t\t\t\t\t\tlocale={persian_fa}\r\n\t\t\t\t\t\t\t\t\tcalendarPosition=\"bottom-right\"\r\n\t\t\t\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\t\t\t\tonChange={setStartDate}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-2\">\r\n\t\t\t\t\t\t\t\t\tتاریخ پایان نمایش\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto\"\r\n\t\t\t\t\t\t\t\t\tcalendar={persian}\r\n\t\t\t\t\t\t\t\t\tlocale={persian_fa}\r\n\t\t\t\t\t\t\t\t\tcalendarPosition=\"bottom-right\"\r\n\t\t\t\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\t\t\t\tonChange={setEndDate}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t\t\t\t{!selectedNoticeID ? (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={createNewNotice}>\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\tایجاد اطلاعیه\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t<Col lg={6} md={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={saveChanges}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\tذخیره تغییرات\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t<Col lg={6} md={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-warning text-secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={cancelEditing}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\tلغو ویرایش\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Card.Footer>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={6} md={7} sm={12}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tborder=\"info\"\r\n\t\t\t\t\t\t\tbg=\"transparent\"\r\n\t\t\t\t\t\t\tclassName=\"mx-auto notice-manager-card\">\r\n\t\t\t\t\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\t\t\t\t\tاطلاعیه های قبلی\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Card.Body\r\n\t\t\t\t\t\t\t\tstyle={{ overflowY: \"scroll\" }}\r\n\t\t\t\t\t\t\t\tclassName=\"text-right\">\r\n\t\t\t\t\t\t\t\t{notices.map((notice) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t<Alert variant=\"secondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-info-circle px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"18px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{notice.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t: {notice.text}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"icon-edit-notice fa fa-pencil-square-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselecteNotice(notice)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default NoticeManager;\r\n","import { UpdateMyChatList } from \"./interactions\";\r\n\r\nexport const SendMessageTo = (name, friendID, text) => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tif (text && friendID && name) {\r\n\t\t\t\tawait dispatch({\r\n\t\t\t\t\ttype: \"SEND_MESSAGE\",\r\n\t\t\t\t\tpayload: { name, friendID, text },\r\n\t\t\t\t});\r\n\t\t\t\tawait dispatch(UpdateMyChatList(name, friendID, text, {sent: true}));\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"msg not sent: data missing...\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const RecieveMessageFrom = (name, friendID, text) => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tif (text && friendID && name) {\r\n\t\t\t\tawait dispatch({\r\n                    type: \"RECIEVE_MESSAGE\",\r\n                    payload: { name, friendID, text },\r\n                });\r\n\t\t\t\tawait dispatch(UpdateMyChatList(name, friendID, text, {recieved: true}));\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"msg not recieved: data missing...\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n};","import { Fragment, useState, useEffect } from \"react\";\r\nimport { Alert, Col, Row } from \"react-bootstrap\";\r\nimport \"./chat.css\";\r\nimport { toHijri } from \"../tools/format\";\r\nconst Message = ({ msg, previousDay }) => {\r\n\tconst { date } = msg; // destructure date from msg then make a new date object\r\n\t// reason for making new Date objects is that react throws error some time when you use it without new Date :|\r\n\tconst [showDate, setShowDate] = useState(false); //for each day, the first message in that day has persian date above it\r\n\tconst [time, setTime] = useState(null);\r\n\tconst [hijriDate, setHijriDate] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst [hDate, hTime] = toHijri(date);\r\n\t\tsetTime(hTime);\r\n\t\tsetHijriDate(hDate);\r\n\t\tsetShowDate(\r\n\t\t\tnew Date(date).getDate() !== previousDay || previousDay === 0\r\n\t\t); //     0 means this is the first message in the chat\r\n\t}, [date, previousDay]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{!showDate ? null : (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<p className=\"message-date\">{hijriDate}</p>\r\n\t\t\t\t</Fragment>\r\n\t\t\t)}\r\n\t\t\t<Row>\r\n\t\t\t\t<Col md={6} sm={msg.me ? 8 : 4} xs={msg.me ? 9 : 3}>\r\n\t\t\t\t\t{msg.me && (\r\n\t\t\t\t\t\t<Alert className=\"text-right\" variant=\"dark\">\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col lg={9} xs={12}>\r\n\t\t\t\t\t\t\t\t\t{msg.me}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"message-time\" lg={3} xs={12}>\r\n\t\t\t\t\t\t\t\t\t{time}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col md={6} sm={msg.friend ? 8 : 4} xs={msg.friend ? 9 : 3}>\r\n\t\t\t\t\t{msg.friend && (\r\n\t\t\t\t\t\t<Alert className=\"text-right\" variant=\"primary\">\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col lg={9} xs={12}>\r\n\t\t\t\t\t\t\t\t\t{msg.friend}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"message-time\" lg={3} xs={12}>\r\n\t\t\t\t\t\t\t\t\t{time}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Message;\r\n","import { Button, Card, Container, Form, Row, Tab, Col } from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport \"./chat.css\";\r\nimport { SendMessageTo } from \"../globals/redux/actions/message\";\r\nimport Message from \"./Message\";\r\n\r\nconst ChatBox = ({ friend, chat }) => {\r\n\tconst [myMessage, setMyMessage] = useState(\"\");\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst dispatch = useDispatch();\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst mostRecentMessageRef = useRef(null);\r\n\r\n\tconst composeMessage = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\t// init state vears ro get chat\r\n\t\tif (myMessage) {\r\n\t\t\tdispatch(SendMessageTo(me.fullname, friend.userID, myMessage));\r\n\t\t\tsetMyMessage(\"\");\r\n\t\t}\r\n\t};\r\n\r\n\t//how to scroll to last recent message in the start?\r\n\t// useEffect(() => {\r\n\t// \tsetTimeout(() => {\r\n\t// \t\tif (mostRecentMessageRef && mostRecentMessageRef.current)\r\n\t// \t\t\tmostRecentMessageRef.current.scrollIntoView({\r\n\t// \t\t\t\tbehavior: \"smooth\",\r\n\t// \t\t\t\ttop: mostRecentMessageRef.current.offsetTop,\r\n\t// \t\t\t});\r\n\t// \t}, 1000);\r\n\t// }, [])\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (mostRecentMessageRef && mostRecentMessageRef.current)\r\n\t\t\t\tmostRecentMessageRef.current.scrollIntoView({\r\n\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t\ttop: mostRecentMessageRef.current.offsetTop,\r\n\t\t\t\t});\r\n\t\t}, 100);\r\n\t}, [message]);\r\n\r\n\treturn (\r\n\t\t<Tab.Pane eventKey={friend.userID}>\r\n\t\t\t<Container>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Card\r\n\t\t\t\t\t\tborder=\"dark\"\r\n\t\t\t\t\t\tbg=\"transparent\"\r\n\t\t\t\t\t\tclassName=\"big-single-card chat-box-scrollable\">\r\n\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t{chat &&\r\n\t\t\t\t\t\t\t\tchat instanceof Array &&\r\n\t\t\t\t\t\t\t\tchat.map((msg, index) => (\r\n\t\t\t\t\t\t\t\t\t<div ref={mostRecentMessageRef}>\r\n\t\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\t\t// key={msg.key}\r\n\t\t\t\t\t\t\t\t\t\t\tmsg={msg}\r\n\t\t\t\t\t\t\t\t\t\t\tpreviousDay={\r\n\t\t\t\t\t\t\t\t\t\t\t\tindex !== 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? new Date(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat[index - 1].date\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ).getDate()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tonSubmit={(event) => composeMessage(event)}\r\n\t\t\t\t\t\tclassName=\"w-100 mt-3\">\r\n\t\t\t\t\t\t<Row className=\"w-100 p-0 m-0\">\r\n\t\t\t\t\t\t\t<Col xs={1} className=\"m-0 p-0 text-center\">\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-100 mx-auto\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outline-info\">\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-paper-plane\"\r\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col xs={11} className=\"m-0 p-0 w-100\">\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tclassName=\"p-0 w-100 bg-transparent chat-room-message-box\r\n                                    mx-auto text-right\"\r\n\t\t\t\t\t\t\t\t\tvalue={myMessage}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetMyMessage(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"پیام...\"></Form.Control>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Row>\r\n\t\t\t</Container>\r\n\t\t</Tab.Pane>\r\n\t);\r\n};\r\n\r\nexport default ChatBox;\r\n","import { Card, Row, Col, Nav, Tab } from \"react-bootstrap\";\r\nimport { useContext } from \"react\";\r\nimport { Devices } from \"../services/configs\";\r\nimport ChatBox from \"./ChatBox\";\r\nimport \"./chat.css\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst ChatRoom = () => {\r\n\tconst context = useContext(GlobalContext);\r\n\tconst interactions = useSelector((state) => state.interactions).sort(\r\n\t\t//first sort all by last recieved message => this makes chat list contacts sorted properly\r\n\t\t(i1, i2) =>\r\n\t\t\tnew Date(i2.messages[i2.messages.length - 1].date).getTime() -\r\n\t\t\tnew Date(i1.messages[i1.messages.length - 1].date).getTime()\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Card border=\"secondary\" bg=\"transparent\" className=\"chat-main-card\">\r\n\t\t\t<Card.Header className=\"text-center\">چت روم شما</Card.Header>\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<Tab.Container>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tcontext.device !== Devices.SmartPhone\r\n\t\t\t\t\t\t\t\t\t? \"chat-room-devider chat-scrollable-friends\"\r\n\t\t\t\t\t\t\t\t\t: \"smartphone-chat-scrollable-friends\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlg={3}\r\n\t\t\t\t\t\t\tmd={3}\r\n\t\t\t\t\t\t\tsm={12}>\r\n\t\t\t\t\t\t\t<Nav\r\n\t\t\t\t\t\t\t\tvariant=\"pills\"\r\n\t\t\t\t\t\t\t\tclassName=\"flex-column text-right\">\r\n\t\t\t\t\t\t\t\t{interactions.map((interact) => (\r\n\t\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\t\t\t\t// key={friend.userID}\r\n\t\t\t\t\t\t\t\t\t\t\teventKey={interact.with.userID}>\r\n\t\t\t\t\t\t\t\t\t\t\t{interact.with.name}\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{/* EDIT MAIL LAYOUT <Col> LIKE THIS */}\r\n\t\t\t\t\t\t<Col lg={9} md={9} sm={12}>\r\n\t\t\t\t\t\t\t<Tab.Content>\r\n\t\t\t\t\t\t\t\t{interactions.map((interact) => (\r\n\t\t\t\t\t\t\t\t\t<ChatBox\r\n\t\t\t\t\t\t\t\t\t\tfriend={interact.with}\r\n\t\t\t\t\t\t\t\t\t\tchat={interact.messages}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Tab.Content>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Tab.Container>\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default ChatRoom;\r\n","import { Form, Card, Row, Col, Button } from \"react-bootstrap\";\r\nimport Configs from \"../../services/configs\";\r\nimport userServices from \"../../services/http/userServices\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { OK, Sorry } from \"../../tools/notification\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\n\r\nimport \"../profile.css\";\r\n\r\nconst Credentials = () => {\r\n\tconst [fullname, setFullname] = useState(\"\");\r\n\tconst [studentID, setStudentID] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [loading, setLoading] = useState(\"\");\r\n\r\n\tconst [pageUpdateTrigger, triggerPageUpdate] = useState(false); // true <=> false -> triggers page , ==> see useEffect\r\n\r\n\tconst reloadPage = () => {\r\n\t\tsetLoading(false);\r\n\t\ttriggerPageUpdate(!pageUpdateTrigger);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tconst { status, data } = await userServices.getMyCredentials();\r\n\t\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\t\tconst { me } = data;\r\n\t\t\t\t\tsetFullname(me.fullname);\r\n\t\t\t\t\tsetStudentID(me.studentID);\r\n\t\t\t\t\tsetEmail(me.email);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\"حین دریافت اطلاعات کاربر ایرادی پیش آمد. ... لطفا دوباره تلاش کنید.\"\r\n\t\t\t\t\t);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [pageUpdateTrigger]);\r\n\r\n\tconst saveChanges = async (event) => {\r\n\t\t//add patern and stuff to states and inputs\r\n\t\t// check all inputs plz\r\n        event.preventDefault();\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { status } = await userServices.editMyCredentials({\r\n\t\t\t\tstudentID,\r\n\t\t\t\tfullname,\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t});\r\n\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\tOK(`تغییرات با موفقیت اعمال شد`);\r\n\t\t\t\t// dispatch(TriggerRecordUpdate());\r\n\t\t\t\t// find another way to update\r\n\r\n\t\t\t\treloadPage();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetPassword(\"\");\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form onSubmit={(e) => saveChanges(e)}>\r\n\t\t\t<LoadingBar loading={loading} />\r\n\r\n\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t<Form.Label className=\"w-25 text-center\">\r\n\t\t\t\t\tشماره دانشجویی\r\n\t\t\t\t</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t\tclassName=\"account-info-textbox w-75\"\r\n\t\t\t\t\tplaceholder=\"Student ID\"\r\n\t\t\t\t\tvalue={studentID}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t<Form.Label className=\"w-25 text-center\">نام کاربر</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"account-info-textbox w-75\"\r\n\t\t\t\t\tpattern=\"[آ-ی ]{6,}\" // persian characters and space\r\n\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\"نام خانوادگی باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplaceholder=\"Full Name\"\r\n\t\t\t\t\tvalue={fullname}\r\n\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\tonChange={(e) => setFullname(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\r\n\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t<Form.Label className=\"w-25 text-center\">ایمیل</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tpattern=\".{6,}\"\r\n\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\"ورودی باید فرمت معتبر ایمیل را رعایت کرده و حداقل 6 کاراکتر باشد\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclassName=\"account-info-textbox w-75\"\r\n\t\t\t\t\tplaceholder=\"E-mail\"\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<Card.Footer className=\"p-1 m-0\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col lg={2} md={2} sm={4} xs={4}>\r\n\t\t\t\t\t\t<Form.Label className=\"text-center w-100 mt-2\">\r\n\t\t\t\t\t\t\tرمزعبور فعلی\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={7} md={7} sm={8} xs={8}>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tclassName=\"account-info-textbox\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n                            required\r\n\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\"جهت اعمال هر گونه تغییر در حساب کاربری تان باید رمز عبور خود را وارد نمایید\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={3} md={3} sm={12} xs={12}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tclassName=\"mt-2 w-100\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\tثبت تغییرات\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card.Footer>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default Credentials;\r\n","import { Form, Card, Row, Col, Button } from \"react-bootstrap\";\r\nimport { useState, useContext } from \"react\";\r\nimport { OK, Sorry } from \"../../tools/notification\";\r\nimport GlobalContext from \"../../globals/state/GlobalContext\";\r\nimport userServices from \"../../services/http/userServices\";\r\nimport Configs from \"../../services/configs\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\n\r\nimport \"../profile.css\";\r\n\r\nconst PasswordChange = () => {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\r\n    const [newPassword, setNewPassword] = useState(\"\");\r\n\tconst [confirmNewPassword, setConfirmNewPassword] = useState(\"\");\r\n\tconst context = useContext(GlobalContext);\r\n\tconst [loading, setLoading] = useState(\"\");\r\n\r\n\tconst checkConfirmPassword = (event) => {\r\n\t\tsetConfirmNewPassword(event.target.value);\r\n\t\tif (newPassword !== event.target.value) {\r\n\t\t\tevent.target.setCustomValidity(\r\n\t\t\t\t\"تایید رمز عبور جدید باید با خود رمز عبور جدید مطابقت کامل داشته باشد\"\r\n\t\t\t);\r\n\t\t\t//console.log(password, confirmPassword);\r\n\t\t} else event.target.setCustomValidity(\"\");\r\n\t};\r\n\r\n\r\n\tconst changeMyPassword = async (event) => {\r\n\t\tevent.preventDefault();\r\n        setLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { status } = await userServices.changeMyPassword({\r\n\t\t\t\tpassword,\r\n\t\t\t\tnewPassword,\r\n\t\t\t});\r\n\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\tOK(\"رمز شما با موفقیت تغییر داده شد\");\r\n\t\t\t\tcontext.signOut();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetPassword(\"\");\r\n\t\tsetLoading(false);\r\n\t};\r\n\treturn (\r\n\t\t<Form onSubmit={e => changeMyPassword(e)}>\r\n            <LoadingBar loading={loading} />\r\n\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t<Form.Label className=\"w-25 text-center\">\r\n\t\t\t\t\tرمز عبور جدید\r\n\t\t\t\t</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tpattern=\".{6,15}\"\r\n\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\"رمز عبور باید حداقل 6 کاراکتر و حداکثر 15 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclassName=\"account-info-textbox w-75\"\r\n\t\t\t\t\tplaceholder=\"New Password\"\r\n\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\tonChange={(e) => setNewPassword(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t<Form.Label className=\"w-25 text-center\">\r\n\t\t\t\t\tتایید رمز عبور جدید\r\n\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tclassName=\"account-info-textbox w-75\"\r\n\t\t\t\t\tplaceholder=\"Confirm New Password\"\r\n\t\t\t\t\tvalue={confirmNewPassword}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tonChange={(event) => checkConfirmPassword(event)}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<Card.Footer className=\"p-1 m-0\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col lg={2} md={2} sm={4} xs={4}>\r\n\t\t\t\t\t\t<Form.Label className=\"text-center w-100 mt-2\">\r\n\t\t\t\t\t\t\tرمزعبور فعلی\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={7} md={7} sm={8} xs={8}>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tclassName=\"account-info-textbox\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\"جهت اعمال هر گونه تغییر در حساب کاربری تان باید رمز عبور خود را وارد نمایید\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={3} md={3} sm={12} xs={12}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tclassName=\"mt-2 w-100\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-key px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\tتغییر رمز عبور\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card.Footer>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default PasswordChange;\r\n","import { Col, Form, Image, Row } from \"react-bootstrap\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Notify } from \"./../../tools/notification\";\r\nimport './avatar.css';\r\nconst ImagePicker = ({ selector }) => {\r\n\tconst [preview, setPreview] = useState(null);\r\n\tconst me = useSelector((state) => state.me);\r\n\r\n\tconst { avatar } = me ? me : { avatar: null };\r\n\tuseEffect(() => {\r\n\t\tsetPreview(avatar);\r\n\t}, [avatar]);\r\n\tconst updatePreview = (imageFile) => {\r\n\t\ttry {\r\n\t\t\tselector(imageFile);\r\n\t\t\tconst oFReader = new FileReader();\r\n\t\t\toFReader.readAsDataURL(imageFile);\r\n\r\n\t\t\toFReader.onload = (oFREvent) => {\r\n\t\t\t\tsetPreview(oFREvent.target.result);\r\n\t\t\t};\r\n\t\t} catch (err) {\r\n\t\t\tNotify(\"پیش نمایش فایل انتخابی با مشکل رو به رو شد.\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form.Group>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col className=\"text-center\" sm={4} xs={4} md={3} lg={2}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tclassName=\"friends-section-avatar\"\r\n\t\t\t\t\t\tsrc={preview}\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col\r\n\t\t\t\t\tclassName=\"dropbox-rectangle\">\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\tclassName=\"btn-outline-primary file-picker-control\"\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tid=\"filepicker\"\r\n\t\t\t\t\t\tonChange={(e) => updatePreview(e.target.files[0])}\r\n\t\t\t\t\t\taccept=\".jpg,.jpeg,.png\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\"ابتدا عکس مورد نظر را از اینجا انتخاب کنید\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Form.Label\r\n\t\t\t\t\thtmlFor=\"filepicker\"\r\n\t\t\t\t\tclassName=\"btn-outline-primary file-picker-label\">\r\n\t\t\t\t\tبا کلیک روی اینجا عکس خود را انتخاب کنید و یا فایل آن را\r\n\t\t\t\t\tبکشید و در وسط کادر سبز رنگ رها کنید ...\r\n\t\t\t\t</Form.Label>\r\n\t\t\t</Row>\r\n\t\t</Form.Group>\r\n\t);\r\n};\r\n\r\nexport default ImagePicker;\r\n","import { useState } from \"react\";\r\nimport { Button, Card, Col, Form, Row } from \"react-bootstrap\";\r\nimport { OK } from \"../../tools/notification\";\r\nimport userServices from \"./../../services/http/userServices\";\r\nimport { Sorry } from \"./../../tools/notification\";\r\nimport Configs from \"../../services/configs\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport ImagePicker from \"./ImagePicker\";\r\n\r\nconst AvatarChange = () => {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [myAvatar, selectMyAvatar] = useState(null);\r\n\tconst [loading, setLoading] = useState(\"\");\r\n\r\n\tconst upload = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { status } = await userServices.uploadAvatar(myAvatar);\r\n\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\tOK(\"آواتار شما با موفقیت تغییر داده شد\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t\tsetPassword(\"\");\r\n\t};\r\n\treturn (\r\n\t\t<Form onSubmit={(e) => upload(e)}>\r\n\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t<ImagePicker selector={selectMyAvatar} />\r\n\t\t\t<Card.Footer className=\"p-1 m-0\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col lg={2} md={2} sm={4} xs={4}>\r\n\t\t\t\t\t\t<Form.Label className=\"text-center w-100 mt-2\">\r\n\t\t\t\t\t\t\tرمزعبور فعلی\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={7} md={7} sm={8} xs={8}>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tclassName=\"account-info-textbox\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\"جهت اعمال هر گونه تغییر در حساب کاربری تان باید رمز عبور خود را وارد نمایید\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col lg={3} md={3} sm={12} xs={12}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tclassName=\"mt-2 w-100\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-upload px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\tتغییر آواتار\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card.Footer>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default AvatarChange;\r\n","import { Card, Tab, Tabs } from \"react-bootstrap\";\r\nimport Credentials from \"./Credentials\";\r\nimport PasswordChange from \"./PasswordChange\";\r\nimport AvatarChange from \"./AvatarChange\";\r\n\r\nconst AcountManager = () => {\r\n\t//states\r\n\r\n\tconst TABS = { CREDENTIALS: 0, AVATAR: 1, PASSWORD: 2 };\r\n\r\n\treturn (\r\n\t\t<Card border=\"secondary\" bg=\"transparent\" className=\"game-deck-card\">\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<Tabs\r\n\t\t\t\t\tdefaultActiveKey={TABS.CREDENTIALS}\r\n\t\t\t\t\tvariant=\"pills\"\r\n\t\t\t\t\t// transition={Fade}\r\n\t\t\t\t\tclassName=\"mb-3\">\r\n\t\t\t\t\t<Tab eventKey={TABS.CREDENTIALS} title=\"ویرایش مشخصات\">\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<Credentials />\r\n\t\t\t\t\t</Tab>\r\n\t\t\t\t\t<Tab eventKey={TABS.AVATAR} title=\"آواتار\">\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<AvatarChange />\r\n\t\t\t\t\t</Tab>\r\n\t\t\t\t\t<Tab eventKey={TABS.PASSWORD} title=\"تغییر رمزعبور\">\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<PasswordChange />\r\n\t\t\t\t\t</Tab>\r\n\t\t\t\t</Tabs>\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default AcountManager;\r\n","import { Component } from \"react\";\r\nimport \"./sidebars.css\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { Card, Form, Button, Col, Row } from \"react-bootstrap\";\r\nimport { Sorry } from \"../tools/notification\";\r\n\r\nclass SignInSideBar extends Component {\r\n\t// *********************Objectives***********************\r\n\t// 1. handle errors particularly\r\n\tstate = {\r\n\t\tstudentID: \"\",\r\n\t\tpassword: \"\",\r\n\t\tloading: false,\r\n\t};\r\n\r\n\tonSignInSubmitted = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst { studentID, password } = this.state;\r\n\t\tconst user = { studentID: Number(studentID), password };\r\n\t\ttry {\r\n\t\t\tconst { status, data } = await userServices.signIn(user);\r\n\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tbrowserStorage.save(data.token);\r\n\t\t\t\tthis.props.history.replace(\"/\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\t// check nonserver errors\r\n\t\t\tconsole.log(err);\r\n\t\t\tthis.setState({ password: \"\" });\r\n\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\".ورود با مشکل رو به رو شد. لطفا دوباره تلاش کتنید.\");\r\n\t\t}\r\n\t\tthis.setState({ loading: false });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { studentID, password, loading } = this.state;\r\n\t\treturn (\r\n\t\t\t<Card border=\"primary\" className=\"sign-in-sidebar\">\r\n\t\t\t\t<Card.Header\r\n\t\t\t\t\tborder=\"primary\"\r\n\t\t\t\t\tclassName=\"text-center text-primary\">\r\n\t\t\t\t\tورود کاربران\r\n\t\t\t\t</Card.Header>\r\n\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t<Card.Body className=\"text-primary\">\r\n\t\t\t\t\t<Form onSubmit={(event) => this.onSignInSubmitted(event)}>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tautoComplete=\"username\"\r\n\t\t\t\t\t\t\tclassName=\"sign-in-sidebar-textBox\"\r\n\t\t\t\t\t\t\tplaceholder=\"شماره دانشجویی\"\r\n\t\t\t\t\t\t\tvalue={studentID}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tthis.setState({ studentID: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\tclassName=\"sign-in-sidebar-textBox\"\r\n\t\t\t\t\t\t\tplaceholder=\"رمز عبور\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tthis.setState({ password: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Card.Footer className=\"bg-transparent border-primary\">\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col lg={6}>\r\n\t\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sign-in-sidebar-buttons\">\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-sign-in px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col lg={6}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sign-in-sidebar-buttons\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"warning\">\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-recycle px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Card.Footer>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Card.Body>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(SignInSideBar);\r\n","import \"./sidebars.css\";\r\nimport { Fragment, useEffect, useState } from \"react\";\r\nimport noticeServices from \"../services/http/noticeServices\";\r\nimport Configs from \"../services/configs\";\r\nimport { Alert, Card } from \"react-bootstrap\";\r\nimport { v1 as uuidv1 } from \"uuid\";\r\nconst NoticeSideBar = () => {\r\n    const [notices, setNotices] = useState([]);\r\n\r\n    // oncomponentMount or update\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { status, data } = await noticeServices.getShortNotices();\r\n                if (status === Configs.Status.Successful) {\r\n                    //return data.notices;\r\n                    \r\n                    if (data.notices.length) setNotices(data.notices.reverse());\r\n                    //if all is empty\r\n                    if(data.notices.length === 0) {\r\n                        setNotices([{\r\n                            title: \"پیام\",\r\n                            text: \"اطلاعیه جدیدی وجود ندارد\",\r\n                        }]);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                setNotices([\r\n                    {\r\n                        title: \"خطا\",\r\n                        text: \"...مشکلی حین بارگذاری اطلاعیه ها پیش آمد. دوباره امتحان کنید\",\r\n                    },\r\n                ]);\r\n            }\r\n        })();\r\n        \r\n    }, []);\r\n\r\n    return (\r\n        <Card className=\"notice-sidebar\" border=\"success\">\r\n            <Card.Header className=\"text-center text-success\">\r\n                اطلاعیه ها\r\n            </Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                {Boolean(notices.length) && notices.map((notice) => {\r\n                    return (\r\n                        <Fragment key={uuidv1()}>\r\n                            <Alert variant=\"info\">\r\n                                <i\r\n                                    className=\"fa fa-rss px-3\"\r\n                                    aria-hidden=\"true\"></i>\r\n                                <span\r\n                                    style={{ color: \"red\", fontSize: \"18px\" }}>\r\n                                    {notice.title}\r\n                                </span>\r\n                                : {notice.text}\r\n                            </Alert>\r\n                            <hr />\r\n                        </Fragment>\r\n                    );\r\n                })}\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default NoticeSideBar;\r\n","import { Badge, Card, Col, ListGroup, Row } from \"react-bootstrap\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst OnlineStatistics = () => {\r\n    const {players, games} = useSelector((state) => state.statistics);\r\n    return (\r\n        <ListGroup className=\"list-group list-group-flush\">\r\n            <ListGroup.Item className=\"bg-transparent\">\r\n                <Row>\r\n                    <Col>\r\n                        <Card.Text className=\"text-center\">\r\n                            <i\r\n                                className=\"fa fa-wifi px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            کاربران آنلاین\r\n                        </Card.Text>\r\n                    </Col>\r\n                    <Col>\r\n                        <Badge className=\"player-badge-font-size\" variant=\"success\" pill>\r\n                            {players}\r\n                        </Badge>\r\n                    </Col>\r\n                </Row>\r\n            </ListGroup.Item>\r\n            <ListGroup.Item className=\"bg-transparent\">\r\n                <Row>\r\n                    <Col>\r\n                        <Card.Text className=\"text-center\">\r\n                            <i\r\n                                className=\"fa fa-gamepad px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            بازی های فعال\r\n                        </Card.Text>\r\n                    </Col>\r\n                    <Col>\r\n                        <Badge className=\"player-badge-font-size\" variant=\"success\" pill>\r\n                            {games}\r\n                        </Badge>\r\n\r\n                    </Col>\r\n                </Row>\r\n            </ListGroup.Item>\r\n        </ListGroup>\r\n    );\r\n};\r\n\r\nexport default OnlineStatistics;\r\n","import { Alert, Button, Form, Row, Col } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SendMessageTo } from \"../globals/redux/actions/message\";\r\nconst GameChatBox = ({ friendID }) => {\r\n\tconst [myMessage, setMyMessage] = useState(\"\");\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst dispatch = useDispatch();\r\n\tconst me = useSelector((state) => state.me);\r\n\r\n\tconst composeMessage = (event) => {\r\n\t\tif (myMessage) {\r\n\t\t\t//if message is not empty\r\n\t\t\tevent.preventDefault();\r\n\t\t\tdispatch(SendMessageTo(me.fullname, friendID, myMessage));\r\n\t\t\tsetMyMessage(\"\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form onSubmit={(event) => composeMessage(event)}>\r\n\t\t\t<Row className=\"w-100 mt-3 mx-auto\">\r\n\t\t\t\t<Alert className=\"w-100 text-right\" variant=\"info\">\r\n\t\t\t\t\t{message && message.recieved ? (\r\n\t\t\t\t\t\tmessage.recieved.text\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p className=\"p-1\"> </p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Alert>\r\n\t\t\t</Row>\r\n\t\t\t<Row className=\"w-100 p-0 m-0\">\r\n\t\t\t\t<Col lg={2} md={3} className=\"m-0 p-0 text-center\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"w-100 mx-auto\"\r\n\t\t\t\t\t\tvariant=\"outline-info\">\r\n\t\t\t\t\t\t<i className=\"fa fa-paper-plane\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col lg={10} md={9} className=\"m-0 p-0 w-100\">\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\tclassName=\"p-0 w-100 bg-transparent chat-room-message-box\r\n                                    mx-auto text-right\"\r\n\t\t\t\t\t\tvalue={myMessage}\r\n\t\t\t\t\t\tonChange={(e) => setMyMessage(e.target.value)}\r\n\t\t\t\t\t\tplaceholder=\"پیام...\"></Form.Control>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default GameChatBox;\r\n","import { Card, Col, Alert, ListGroup, Button, Image } from \"react-bootstrap\";\r\nimport OnlineStatistics from \"./OnlineStatistics\";\r\nimport { SendFriendRequestTo } from \"../globals/redux/actions/tools\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport userServices from \"./../services/http/userServices\";\r\nimport Configs from \"../services/configs\";\r\nimport GameChatBox from \"../chat/GameChatBox\";\r\nimport Record from \"../profile/friendgames/Record\";\r\n\r\nconst PlayerInfoSideBar = (props) => {\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst scoreboard = useSelector((state) => state.scoreboard);\r\n\tconst tools = useSelector((state) => state.tools);\r\n\tconst dispatch = useDispatch();\r\n\tconst [personIsFriend, setPersonIsFriend] = useState(false);\r\n\r\n\tconst { fullname, userID, records, avatar } = props.person\r\n\t\t? props.person\r\n\t\t: me;\r\n\tconst [piece, setPiece] = useState(null); //piece === mohreh\r\n\tconst thisIsMe = me && userID === me.userID;\r\n\tuseEffect(() => {\r\n\t\tsetPiece(!thisIsMe ? scoreboard.opp : scoreboard.me);\r\n\t}, [thisIsMe, scoreboard]);\r\n\r\n\tconst { recordReloadTrigger } = tools;\r\n\tuseEffect(() => {\r\n\t\tif (!thisIsMe) {\r\n\t\t\t(async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { status, data } = await userServices.isMyFriend(\r\n\t\t\t\t\t\tuserID\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\t\t\tsetPersonIsFriend(data.isFriend);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\t// handle error.\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t}, [userID, thisIsMe, recordReloadTrigger]);\r\n\r\n\tconst onFriendRequestClick = (event) => {\r\n\t\tevent.target.innerHTML = \"ارسال شد...\";\r\n\t\tevent.target.disabled = true;\r\n\t\tdispatch(SendFriendRequestTo(userID));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Card border=\"info\" className=\"player-info-sidebar\">\r\n\t\t\t<Card.Header className=\"text-center text-info form-inline\">\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Card.Text className=\"text-left\">{fullname}</Card.Text>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tclassName=\"player-avatar\"\r\n\t\t\t\t\t\tsrc={avatar}\r\n\t\t\t\t\t\troundedCircle\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Card.Header>\r\n\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<ListGroup className=\"list-group list-group-flush\">\r\n\t\t\t\t\t{piece && (\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<Alert variant={piece.index ? \"danger\" : \"primary\"}>\r\n\t\t\t\t\t\t\t\t<Alert.Heading className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t{piece.score} : {piece.shape}\r\n\t\t\t\t\t\t\t\t</Alert.Heading>\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Record small title=\"امتیاز بازیکن\">\r\n\t\t\t\t\t\t{records.points}\r\n\t\t\t\t\t</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد بردها\">\r\n\t\t\t\t\t\t{records.wins}\r\n\t\t\t\t\t</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد تساوی\">\r\n\t\t\t\t\t\t{records.draws}\r\n\t\t\t\t\t</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد باختها\">\r\n\t\t\t\t\t\t{records.loses}\r\n\t\t\t\t\t</Record>\r\n\t\t\t\t</ListGroup>\r\n\t\t\t</Card.Body>\r\n\t\t\t<Card.Footer>\r\n\t\t\t\t{thisIsMe ? (\r\n\t\t\t\t\t<OnlineStatistics />\r\n\t\t\t\t) : personIsFriend ? (\r\n\t\t\t\t\t<GameChatBox friendID={userID} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant={\"outline-info\"}\r\n\t\t\t\t\t\tblock\r\n\t\t\t\t\t\tonClick={(event) => onFriendRequestClick(event)}>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-handshake-o px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\tدرخواست دوستی\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</Card.Footer>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default PlayerInfoSideBar;\r\n","import SignInSideBar from \"../sidebars/SignInSideBar\";\r\nimport NoticeSideBar from \"../sidebars/NoticeSideBar\";\r\nimport { withRouter } from \"react-router\";\r\nimport PlayerInfoSideBar from \"../sidebars/PlayerInfoSideBar\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Fragment, useState, useEffect, useContext } from \"react\";\r\nimport { Col, Container, Row } from \"react-bootstrap\";\r\nimport { Devices, Routes } from \"../services/configs\";\r\nimport AutoSignIn from \"../users/AutoSignIn\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\n\r\nconst MainLayout = (props) => {\r\n\tconst context = useContext(GlobalContext);\r\n\tconst { pathname } = props.location;\r\n\t//redux\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst opponent = useSelector((state) => state.opponent);\r\n\r\n\tconst [leftSideBar, setLeftSideBar] = useState(null);\r\n\tconst [rightSideBar, setRightSideBar] = useState(null);\r\n\r\n\t//teste\r\n\t//determine sidebar\r\n\tconst {device} = context;\r\n\tuseEffect(() => {\r\n\t\tsetLeftSideBar(<NoticeSideBar />);\r\n\t\tconst setPrimaryRightSideBar = () => {\r\n\t\t\tif (device !== Devices.Tablet)\r\n\t\t\t\tsetRightSideBar(\r\n\t\t\t\t\tme ? <PlayerInfoSideBar /> : <SignInSideBar />\r\n\t\t\t\t);\r\n\t\t\telse setRightSideBar(null);\r\n\t\t};\r\n\t\tif (pathname === Routes.Client.SignUp) {\r\n\t\t\tsetRightSideBar(null);\r\n\t\t\tsetLeftSideBar(null);\r\n\t\t} else if (pathname === Routes.Client.GameDeck) {\r\n\t\t\t// EDIT THIS..\r\n\t\t\t// ON REFRESH -> rightSideBar is null!\r\n\t\t\t// SOMETIMES: ERROR: cannout read .fullname of undefined person\r\n\t\t\tsetPrimaryRightSideBar();\r\n\t\t\tif (opponent) {\r\n\t\t\t\tif (device !== Devices.SmartPhone) {\r\n\t\t\t\t\tsetLeftSideBar(<PlayerInfoSideBar person={opponent} />);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetLeftSideBar(null);\r\n\t\t\t\t\tsetRightSideBar(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetLeftSideBar(<NoticeSideBar />); //EDIT THIS\r\n\t\t\tsetPrimaryRightSideBar();\r\n\t\t}\r\n\t}, [me, opponent, pathname, device]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<AutoSignIn />\r\n\t\t\t{context.device !== Devices.SmartPhone ? (\r\n\t\t\t\t<Row className=\"w-100 mx-auto\">\r\n\t\t\t\t\t{rightSideBar && <Col md={3}>{rightSideBar}</Col>}\r\n\t\t\t\t\t<Col\r\n\t\t\t\t\t\tclassName=\"mx-auto\"\r\n\t\t\t\t\t\tmd={pathname !== Routes.Client.SignUp ? null : 7}>\r\n\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t{leftSideBar && (\r\n\t\t\t\t\t\t<Col md={context.device !== Devices.Tablet ? 3 : 4}>\r\n\t\t\t\t\t\t\t{leftSideBar}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Row>\r\n\t\t\t) : (\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t{/* what to do for control panelk sidebar in smartphone */}\r\n\t\t\t\t\t{me ? (\r\n\t\t\t\t\t\t<Row className=\"w-100 mx-auto\">{rightSideBar}</Row>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<Row className=\"w-100 mx-auto\">{leftSideBar}</Row>\r\n\t\t\t\t\t<Row className=\"w-100 mx-auto\">{props.children}</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default withRouter(MainLayout);\r\n","import {browserStorage, Routes} from '../configs';\r\n\r\nexport const createSocketRequest = (request, rname, msg) =>\r\n    JSON.stringify({\r\n        request,\r\n        rname,\r\n        token: browserStorage.TOKEN(),\r\n        msg,\r\n    });\r\n\r\nexport const connect = (roomName, gameType) => {\r\n    return new Promise((resolve, reject) => {\r\n        var server = new WebSocket(`${Routes.Server.WebSocketRoot}/${Routes.Server.wsGamePlayRoute}`);\r\n        server.onopen = () => {\r\n            server.send(createSocketRequest(\"join\", roomName, gameType)); //temp\r\n            resolve(server);\r\n        };\r\n\r\n        server.onerror = (error) => {\r\n            // console.log(`WebSocket error: ${error}`);\r\n            server.close();\r\n            reject(error);\r\n        };\r\n\r\n        server.onclose = () => {\r\n            \r\n            resolve(null);\r\n            // this part needs editing ? maybe not\r\n        };\r\n    });\r\n};\r\n","//ONLY for class components: purpose: using redux in class components\r\nimport { connect } from \"react-redux\";\r\nimport { UpdateScoreboard, CleanScoreboard } from \"./actions/game\";\r\nimport { LoadThisPlayer, ResetOpponent } from \"./actions/player\";\r\nimport { EnterRoom, ExitRoom } from \"./actions/game\";\r\n// useSelector for functional components\r\n// state==>props : redux\r\n\r\nfunction withReduxDashboard(component) {\r\n\tconst mapStateToProps = (state) => ({\r\n\t\tme: state.me,\r\n\t\topponent: state.opponent,\r\n\t\troom: state.room,\r\n\t\tscoreboard: state.scoreboard,\r\n\t\ttools: state.tools,\r\n\t});\r\n\r\n\tconst mapDispatchToProps = (dispatch) => ({\r\n\t\tLoadThisPlayer: (userID) => dispatch(LoadThisPlayer(userID)),\r\n\t\tResetOpponent: () => dispatch(ResetOpponent()),\r\n\t\tEnterRoom: (room) => dispatch(EnterRoom(room)),\r\n\t\tExitRoom: () => dispatch(ExitRoom()),\r\n\t\t// SetGameID: (gameID) => dispatch(SetGameID(gameID)),\r\n\t\tUpdateScoreboard: (details) => dispatch(UpdateScoreboard(details)),\r\n\t\tCleanScoreboard: () => dispatch(CleanScoreboard()),\r\n\t});\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(component);\r\n}\r\n\r\nexport default withReduxDashboard;\r\n","import { Card, Col, Row } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { GameSetting } from \"../../services/configs\";\r\n\r\nconst BriefScoreboard = ({ timeRemaining, players }) => {\r\n    const [timeStamp, setTimeStamp] = useState(null);\r\n    const aThird = GameSetting.T3D.TurnTimeOut / 3;\r\n    useEffect(() => {\r\n        let color = null,\r\n            icon = null;\r\n        if (timeRemaining) {\r\n            if (timeRemaining >= aThird) {\r\n                color = \"text-success\";\r\n                icon = (\r\n                    <i className=\"fa fa-hourglass-start px-2\" aria-hidden=\"true\"></i>\r\n                );\r\n            } else {\r\n                color = \"text-danger\";\r\n                icon = (\r\n                    <i className=\"fa fa-hourglass-half px-2\" aria-hidden=\"true\"></i>\r\n                );\r\n            }\r\n        } else {\r\n            color = \"text-dark\";\r\n            icon = <i className=\"fa fa-hourglass-end px-2\" aria-hidden=\"true\"></i>;\r\n        }\r\n        setTimeStamp(<div className={color}>{icon}{timeRemaining}</div>);\r\n    }, [timeRemaining, aThird]);\r\n\r\n    return (\r\n        <Card.Header className=\"w-100 text-center\">\r\n            <Row style={{ fontSize: \"20px\" }}>\r\n                <Col\r\n                    style={{\r\n                        textAlign: \"right\",\r\n                        color: players[1].color,\r\n                    }}>\r\n                    {players[1].shape} : {players[1].score}\r\n                </Col>\r\n                <Col>{timeStamp}</Col>\r\n                <Col\r\n                    style={{\r\n                        textAlign: \"left\",\r\n                        color: players[0].color,\r\n                    }}>\r\n                    {players[0].score} : {players[0].shape}\r\n                </Col>\r\n            </Row>\r\n        </Card.Header>\r\n    );\r\n};\r\n\r\nexport default BriefScoreboard;\r\n","import { Fragment, useEffect, useState } from \"react\";\r\nimport { Button, Card, Row } from \"react-bootstrap\";\r\nimport { GameSetting } from \"../../services/configs\";\r\nimport BriefScoreboard from \"./BriefScoreboard\";\r\nimport \"../games.css\";\r\n\r\nconst TableDesign = ({\r\n\ttimeRemaining,\r\n\tdimension,\r\n\tplayers,\r\n\ttable,\r\n\tonEachCellClick,\r\n\tnormalCell,\r\n}) => {\r\n\tlet dimens = [];\r\n\tconst [cell, setCell] = useState(null);\r\n\tfor (let i = 0; i < dimension; i++) dimens.push(i);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst cellWidths = [70, 65, 60, 55, 50, 45, 40, 35, 30, 25];\r\n\t\tconst cellHeights = [45, 40, 35, 30, 25, 20];\r\n\t\tconst deviceWidth = window.innerWidth,\r\n\t\t\tdeviceHeight = window.innerHeight;\r\n\t\t/* first decide cell height, margin nearly equals to height */\r\n\t\tlet width = cellWidths[9],\r\n\t\t\theight = cellHeights[5],\r\n\t\t\tmargin = cellHeights[5],\r\n            fontSize = 25;\r\n\t\tfor (const h of cellHeights) {\r\n\t\t\tif (h * dimension * dimension <= deviceHeight * 0.75) {\r\n\t\t\t\tmargin = height = h;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const w of cellWidths) {\r\n\t\t\tif ((w + margin) * (dimension + 1) <= deviceWidth) {\r\n\t\t\t\twidth = w;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        //find better scaling for font size?\r\n        if(height < 30 || width < 40)\r\n            fontSize = 15;\r\n        else if(height < 40 || width < 60)\r\n            fontSize = 20;\r\n        else\r\n            fontSize = 25;\r\n\t\tsetCell({ width, height, margin, fontSize });\r\n\t}, [dimension]);\r\n\r\n\t//prop drilling in BriefScoreBoard\r\n\treturn (\r\n\t\t<Card bg=\"transparent\" border=\"dark\" className=\"w-100 mx-auto\">\r\n\t\t\t<BriefScoreboard timeRemaining={timeRemaining} players={players} />\r\n\t\t\t<Card.Body className=\"game-border-card\">\r\n\t\t\t\t{table ? (\r\n\t\t\t\t\tdimens.map((floor) => (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t{dimens.map((row) => (\r\n\t\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdirection: \"ltr\",\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: `${cell.margin * row}px`,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{dimens.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tkey={\r\n\t\t\t\t\t\t\t\t\t\t\t\tfloor * dimension * dimension +\r\n\t\t\t\t\t\t\t\t\t\t\t\trow * dimension +\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolumn\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant={normalCell}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"game-table-cells\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: `${cell.width}px`,\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: `${cell.height}px`,\r\n                                                fontSize: `${cell.fontSize}px`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttable[floor][row][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t] !== null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? players[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttable[floor][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t][column]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ].color\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tid={\r\n\t\t\t\t\t\t\t\t\t\t\t\tfloor * dimension * dimension +\r\n\t\t\t\t\t\t\t\t\t\t\t\trow * dimension +\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolumn\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(event) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tonEachCellClick(event)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t{table[floor][row][column] !==\r\n\t\t\t\t\t\t\t\t\t\t\t\tnull &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayers[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttable[floor][row][column]\r\n\t\t\t\t\t\t\t\t\t\t\t\t].shape}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p className=\"text-center\"> در حال اتصال... </p>\r\n\t\t\t\t)}\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default TableDesign;\r\n","import { Component } from \"react\";\r\nimport \"../games.css\";\r\nimport {\r\n\tconnect,\r\n\tcreateSocketRequest,\r\n} from \"../../services/ws/gamePlaySocketServices\";\r\nimport withReduxDashboard from \"../../globals/redux/withReduxDashboard\";\r\nimport { withRouter } from \"react-router\";\r\nimport TableDesign from \"./TableDesign\";\r\nimport { GameSetting } from \"../../services/configs\";\r\nimport { Attention, Notify, Sorry } from \"../../tools/notification\";\r\nimport { toTimeShort } from \"../../tools/format\";\r\n\r\nclass GamePlay extends Component {\r\n\t//**** game resets on device change. fix it */\r\n\tstate = {\r\n\t\tnormalCell: \"outline-dark\",\r\n\t\tplayers: [\r\n\t\t\t{\r\n\t\t\t\t// ID: '',\r\n\t\t\t\tshape: <i className=\"fa fa-times\" aria-hidden=\"true\" />, // \"X\" : some device may not support font-awsome\r\n\t\t\t\tcolor: \"blue\",\r\n\t\t\t\tselected: \"warning\",\r\n\t\t\t\tlineColor: \"primary\",\r\n\t\t\t\tscore: 0,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// ID: '',\r\n\t\t\t\tshape: <i className=\"fa fa-sun-o\" aria-hidden=\"true\" />, // \"O\" : some device may not support font-awsome\r\n\t\t\t\tcolor: \"darkred\",\r\n\t\t\t\tselected: \"warning\",\r\n\t\t\t\tlineColor: \"danger\",\r\n\t\t\t\tscore: 0,\r\n\t\t\t},\r\n\t\t], // maybe use player actual user name and change this item to an object of objects?\r\n\t\tturn: 0, // start turn is decided by throwning dices\r\n\t\tdimension: 3,\r\n\t\ttable: null,\r\n\t\tmyTurn: undefined, // change this\r\n\t\tgameID: null,\r\n\t\tsocketGamePlay: undefined,\r\n\t\tplayerOnline: true,\r\n\t\ttimeRemaining: 0, //create a config\r\n\t\ttimerID: null,\r\n\t\tconnectionCheckTimerID: null,\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.cellButtons = [];\r\n\t}\r\n\r\n\tupdateGameScorebaord = () => {\r\n\t\tconst { myTurn, players } = this.state;\r\n\t\tconst oppTurn = Number(!myTurn);\r\n\r\n\t\tthis.props.UpdateScoreboard({\r\n\t\t\tme: {\r\n\t\t\t\tindex: myTurn,\r\n\t\t\t\tshape: players[myTurn].shape,\r\n\t\t\t\tscore: players[myTurn].score,\r\n\t\t\t},\r\n\t\t\topp: {\r\n\t\t\t\tindex: oppTurn,\r\n\t\t\t\tshape: players[oppTurn].shape,\r\n\t\t\t\tscore: players[oppTurn].score,\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tenableTimerForMyMove = (timeout = GameSetting.T3D.TurnTimeOut) => {\r\n\t\tthis.setState({ timeRemaining: timeout });\r\n\t\t//is it needed to declare timerID as state?\r\n\t\tclearInterval(this.state.timerID);\r\n\t\tconst timerID = setInterval(() => {\r\n\t\t\tconst { timeRemaining, timerID } = this.state;\r\n\t\t\tif (timeRemaining <= 0) {\r\n\t\t\t\tclearInterval(timerID);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({ timeRemaining: this.state.timeRemaining - 1 });\r\n\t\t}, 1000);\r\n\t\tthis.setState({ timerID });\r\n\t};\r\n\r\n\tupdatePlayerStates = ({ turn, xScore, oScore }) => {\r\n\t\tconst players = [...this.state.players];\r\n\t\tplayers[0].score = xScore;\r\n\t\tplayers[1].score = oScore;\r\n\t\tthis.setState({\r\n\t\t\tplayers,\r\n\t\t\tturn,\r\n\t\t});\r\n\t\tthis.updateGameScorebaord();\r\n\t};\r\n\r\n\tdisableAllTimers = () => {\r\n\t\tconst { connectionCheckTimerID, timerID } = this.state;\r\n\t\tclearTimeout(connectionCheckTimerID);\r\n\t\tclearTimeout(timerID); //move time out timer\r\n\t};\r\n\r\n\tsocketOnMessage = (response) => {\r\n\t\tconst { data } = response;\r\n\t\tconst { cmd, msg } = JSON.parse(data);\r\n\t\tif (cmd === \"START\") {\r\n\t\t\tconst startTime = toTimeShort(msg);\r\n\t\t\tAttention(`بازی راس ساعت ${startTime} آغاز شد.`);\r\n\t\t} else if (cmd === \"GAME\") {\r\n\t\t\tconst { IDs, dimension, myTurn } = msg;\r\n\t\t\tthis.setState({ dimension, myTurn });\r\n\t\t\tconst opponentID = IDs[Number(!myTurn)];\r\n\t\t\tconst { opponent, LoadThisPlayer } = this.props;\r\n\t\t\tif (!opponent && opponentID)\r\n\t\t\t\t//if opponent is not null -> means this was called before and there's no need to run again\r\n\t\t\t\tLoadThisPlayer(opponentID);\r\n\t\t} else if (cmd === \"LOAD\") {\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\t\t\tconst { table } = msg;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttable,\r\n\t\t\t});\r\n\t\t\tthis.updateGameScorebaord();\r\n\t\t} else if (cmd === \"TIMER\") {\r\n\t\t\t//you can calculate request respone time -> then minimize it from tiem sent by server -> to gain acurate time\r\n\t\t\t//but its real neccessary, Math.floor on the server side does this nearly\r\n\t\t\t//but for accurate approach remember: remove Math.floor from server side\r\n\t\t\tconsole.log(\"time updated: \", msg);\r\n\t\t\tthis.setState({ timeRemaining: msg });\r\n\t\t\tclearTimeout(this.state.timerID); //clear move time out timers, though their disabled before, this is for assurance\r\n\t\t\tthis.enableTimerForMyMove(msg);\r\n\t\t} else if (cmd === \"SCORES\") this.updatePlayerStates(msg);\r\n\t\telse if (cmd === \"UPDATE\") {\r\n\t\t\tconst { room } = this.props;\r\n\t\t\tconst { dimension } = this.state;\r\n\t\t\tconst cellID = Number(msg.nextMove);\r\n\r\n\t\t\t//*************** */\r\n\t\t\t//is this needed to check the move in client? considering that complete check has been made in client\r\n\t\t\t//and consder that: checking move in client may cause some bugs\r\n\t\t\t//for ex: new move is sent -> and 'cause of some error the cell is not empty\r\n\t\t\t//turn is not updated and this player can not make new moves to recieve server's table!!!\r\n\t\t\tthis.verifyAndApplyTheMove(\r\n\t\t\t\tthis.getCellCoordinates(cellID, dimension),\r\n\t\t\t\tthis.cellButtons[cellID]\r\n\t\t\t);\r\n\t\t\t//wrap it up this part of UPDATE and LOAD in a method\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\r\n\t\t\tthis.cellButtons[cellID].focus();\r\n\t\t\tthis.updateGameScorebaord();\r\n\r\n\t\t\t// now inform the server that the move is recieved\r\n\t\t\t//force connect it?\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\"move_recieved\", room.name, true)\r\n\t\t\t);\r\n\t\t\t// server time out is set and now setInterval for this client to show how much time left\r\n\t\t\tthis.enableTimerForMyMove();\r\n\t\t} else if (cmd === \"MOVE_MISSED\") {\r\n\t\t\tconst { myTurn } = this.state;\r\n\t\t\t//msg --> forced set turn\r\n\t\t\tthis.setState({ turn: msg });\r\n\t\t\tif (msg === myTurn) this.enableTimerForMyMove();\r\n\t\t} else if (cmd === \"NOT_AUTHORIZED\") {\r\n\t\t\tSorry(\"نشست شما منقضی شده، لطفا دوباره وارد حساب کاربری خود شوید\");\r\n\t\t\t// signOut();\r\n\t\t} else if (cmd === \"END\") {\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\t\t\tthis.endThisGame();\r\n\t\t\tthis.disableAllTimers();\r\n\t\t} else if (cmd === \"CLOSE\") {\r\n\t\t\tAttention(\r\n\t\t\t\t\"بدلیل حاضر نبودن هیچ کدام از بازیکینان، بازی شما کنسل شد\"\r\n\t\t\t);\r\n\t\t\tthis.closeThisGame();\r\n\t\t} else {\r\n\t\t\tconsole.log(\"wrong socket request\");\r\n\t\t}\r\n\t};\r\n\r\n\tforceConnectWS = async (nextJob) => {\r\n\t\tconst { room } = this.props;\r\n\r\n\t\ttry {\r\n\t\t\tlet socket = await connect(room.name, room.type);\r\n\t\t\tsocket.onmessage = this.socketOnMessage;\r\n\t\t\tthis.setState({ socketGamePlay: socket });\r\n\t\t\tif (nextJob) nextJob();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\t// **********************\r\n\t\t\t//time out must be set with rising time out time to prevent server getting fucked up\r\n\t\t\tsetTimeout(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconsole.log(\"rconnecting from GamePlay\");\r\n\t\t\t\t\tthis.forceConnectWS(nextJob);\r\n\t\t\t\t},\r\n\t\t\t\tnextJob ? 1000 : 3000\r\n\t\t\t);\r\n\t\t\t//if there is a next job --> then player is sending a move or something important and\r\n\t\t\t//time out needs to be called quicker 'cause players have timeout in serimport { LoadPlayer } from './../../globals/redux/actions/player';\r\n\t\t\t//time out needs to be called quicker 'cause players have timeout in server for sending moves\r\n\t\t}\r\n\t};\r\n\r\n\tenableConnectionCheckTimer = () => {\r\n\t\treturn setInterval(() => {\r\n\t\t\tif (window.navigator.onLine) {\r\n\t\t\t\tif (!this.state.playerOnline) {\r\n\t\t\t\t\t//player JUST became online\r\n\t\t\t\t\tthis.setState({ playerOnline: true }); // toggle online status\r\n\t\t\t\t\tthis.forceConnectWS(null); // reconnect to gamePlayWebSocket\r\n\t\t\t\t}\r\n\t\t\t} else if (this.state.playerOnline) {\r\n\t\t\t\t//player JUST became offline\r\n\t\t\t\tthis.setState({ playerOnline: false });\r\n\t\t\t}\r\n\t\t}, 2500); //2.5 sec is it ok?\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.cellButtons = document.getElementsByClassName(\"game-table-cells\"); // pay attension to searched className! may cause an error\r\n\r\n\t\tconst { room } = this.props;\r\n\t\tconst { myTurn } = this.state;\r\n\t\tthis.setState({ dimension: room.type });\r\n\r\n\t\tthis.forceConnectWS(() => {\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\"load\", room.name, null)\r\n\t\t\t);\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\"mytimer\", room.name, myTurn)\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tthis.setState({\r\n\t\t\tconnectionCheckTimerID: this.enableConnectionCheckTimer(),\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.disableAllTimers();\r\n\t}\r\n\tgetCellCoordinates = (cellID, dimen) => {\r\n\t\tconst cellFloor = Math.floor(cellID / (dimen * dimen));\r\n\t\tconst onFloorId = cellID % (dimen * dimen);\r\n\t\tconst cellRow = Math.floor(onFloorId / dimen);\r\n\t\tconst cellColumn = onFloorId % dimen;\r\n\t\t// just test a random id to see how above formula works!\r\n\t\treturn { floor: cellFloor, row: cellRow, column: cellColumn };\r\n\t};\r\n\tonEachCellClick = (event) => {\r\n\t\tconst { dimension, turn, timerID } = this.state;\r\n\t\tconst {opponent, room } = this.props;\r\n\t\tif (opponent) {\r\n\t\t\ttry {\r\n\t\t\t\tconst selectedCellButton = event.target;\r\n\r\n\t\t\t\t//this is just for when the connection is not automatically came back, so the user via clicking cells can initiate connection\r\n\t\t\t\tif (this.state.turn !== this.state.myTurn) {\r\n\t\t\t\t\t//is this needed really?\r\n\t\t\t\t\tthis.forceConnectWS(null);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst cell = this.getCellCoordinates(\r\n\t\t\t\t\tselectedCellButton.id,\r\n\t\t\t\t\tdimension\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (this.verifyAndApplyTheMove(cell, selectedCellButton)) {\r\n\t\t\t\t\t//send move to WebSocket Server\r\n\r\n\t\t\t\t\tthis.setState({ turn: (turn + 1) % 2 });\r\n\t\t\t\t\tthis.forceConnectWS(() => {\r\n\t\t\t\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\t\t\t\tcreateSocketRequest(\r\n\t\t\t\t\t\t\t\t\"move\",\r\n\t\t\t\t\t\t\t\troom.name,\r\n\t\t\t\t\t\t\t\tselectedCellButton.id\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tclearInterval(timerID);\r\n\t\t\t\t\tthis.setState({ timeRemaining: 0 });\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\t//load again here?\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tverifyAndApplyTheMove = (cell, cellButton) => {\r\n\t\tconst { players, turn, normalCell } = this.state;\r\n\t\tlet tempTable = [...this.state.table];\r\n\t\tif (tempTable[cell.floor][cell.row][cell.column] === null) {\r\n\t\t\ttempTable[cell.floor][cell.row][cell.column] = turn; //maybe its better to use players actual Id huh?\r\n\t\t\tthis.setState({ table: tempTable });\r\n\t\t\t// cellButton.value = players[turn].shape;\r\n\t\t\t// cellButton.style.color = players[turn].color;\r\n\t\t\tcellButton.className = `game-table-cells btn btn-${players[turn].selected}`;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tcellButton.className = `game-table-cells btn btn-${normalCell}`;\r\n\t\t\t}, 1000);\r\n\t\t\t// time to inspect the new cell:\r\n\t\t\tthis.inspectAreaAroundTheCell(cell.floor, cell.row, cell.column);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tinspectAreaAroundTheCell = (floor, row, column) => {\r\n\t\t// inpect the table in all ways around a selected cell (new selected one), to update points and color the score routes\r\n\t\t// is it needed to write a inspectAll method ?\r\n\t\tconst { players, table, dimension } = this.state;\r\n\t\tconst playerInTheCell = table[floor][row][column];\r\n\t\tlet rowCount = 0,\r\n\t\t\tcolumnCount = 0,\r\n\t\t\tfloorMainDiagCount = 0,\r\n\t\t\tfloorSideDiagCount = 0;\r\n\t\tlet tableMainDiagCount = 0,\r\n\t\t\ttableSideDiagCount = 0,\r\n\t\t\ttableAltitudeCount = 0;\r\n\t\tfor (let i = 0; i < dimension; i++) {\r\n\t\t\tif (table[floor][row][i] === playerInTheCell) rowCount++; // inspect in a row\r\n\t\t\tif (table[floor][i][column] === playerInTheCell) columnCount++; // inspect in a column\r\n\t\t\tif (table[i][row][column] === playerInTheCell) tableAltitudeCount++; // inspect in a altitude line\r\n\t\t\tif (row === column) {\r\n\t\t\t\tif (table[floor][i][i] === playerInTheCell)\r\n\t\t\t\t\tfloorMainDiagCount++; // inspect in a 2D main diagonal line through the cell's floor\r\n\t\t\t\tif (row === floor && table[i][i][i] === playerInTheCell)\r\n\t\t\t\t\ttableMainDiagCount++; // inspect in a 3D main diagonal line through the whole table\r\n\t\t\t}\r\n\t\t\tif (row + column + 1 === dimension) {\r\n\t\t\t\tif (table[floor][i][dimension - i - 1] === playerInTheCell)\r\n\t\t\t\t\tfloorSideDiagCount++; // inpect in a 2D side Diagonal line through the cell's floor\r\n\t\t\t\tif (\r\n\t\t\t\t\trow === floor &&\r\n\t\t\t\t\ttable[i][i][dimension - i - 1] === playerInTheCell\r\n\t\t\t\t)\r\n\t\t\t\t\ttableSideDiagCount++; // inspect in a 3D side diagonal line through the whole table\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// now inspect wether a line has been made and take action for it\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\trowCount,\r\n\t\t\tfloor * dimension * dimension + row * dimension,\r\n\t\t\t1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tcolumnCount,\r\n\t\t\tfloor * dimension * dimension + column,\r\n\t\t\tdimension,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tfloorMainDiagCount,\r\n\t\t\tfloor * dimension * dimension,\r\n\t\t\tdimension + 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tfloorSideDiagCount,\r\n\t\t\tfloor * dimension * dimension + (dimension - 1),\r\n\t\t\tdimension - 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableMainDiagCount,\r\n\t\t\t0,\r\n\t\t\tdimension * (dimension + 1) + 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableSideDiagCount,\r\n\t\t\tdimension - 1,\r\n\t\t\tdimension * (dimension + 1) - 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableAltitudeCount,\r\n\t\t\trow * dimension + column,\r\n\t\t\tdimension * dimension,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t};\r\n\r\n\t// method below: checks each possible line(according to the condition that user gives it),\r\n\t// if the line is made colorifies the line and returns 1 ( as one single score for each line checked ), otherwise returns 0\r\n\tconnectTheScoreLines = (count, firstCell, step, player, dimension) => {\r\n\t\tconst { normalCell } = this.state;\r\n\t\tif (count === dimension) {\r\n\t\t\tfor (let i = 0; i < dimension; i++) {\r\n\t\t\t\tthis.cellButtons[\r\n\t\t\t\t\tfirstCell + i * step\r\n\t\t\t\t].className = `game-table-cells btn btn-${player.lineColor}`;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.cellButtons[\r\n\t\t\t\t\t\tfirstCell + i * step\r\n\t\t\t\t\t].className = `game-table-cells btn btn-${normalCell}`;\r\n\t\t\t\t}, 1000 + i * 100);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcloseThisGame = () => {\r\n\t\tthis.state.socketGamePlay.close();\r\n\t\tthis.setState({ socketGamePlay: null });\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.props.CleanScoreboard();\r\n\t\t\tthis.props.ResetOpponent();\r\n\t\t\tthis.props.ExitRoom();\r\n\t\t\tthis.props.history.replace(\"/\"); // in competition mode must be send back to competition page\r\n\t\t}, 5000);\r\n\t};\r\n\r\n\tendThisGame = () => {\r\n\t\tconst { players, myTurn } = this.state;\r\n\t\tconst oppTurn = Number(!myTurn);\r\n\t\t//NOTE: u can deliver this message to socket global to make sure toast shows all the tie but its no need really :|\r\n\t\tif (players[myTurn].score > players[oppTurn].score)\r\n\t\t\tNotify(\"شما برنده شدید و سه امتیاز کسب کردید\");\r\n\t\telse if (players[myTurn].score === players[oppTurn].score)\r\n\t\t\tNotify(\"شما مساوی شدید و یک امتیاز کسب کردید\");\r\n\t\telse Notify(\"شما باختید\");\r\n\t\t//reset everything:\r\n\t\tthis.closeThisGame();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<TableDesign\r\n\t\t\t\tdimension={this.state.dimension}\r\n\t\t\t\tplayers={this.state.players}\r\n\t\t\t\ttable={this.state.table}\r\n\t\t\t\ttimeRemaining={this.state.timeRemaining}\r\n\t\t\t\tonEachCellClick={this.onEachCellClick}\r\n\t\t\t\tnormalCell={this.state.normalCell}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(withReduxDashboard(GamePlay));\r\n\r\n//another way to check online / offline status :\r\n// initiateGameTimer = () => {\r\n//     setInterval(() => {\r\n//         if (window.navigator.onLine) {\r\n//             if (this.connectionLost) {\r\n//                 console.log(\"connected\");\r\n//                 this.connectionLost = false;\r\n//                 this.forceConnectWS(null);\r\n//             }\r\n//         } else {\r\n//             console.log(\"dissconnected\");\r\n//             this.connectionLost = true;\r\n//         }\r\n//         /*this.isOnline(\r\n//             () => {\r\n//                 if (this.connectionLost) {\r\n//                     console.log(\"connected\");\r\n//                     this.connectionLost = false;\r\n//                     this.forceConnectWS(null);\r\n//                 }\r\n//             },\r\n//             () => {\r\n//                 console.log(\"dissconnected\");\r\n//                 this.connectionLost = true;\r\n//             }\r\n//         );*/\r\n//     }, 1000);\r\n// };\r\n\r\n// /*    isOnline = (success, failure) => {\r\n//     var xhr = XMLHttpRequest\r\n//         ? new XMLHttpRequest()\r\n//         : new window.ActiveXObject(\"Microsoft.XMLHttp\");\r\n//     xhr.onload = function () {\r\n//         if (success instanceof Function) {\r\n//             success();\r\n//         }\r\n//     };\r\n//     xhr.onerror = function () {\r\n//         if (failure instanceof Function) {\r\n//             failure();\r\n//         }\r\n//     };\r\n//      xhr.open(\"GET\", \"https://t3dweb.herokuapp.com/users\", true);//edit this ******************************\r\n//      xhr.send();\r\n// }; */\r\n","import { Fragment, useState, useEffect, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport { Attention, Notify } from \"../tools/notification\";\r\nimport {\r\n\tCloseRandomSearch,\r\n\tReapeatRandomSearch,\r\n} from \"../globals/redux/actions/tools\";\r\nimport { EnterRoom } from \"../globals/redux/actions/game\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nimport { Routes } from \"../services/configs\";\r\nconst SingleGame = () => {\r\n\tconst [gameType, setGameType] = useState(4);\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst [searching, setSearching] = useState(false);\r\n    const context = useContext(GlobalContext);\r\n\tconst dispatch = useDispatch();\r\n\tconst tools = useSelector((state) => state.tools);\r\n\r\n\tconst onStartGameClick = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (me) {\r\n\t\t\tdispatch(EnterRoom({ name: null, type: gameType }));\r\n\t\t\tdispatch(ReapeatRandomSearch());\r\n\t\t\tsetSearching(true);\r\n\t\t}\r\n\t\t// random game:\r\n\t\telse {\r\n\t\t\tAttention(\"ابتدا باید وارد حساب کاربری خود شوید\");\r\n            context.goTo(Routes.Client.SignUp);\r\n\t\t}\r\n\t};\r\n\tconst { randomSearchRepeats } = tools;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (searching && !randomSearchRepeats) {\r\n\t\t\t//means no one has been found after a specific amount of time\r\n\t\t\tNotify(\"حریفی پیدا نشد ... لحظاتی دیگر مجددا تلاش کنید\");\r\n\t\t\tsetSearching(false);\r\n\t\t}\r\n\t}, [searching, randomSearchRepeats]);\r\n\t//on destroy\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tsetSearching(false); //make sure preloader turns off\r\n\t\t\tdispatch(CloseRandomSearch());\r\n\t\t};\r\n\t}, [dispatch]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<LoadingBar loading={searching} />\r\n\t\t\t<hr />\r\n\t\t\t<Form onSubmit={(event) => onStartGameClick(event)}>\r\n\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t<Form.Label className=\"pb-2 w-25\">ابعاد جدول</Form.Label>\r\n\t\t\t\t\t<InputGroup\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tborder: \"1px solid orange\",\r\n\t\t\t\t\t\t\tborderRadius: \"5px\",\r\n\t\t\t\t\t\t\tpadding: \"2%\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<InputGroup.Prepend className=\"mx-3\">\r\n\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\tvalue=\"3\"\r\n\t\t\t\t\t\t\t\tname=\"tableDimension\"\r\n\t\t\t\t\t\t\t\tchecked={gameType === 3}\r\n\t\t\t\t\t\t\t\tonChange={() => setGameType(3)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<InputGroup.Text>3 * 3 * 3</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Prepend className=\"mx-3\">\r\n\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\tvalue=\"4\"\r\n\t\t\t\t\t\t\t\tname=\"tableDimension\"\r\n\t\t\t\t\t\t\t\tchecked={gameType === 4}\r\n\t\t\t\t\t\t\t\tonChange={() => setGameType(4)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<InputGroup.Text>4 * 4 * 4</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Prepend className=\"mx-3\">\r\n\t\t\t\t\t\t\t<InputGroup.Radio\r\n\t\t\t\t\t\t\t\tvalue=\"5\"\r\n\t\t\t\t\t\t\t\tname=\"tableDimension\"\r\n\t\t\t\t\t\t\t\tchecked={gameType === 5}\r\n\t\t\t\t\t\t\t\tonChange={() => setGameType(5)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<InputGroup.Text>5 * 5 * 5</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Button type=\"submit\" className=\"mt-4\" block variant=\"success\">\r\n\t\t\t\t\t<i className=\"fa fa-search px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\tجستجو\r\n\t\t\t\t</Button>\r\n\t\t\t</Form>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default SingleGame;\r\n","import { Alert, Badge, Container, Row, Col, Button } from \"react-bootstrap\";\r\n\r\nconst CompetitionSummary = ({ title, summary }) => {\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <Alert className=\"text-right w-100\" variant=\"info\">\r\n                    <Alert.Heading className=\"text-center\">\r\n                        <Badge variant=\"success p-2\" >\r\n                            {title}\r\n                        </Badge>\r\n                    </Alert.Heading>\r\n\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                </Alert>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n                <Alert className=\"text-right w-100\" pill=\"true\" variant=\"info\">\r\n                    <p>تعداد شرکت کنندگان : 00000000</p>\r\n                    <p>نکات دیگر</p>\r\n                </Alert>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n                <Col>\r\n                    <Button block variant=\"outline-success\">شرکت در مسابقه</Button>\r\n                </Col>\r\n                <Col>\r\n                <Button block variant=\"outline-secondary\">بازیکنان حاضر</Button>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default CompetitionSummary;\r\n","import { Col, Nav, Row, Tab } from \"react-bootstrap\";\r\nimport \"./competitions.css\";\r\nimport CompetitionSummary from \"./CompetitionSummary\";\r\n\r\nconst CompetitionsMain = () => {\r\n    return (\r\n        <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\">\r\n            <hr />\r\n\r\n            <Row>\r\n                <Col className=\"competition-menu-body\" sm={3}>\r\n                    <Nav variant=\"pills\" className=\"flex-column\">\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"first\">\r\n                                جام حذفی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"second\">\r\n                                لیگ امتیازی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"third\">\r\n                                بازی شرطی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"forth\">\r\n                                جدول رندوم\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"fifth\">\r\n                                و غیره\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                    </Nav>\r\n                </Col>\r\n                {/* <div style={{borderLeft: '1px solid gray', height:'500px'}}></div> */}\r\n                <Col sm={9}>\r\n                    <Tab.Content>\r\n                        <Tab.Pane eventKey=\"first\">\r\n                            <CompetitionSummary\r\n                                title=\"جام حذفی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"second\">\r\n                            <CompetitionSummary\r\n                                title=\"لیگ امتیازی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"third\">\r\n                            <CompetitionSummary\r\n                                title=\"بازی شرطی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"forth\">\r\n                            <CompetitionSummary\r\n                                title=\"جدول رندوم\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"fifth\">\r\n                            <CompetitionSummary\r\n                                title=\"و غیره\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                    </Tab.Content>\r\n                </Col>\r\n            </Row>\r\n        </Tab.Container>\r\n    );\r\n};\r\n\r\nexport default CompetitionsMain;\r\n","import GamePlay from \"./gameplay/GamePlay\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SingleGame from \"./SingleGame\";\r\nimport { Tab, Tabs, Card, Fade } from \"react-bootstrap\";\r\nimport { Fragment } from \"react\";\r\nimport CompetitionsMain from \"./competitions/CompetitionsMain\";\r\n\r\nconst GameDeck = () => {\r\n    const room = useSelector((state) => state.room);\r\n\r\n    return (\r\n        <Fragment>\r\n            {room.name ? (\r\n                <GamePlay />\r\n            ) : (\r\n                <Card\r\n                    border=\"secondary\"\r\n                    bg=\"transparent\"\r\n                    className=\"game-deck-card\">\r\n                    <Card.Body>\r\n                        <Tabs\r\n                            defaultActiveKey=\"randomGame\"\r\n                            transition={false}\r\n                            variant=\"pills\"\r\n                            // transition={Fade}\r\n                            className=\"mb-3\">\r\n                            \r\n                            <Tab eventKey=\"randomGame\" title=\"بازی تصادفی\">\r\n                                <SingleGame friendlyGame={false} />\r\n                            </Tab>\r\n                            <Tab eventKey=\"competitions\" title=\"مسابقات\">\r\n                                <CompetitionsMain />\r\n                            </Tab>\r\n                        </Tabs>\r\n                    </Card.Body>\r\n                </Card>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default GameDeck;\r\n","import './info.css'\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst GameGuide = () => {\r\n    return ( \r\n        <Card border=\"warning\" className=\"simple-single-card\" >\r\n            <Card.Header className=\"text-center\">راهنمای بازی</Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                <Card.Text>دانشگاه علم و صنعت ایران</Card.Text>\r\n                <Card.Text>E-mail: <a href=\"https://mail.google.com\">thcplusplus@gmail.com</a></Card.Text>\r\n                <Card.Text>Phone Number: 0000000000000</Card.Text>\r\n                <Card.Text>اطلاعات تماس استاد</Card.Text>\r\n                <Card.Text>instagram: ......</Card.Text>\r\n                <Card.Text>blah blah blah</Card.Text>\r\n            </Card.Body>\r\n        </Card>\r\n     );\r\n}\r\n \r\nexport default GameGuide;","import { Card } from 'react-bootstrap';\r\nimport './info.css'\r\n\r\nconst ContactUs = () => {\r\n    return ( \r\n        <Card border=\"dark\" className=\"simple-single-card\" >\r\n            <Card.Header className=\"text-center\">اطلاعات تماس</Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                <Card.Text>دانشگاه علم و صنعت ایران</Card.Text>\r\n                <Card.Text>E-mail: <a href=\"https://mail.google.com\">thcplusplus@gmail.com</a></Card.Text>\r\n                <Card.Text>Phone Number: 0000000000000</Card.Text>\r\n                <Card.Text>اطلاعات تماس استاد</Card.Text>\r\n                <Card.Text>instagram: ......</Card.Text>\r\n                <Card.Text>blah blah blah</Card.Text>\r\n            </Card.Body>\r\n        </Card>\r\n     );\r\n}\r\n \r\nexport default ContactUs;","import \"./scores.css\";\r\nimport { Component } from \"react\";\r\nimport AllScores from \"./AllScores\";\r\nimport gameServices from \"../../services/http/gameServices\";\r\nimport Configs from \"../../services/configs\";\r\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\r\n\r\nclass ScoresTable extends Component {\r\n    state = {\r\n        liveScores: [],\r\n        finalScores: [],\r\n        showLiveOnes: false,\r\n        loading: false,\r\n    };\r\n\r\n    componentDidMount() {\r\n        // get all game results , live or final, handling promises\r\n        // client and server side for this Module seriously need to be edited\r\n        (async () => {\r\n            this.setState({ loading: true }); // use preloader here?\r\n            const { data, status } = await gameServices.getAllGames();\r\n            if (status === Configs.Status.Successful) return data.allGames;\r\n            return [];\r\n        })()\r\n            .then((result) => {\r\n                result = result.reverse();\r\n                this.setState({\r\n                    liveScores: result.filter((game) => game.isLive),\r\n                    finalScores: result.filter((game) => !game.isLive),\r\n                    loading: false,\r\n                });\r\n                //EDIT EDIT EDIT\r\n            })\r\n            .catch((err) => {\r\n                //******* handle errors */\r\n                // console.log(err);\r\n                this.setState({ finalScores: [], loading: false });\r\n            });\r\n    }\r\n\r\n    btnShowLiveScores = () => {\r\n        this.setState({ showLiveOnes: true });\r\n    };\r\n\r\n    btnShowFinalScores = () => {\r\n        this.setState({ showLiveOnes: false });\r\n    };\r\n\r\n    \r\n    render() {\r\n       \r\n        // game replay? is it a good idea DataBase Size-Wise ? ===> if true: see 1st page of the notebook\r\n        /* add a NextGames button maybe? (گزینه بازی های اینده) */\r\n        let { liveScores, finalScores, showLiveOnes } = this.state;\r\n\r\n        // DESIGN : USE <Tabs> ???\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col>\r\n                        <Button\r\n                            variant={\r\n                                showLiveOnes\r\n                                    ? \"outline-success\"\r\n                                    : \"outline-primary\"\r\n                            }\r\n                            className=\"scores-mode-select-button\"\r\n                            onClick={this.btnShowLiveScores}>\r\n                            نتایج زنده\r\n                            <i\r\n                                className=\"fa fa-play-circle px-3\"\r\n                                aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button\r\n                            variant={\r\n                                !showLiveOnes\r\n                                    ? \"outline-success\"\r\n                                    : \"outline-primary\"\r\n                            }\r\n                            className=\"scores-mode-select-button\"\r\n                            onClick={this.btnShowFinalScores}>\r\n                            نتایج نهایی\r\n                            <i\r\n                                className=\"fa fa-check-circle-o px-3\"\r\n                                aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        {/* this single column is to make mode select buttons and Allscores same width */}\r\n                        <AllScores\r\n                            scores={showLiveOnes ? liveScores : finalScores}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ScoresTable;\r\n","import { Button, Form, Modal, Row } from \"react-bootstrap\";\r\nimport { Component, Fragment } from \"react\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { Sorry } from \"./../tools/notification\";\r\n\r\nclass ModalSignIn extends Component {\r\n\t// *********************Objectives***********************\r\n\t// 1. handle errors particularly\r\n\tstate = {\r\n\t\tshowModal: false,\r\n\t\tstudentID: \"\",\r\n\t\tpassword: \"\",\r\n\t\tloading: false,\r\n\t};\r\n\r\n\tonCloseClick = () => this.setState({ showModal: false });\r\n\tonShowClick = () => this.setState({ showModal: true });\r\n\r\n\tonSignInSubmitted = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst { studentID, password } = this.state;\r\n\t\tconst user = { studentID: Number(studentID), password };\r\n\t\ttry {\r\n\t\t\tconst { status, data } = await userServices.signIn(user);\r\n\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\tbrowserStorage.save(data.token);\r\n\t\t\t\tthis.props.history.replace(\"/\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\t// check nonserver errors\r\n\t\t\tthis.setState({ password: \"\" });\r\n\t\t\tif (!Configs.Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\".ورود با مشکل رو به رو شد. لطفا دوباره تلاش کتنید.\");\r\n\t\t}\r\n\t\tthis.setState({ loading: false });\r\n\t};\r\n\r\n\tonForgotPasswordClick = () => {};\r\n\r\n\trender() {\r\n\t\tconst { showModal, studentID, password, loading } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t<Button variant=\"outline-primary\" onClick={this.onShowClick}>\r\n\t\t\t\t\t<i className=\"fa fa-user px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\tورود کاربران\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tbackdrop=\"static\"\r\n\t\t\t\t\tshow={showModal}\r\n\t\t\t\t\tonHide={this.onCloseClick}>\r\n\t\t\t\t\t<Modal.Header closeButton></Modal.Header>\r\n\r\n\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tclassName=\"m-4 text-right\"\r\n\t\t\t\t\t\t\tonSubmit={(event) => this.onSignInSubmitted(event)}>\r\n\t\t\t\t\t\t\t<Form.Group className=\"mb-3 form-inline\">\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"w-25\">\r\n\t\t\t\t\t\t\t\t\tشماره دانشجویی\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-75 text-left\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Student ID\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={studentID}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\tstudentID: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\tclassName=\"mb-3 form-inline\"\r\n\t\t\t\t\t\t\t\tcontrolId=\"formBasicPassword\">\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"w-25\">\r\n\t\t\t\t\t\t\t\t\tرمز عبور\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-75 text-left\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\tpassword: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-50\"\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outline-success\">\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-sign-in px-2\"\r\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\tورود\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-50\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outline-warning\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.onForgotPasswordClick}>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-recycle px-2\"\r\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\tفراموشی رمز\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(ModalSignIn);\r\n","import React, { Component } from \"react\";\r\nimport ModalSignIn from \"./ModalSignIn\";\r\nimport \"./users.css\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { Card, Form, Button } from \"react-bootstrap\";\r\nimport { Sorry, OK, Attention } from \"../tools/notification\";\r\n\r\nclass SignUp extends Component {\r\n\t// *********************Objectives***********************\r\n\t// 1. handle errors particularly\r\n\t// 2. first and last name must be persian text so make the direction correct and force persian chars\r\n\tstate = {\r\n\t\tstudentID: \"\",\r\n\t\tpassword: \"\",\r\n\t\tconfirmPassword: \"\",\r\n\t\tfirstname: \"\",\r\n\t\tlastname: \"\",\r\n\t\temail: \"\",\r\n\t\tloading: false,\r\n\t};\r\n\r\n\tcheckConfirmPassword = (event) => {\r\n\t\tthis.setState({ confirmPassword: event.target.value });\r\n\t\tif (this.state.password !== event.target.value) {\r\n\t\t\tevent.target.setCustomValidity(\r\n\t\t\t\t\"تایید رمز عبور باید با خود رمز عبور مطابقت کامل داشته باشد\"\r\n\t\t\t);\r\n\t\t\t//console.log(password, confirmPassword);\r\n\t\t} else event.target.setCustomValidity(\"\");\r\n\t};\r\n\tonSignUpSubmit = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst {\r\n\t\t\tstudentID,\r\n\t\t\tpassword,\r\n\t\t\tconfirmPassword,\r\n\t\t\tfirstname,\r\n\t\t\tlastname,\r\n\t\t\temail,\r\n\t\t} = this.state;\r\n\t\tif (firstname.trim().length < 3 || lastname.trim().length < 3) {\r\n\t\t\tSorry(\"نام و نام خانوادگی باید حداقل شام سه حرف فارسی باشد\");\r\n\t\t\tthis.setState({\r\n\t\t\t\tfirstname: firstname.trim(),\r\n\t\t\t\tlastname: lastname.trim(),\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (password === confirmPassword) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.setState({ loading: true });\r\n\t\t\t\tconst newUser = {\r\n\t\t\t\t\tstudentID: Number(studentID),\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tfullname: (firstname + \" \" + lastname).replace(/\\s+/g, \" \"), // correct? (iterative?)\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst { status, data } = await userServices.signUp(newUser);\r\n\r\n\t\t\t\tif (status === Configs.Status.CreatedSuccessfully) {\r\n\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\tOK(\"ثبت نام با موفقیت انجام شد\");\r\n\t\t\t\t\tbrowserStorage.save(data.token);\r\n\t\t\t\t\tthis.props.history.replace(\"/\");\r\n\t\t\t\t\t// this.props.history.replace('/signIn')\r\n\t\t\t\t\t// ******* change server to return user token and auto sign in\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\t// console.log(err);\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\tif (err.response.status === Configs.Status.Conflict) {\r\n\t\t\t\t\tAttention(\r\n\t\t\t\t\t\t\"اگر رمز عبور خود را فراموش کرده اید، از گزینه بازیابی رمز عبور در صفحه ی ورود استفاده نمایید\"\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if (!Configs.Status.isErrorExpected(err)) {\r\n\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\"ثبت نام با مشکل رو به رو شد. لطفا دوباره تلاش کتنید\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSorry(\"رمز عبورها مطابقت ندارند\");\r\n\t\t}\r\n\t\tthis.setState({ loading: false });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tstudentID,\r\n\t\t\tpassword,\r\n\t\t\tconfirmPassword,\r\n\t\t\tfirstname,\r\n\t\t\tlastname,\r\n\t\t\temail,\r\n\t\t\tloading,\r\n\t\t} = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Card border=\"success\" className=\"sign-up-card\">\r\n\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t<Card.Header className=\"bg-transparent text-center border-success\">\r\n\t\t\t\t\tفرم ثبت نام\r\n\t\t\t\t</Card.Header>\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<Form onSubmit={(event) => this.onSignUpSubmit(event)}>\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">نام</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tpattern=\"[آ-ی ]{3,}\" // persian characters and space\r\n\t\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\"نام باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"First Name\"\r\n\t\t\t\t\t\t\t\tvalue={firstname}\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tfirstname: e.target.value,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">\r\n\t\t\t\t\t\t\t\tنام خانوادگی\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tpattern=\"[آ-ی ]{3,}\" // persian characters and space\r\n\t\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\"نام خانوادگی باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Last Name\"\r\n\t\t\t\t\t\t\t\tvalue={lastname}\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tlastname: e.target.value,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">\r\n\t\t\t\t\t\t\t\tشماره دانشجویی\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tpattern=\"[0-9]{8}\"\r\n\t\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\"شماره دانشجویی باید یک عدد 8 رقمی باشد\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Student ID\"\r\n\t\t\t\t\t\t\t\tvalue={studentID}\r\n\t\t\t\t\t\t\t\tautoComplete=\"username\"\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tstudentID: e.target.value,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">ایمیل</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\tpattern=\".{6,}\"\r\n\t\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\"ورودی باید فرمت معتبر ایمیل را رعایت کرده و حداقل 6 کاراکتر باشد\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"E-mail\"\r\n\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({ email: e.target.value })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">رمز عبور</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tpattern=\".{6,15}\"\r\n\t\t\t\t\t\t\t\tonInput={(e) => e.target.setCustomValidity(\"\")}\r\n\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\"رمز عبور باید حداقل 6 کاراکتر و حداکثر 15 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\tautoComplete=\"new-password\"\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tpassword: e.target.value,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Form.Group className=\"form-inline\">\r\n\t\t\t\t\t\t\t<Form.Label className=\"w-25\">\r\n\t\t\t\t\t\t\t\tتایید رمز عبور\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tclassName=\"sign-up-textbox w-75\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\t\t\t\tthis.checkConfirmPassword(event)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-success btn-block mt-4\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-user-plus px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\tثبت نام\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Card.Body>\r\n\t\t\t\t<Card.Footer className=\"border-primary bg-transparent\">\r\n\t\t\t\t\tاگر قبلا ثبت نام کردی، به صفحه ی <ModalSignIn /> برو !\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","const SinglePlayerCard = ({rowNumber, name, points, wins, loses, draws }) => {\r\n    return (\r\n        <tr>\r\n            <th scope=\"row\">{rowNumber}</th>\r\n            <td>{name}</td>\r\n            <td>{points}</td>\r\n            <td>{wins}</td>\r\n            <td>{loses}</td>\r\n            <td>{draws}</td>\r\n        </tr>\r\n    );\r\n};\r\n\r\nexport default SinglePlayerCard;\r\n","import { Card } from \"react-bootstrap\";\r\nimport SinglePlayerCard from \"./SinglePlayerCard\";\r\n\r\nconst AllPlayers = ({ players }) => {\r\n    return (\r\n        <Card border=\"dark\" style={{ width: \"100%\", borderRadius: \"5px\" }}>\r\n            <Card.Header className=\"text-center\">رده بندی</Card.Header>\r\n            <table className=\"table table-striped table-bordered table-hover text-center\">\r\n                <thead className=\"bg-info\">\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">نام بازیکن</th>\r\n                        <th scope=\"col\">امتیاز</th>\r\n                        <th scope=\"col\">تعداد برد</th>\r\n                        <th scope=\"col\">تعداد باخت</th>\r\n                        <th scope=\"col\">تعداد تساوی</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {players.map((player) => (\r\n                        <SinglePlayerCard\r\n                            key={player.userID}\r\n                            rowNumber={\r\n                                players.findIndex(\r\n                                    (p) => p.userID === player.userID\r\n                                ) + 1\r\n                            }\r\n                            name={player.fullname}\r\n                            points={player.records.points}\r\n                            wins={player.records.wins}\r\n                            loses={player.records.loses}\r\n                            draws={player.records.draws}></SinglePlayerCard>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default AllPlayers;\r\n","import { Component } from \"react\";\r\nimport AllPlayers from \"./AllPlayers\";\r\nimport userServices from \"../../services/http/userServices\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport Configs from '../../services/configs';\r\nimport { Row } from \"react-bootstrap\";\r\n\r\nclass Rankings extends Component {\r\n    state = { players: [], loading: false };\r\n\r\n    componentDidMount() {\r\n        (async () => {\r\n            this.setState({ loading: true });\r\n            const { data, status } = await userServices.getAllPlayers();\r\n            if (status === Configs.Status.Successful) return data.players;\r\n            return [];\r\n        })()\r\n            .then((result) => {\r\n                let tempPlayers = [...result];\r\n                this.setState({\r\n                    players: tempPlayers.sort( //sort priorities: 1. more points 2. more wins 3. less loses\r\n                        (p1, p2) =>\r\n                            p2.records.points - p1.records.points ||\r\n                            p2.records.wins - p1.records.wins ||\r\n                            p1.records.loses - p2.records.loses\r\n                    ),\r\n                    loading: false,\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                //******* handle errors */\r\n                // console.log(err);\r\n                this.setState({ players: [], loading: false });\r\n            });\r\n    }\r\n    render() {\r\n        const { players, loading } = this.state;\r\n        return (\r\n            <Row className=\"mx-auto mt-3\">\r\n                {loading ? <LoadingBar loading={loading} /> : null}\r\n                <Row className=\"w-100 mx-auto\">\r\n                    <AllPlayers players={players} />\r\n                </Row>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Rankings;\r\n","\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { Routes } from '../services/configs';\r\nimport ProfilePanelLayout from './../layouts/ProfilePanelLayout';\r\nimport MyGamesAndFriends from './../profile/friendgames/MyGamesAndFriends';\r\nimport NoticeManager from './../profile/admin/NoticeManager';\r\nimport ChatRoom from './../chat/ChatRoom';\r\nimport AcountManager from './../profile/edit/AcountManager';\r\nimport MainLayout from '../layouts/MainLayout';\r\nimport GameDeck from './../games/GameDeck';\r\nimport GameGuide from './../informations/GameGuide';\r\nimport ContactUs from './../informations/ContactUs';\r\nimport ScoresTable from './../tables/scores/ScoresTable';\r\nimport SignUp from '../users/SignUp';\r\nimport Rankings from './../tables/rankings/Rankings';\r\nconst MainRouter = () => {\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={`${Routes.Client.Profile}/:path?`} exact>\r\n\t\t\t\t<ProfilePanelLayout>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path={Routes.Client.MyGamesAndFriends}>\r\n\t\t\t\t\t\t\t<MyGamesAndFriends />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path={Routes.Client.Notices}>\r\n\t\t\t\t\t\t\t<NoticeManager />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path={Routes.Client.ChatRoom}>\r\n\t\t\t\t\t\t\t<ChatRoom />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route exact path={Routes.Client.Profile}>\r\n\t\t\t\t\t\t\t<AcountManager />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</ProfilePanelLayout>\r\n\t\t\t</Route>\r\n\t\t\t<Route>\r\n\t\t\t\t<MainLayout>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path={Routes.Client.SignUp}>\r\n\t\t\t\t\t\t\t<SignUp />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path={Routes.Client.GameDeck}>\r\n\t\t\t\t\t\t\t<GameDeck />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path={Routes.Client.Rankings}>\r\n\t\t\t\t\t\t\t<Rankings />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path={Routes.Client.GameGuide}>\r\n\t\t\t\t\t\t\t<GameGuide />/\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path={Routes.Client.ContactUs}>\r\n\t\t\t\t\t\t\t<ContactUs />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path={Routes.Client.Root} exact>\r\n\t\t\t\t\t\t\t<ScoresTable />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</MainLayout>\r\n\t\t\t</Route>\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default MainRouter;\r\n","import { useContext, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport { MessagePushed } from \"../globals/redux/actions\";\r\nimport { browserStorage, Routes } from \"../services/configs\";\r\nimport { Attention, Invitation, NewMsg } from \"./notification\";\r\nimport jwtdecode from \"jwt-decode\";\r\nimport { AcceptInvitation } from \"../globals/redux/actions/tools\";\r\nimport { RejectGameInvitation } from \"./../globals/redux/actions/tools\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\n\r\nconst NotificationCenter = ({ location }) => {\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst { pathname } = location;\r\n\tconst tools = useSelector((state) => state.tools);\r\n\tconst dispatch = useDispatch();\r\n\tconst context = useContext(GlobalContext);\r\n\t// check TOKEN EXPIRE time and notify user before he starts a game to re login\r\n\tconst { gameInvitation } = tools;\r\n\tconst { goTo } = context;\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tif (message && message.recieved && !message.recieved.pushed) {\r\n\t\t\t\tif (pathname !== Routes.Client.ChatRoom) {\r\n\t\t\t\t\tif (pathname !== Routes.Client.GameDeck) {\r\n\t\t\t\t\t\t// then just only push when message sender is the opponent\r\n\t\t\t\t\t\t//return;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tNewMsg(message.recieved, () =>\r\n\t\t\t\t\t\tgoTo(Routes.Client.ChatRoom)\r\n\t\t\t\t\t);\r\n\t\t\t\t\t//prevent recieved message from getting stuck in notificatioon loop\r\n\t\t\t\t\tdispatch(MessagePushed());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (gameInvitation) {\r\n\t\t\t\tInvitation(\r\n\t\t\t\t\tgameInvitation,\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tdispatch(AcceptInvitation(gameInvitation.ID, gameInvitation.type));\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tdispatch(RejectGameInvitation());\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconst decoded_token = jwtdecode(browserStorage.TOKEN());\r\n\r\n\t\t\tconst toMin = (mili) => mili / 1000 / 60;\r\n\t\t\tif (decoded_token) {\r\n\t\t\t\tconst { exp, iat } = decoded_token;\r\n\t\t\t\tconst expirationLength = (exp - iat) / 60;\r\n\t\t\t\tconst criticalNow = toMin(Date.now()) + expirationLength / 4;\r\n\t\t\t\t// ex: expiration is at 60 min\r\n\t\t\t\t// after converting all values to minutes\r\n\t\t\t\t// critical point is about 15 minutes to expiration\r\n\t\t\t\t// so if toMin(now) + 15min passes expiration date -> inform user to take action\r\n\t\t\t\tif (criticalNow >= exp / 60) {\r\n\t\t\t\t\tAttention(\r\n\t\t\t\t\t\t\"نشست شما در شرف انقضاست ... برای پیش گیری از بروز مشکل لطفا دوباره وارد حساب خود شوید\"\r\n\t\t\t\t\t);\r\n\t\t\t\t\t// ...some action\r\n\t\t\t\t\t// implement onClick for this toast\r\n\t\t\t\t\t// like rerouting to sing in model and etc\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}, [message, pathname, gameInvitation, goTo, dispatch]);\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default withRouter(NotificationCenter);\r\n","export const UpdateStatistics = (players, games) => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"UPDATE_STATISTICS\",\r\n\t\t\tpayload: { players, games },\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport const MessagePushed = () => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({ type: \"MEESAGE_PUSHED\" });\r\n\t};\r\n};\r\n\r\nexport const ResetMessages = () => {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch({ type: \"RESET_MESSAGES\" });\r\n\t};\r\n};","import { browserStorage, Routes } from \"../configs\";\r\nimport { Fragment, useCallback, useContext, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { UpdateStatistics, ResetMessages } from \"../../globals/redux/actions\";\r\nimport { RecieveMessageFrom } from \"../../globals/redux/actions/message\";\r\nimport { Modal, Button, Row, Col, Badge } from \"react-bootstrap\";\r\nimport { Attention, OK, Sorry, Notify } from \"../../tools/notification\";\r\nimport NotificationCenter from \"../../tools/NotificationCenter\";\r\nimport GlobalContext from \"./../../globals/state/GlobalContext\";\r\nimport {\r\n\tEndFriendlyInvitation,\r\n\tEndFriendRequest,\r\n\tRecieveGameInvitation,\r\n\tReloadRecords,\r\n\tReapeatRandomSearch,\r\n\tCloseRandomSearch,\r\n} from \"./../../globals/redux/actions/tools\";\r\nimport { EnterRoom } from \"../../globals/redux/actions/game\";\r\nconst GlobalSocketManager = () => {\r\n\t// I actually used .jsx format to make this Component EventBased\r\n\t// On Each event called socket will do some specific operation\r\n\t// events are actually useEffects bound to special state changes\r\n\tconst context = useContext(GlobalContext);\r\n\tconst [socketGlobal, setSocketGlobal] = useState(null);\r\n\tconst [incommingFriendRequest, setIncommingFriendRequest] = useState(null);\r\n\tconst [showFriendshipModal, setShowFriendshipModal] = useState(false);\r\n\tconst me = useSelector((state) => state.me);\r\n\tconst tools = useSelector((state) => state.tools);\r\n\tconst room = useSelector((state) => state.room);\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst [clientOnline, toggleClientOnline] = useState(true);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst pack = useCallback((request, msg = null) => {\r\n\t\treturn JSON.stringify({\r\n\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\trequest,\r\n\t\t\tmsg,\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst enableGlobalTimer = useCallback(() => {\r\n\t\treturn setInterval(() => {\r\n\t\t\tif (socketGlobal) socketGlobal.send(pack(\"online\"));\r\n\t\t}, 300000); // every 5 MINUTES request number of online members to update the site\r\n\t}, [pack, socketGlobal]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"global timer enabled\");\r\n\t\tconst timerID = enableGlobalTimer();\r\n\t\treturn () => {\r\n\t\t\tconsole.log(\"global timer disabled\");\r\n\t\t\tclearInterval(timerID);\r\n\t\t};\r\n\t}, [enableGlobalTimer]);\r\n\r\n\tconst { signOut, redirectToGamePlay } = context;\r\n\tconst iamSignedIn = me && me.userID;\r\n\tconst iamBusy = room && room.name;\r\n\tconst connect = useCallback(() => {\r\n\t\tconsole.log(\"global websocket connect called -> new socket returned\");\r\n\t\tif (!iamSignedIn) return null; //to make sure just site user trigger this connection\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tvar socket = new WebSocket(\r\n\t\t\t\t\t`${Routes.Server.WebSocketRoot}/${Routes.Server.wsGlobalRoute}`\r\n\t\t\t\t);\r\n\t\t\t\tsocket.onopen = () => {\r\n\t\t\t\t\tsocket.send(pack(\"online\")); //temp\r\n\t\t\t\t\tresolve(socket);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onmessage = (response) => {\r\n\t\t\t\t\tconst { data } = response;\r\n\t\t\t\t\tconst { command, msg } = JSON.parse(data);\r\n\t\t\t\t\tswitch (command) {\r\n\t\t\t\t\t\tcase \"ONLINE\": {\r\n\t\t\t\t\t\t\tconst { players, games } = msg;\r\n\t\t\t\t\t\t\tdispatch(UpdateStatistics(players, games)); //playing temp\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"NOT_AUTHORIZED\": {\r\n\t\t\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\t\t\"نشست شما منقضی شده، لطفا دوباره وارد حساب کاربری خود شوید\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tsignOut();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"FIND_RESULT\": {\r\n\t\t\t\t\t\t\t//response from random game request\r\n\t\t\t\t\t\t\tif (msg) {\r\n\t\t\t\t\t\t\t\tdispatch(EnterRoom(msg));\r\n\t\t\t\t\t\t\t\tsocket.send(pack(\"online\"));\r\n\t\t\t\t\t\t\t\tdispatch(CloseRandomSearch());\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//search again 5s later\r\n\t\t\t\t\t\t\t\t// **********************\r\n\t\t\t\t\t\t\t\t//time out must be set with rising time out time to prevent server getting fucked up\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tif (!iamBusy)\r\n\t\t\t\t\t\t\t\t\t\tdispatch(ReapeatRandomSearch());\r\n\t\t\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"FRIENDSHIP_REQUEST\": {\r\n\t\t\t\t\t\t\t//if (msg.askerID === opponentID) {\r\n\t\t\t\t\t\t\t//if both mes are in game then ask immidiately\r\n\t\t\t\t\t\t\tsetIncommingFriendRequest(msg);\r\n\t\t\t\t\t\t\tsetShowFriendshipModal(true);\r\n\r\n\t\t\t\t\t\t\t/*else {\r\n\t\t\t\t\t\t\t\t//if the friend request is comming from some one else then manage it differently\r\n\t\t\t\t\t\t\t\t//...\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"FRIENDSHIP_RESPONSE\": {\r\n\t\t\t\t\t\t\tconst { answer, targetName } = msg;\r\n\t\t\t\t\t\t\t//if(answer) dispatch(TriggerRecordUpdate());\r\n\t\t\t\t\t\t\tif (answer) {\r\n\t\t\t\t\t\t\t\tOK(`${targetName} درخواست دوستی شما را پذیرفت`);\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t//reload for changing friendship status in the game => delay is set for restin assure that database is updated\r\n\t\t\t\t\t\t\t\t\tdispatch(ReloadRecords());\r\n\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tAttention(\r\n\t\t\t\t\t\t\t\t\t`${targetName} درخواست دوستی شما را رد کرد`\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tdispatch(EndFriendRequest());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"TARGET_OFFLINE\": {\r\n\t\t\t\t\t\t\t//... while chatting or game request\r\n\t\t\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\t\t\"کاربر مورد نظر در حال حاضر آفلاین می باشد. لطفا بعدا تلاش کنید.\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tdispatch(EndFriendlyInvitation());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"YOUR_BUSY\": {\r\n\t\t\t\t\t\t\tSorry(\r\n\t\t\t\t\t\t\t\t\"شما هنوز بازی اخیر خود را به اتمام نرسانده اید. پس از پایان آن دوباره تلاش کنید.\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tdispatch(EndFriendlyInvitation());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"TARGET_BUSY\": {\r\n\t\t\t\t\t\t\t//... while chatting or game request\r\n\t\t\t\t\t\t\tNotify(\r\n\t\t\t\t\t\t\t\t\"در حال حاضر کاربر مشغول انجام بازی دیگری است و درخواست شما امکان پذیر نیست\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tdispatch(EndFriendlyInvitation());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"FRIENDLY_GAME\": {\r\n\t\t\t\t\t\t\t// ... trigger and show responding form\r\n\t\t\t\t\t\t\tconst { askerID, askerName, gameType } = msg;\r\n\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\tRecieveGameInvitation(\r\n\t\t\t\t\t\t\t\t\taskerID,\r\n\t\t\t\t\t\t\t\t\taskerName,\r\n\t\t\t\t\t\t\t\t\tgameType\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"INVITATION_ACCEPTED\": {\r\n\t\t\t\t\t\t\t// ... friend responded to your request\r\n\t\t\t\t\t\t\t// ... if true -> room info has ben sent to you\r\n\t\t\t\t\t\t\t// needed to check room state? done in server\r\n\t\t\t\t\t\t\tdispatch(EndFriendlyInvitation());\r\n\t\t\t\t\t\t\tredirectToGamePlay(msg); //msg -> room\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"CHAT\": {\r\n\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\tRecieveMessageFrom(\r\n\t\t\t\t\t\t\t\t\tmsg.name,\r\n\t\t\t\t\t\t\t\t\tmsg.friendID,\r\n\t\t\t\t\t\t\t\t\tmsg.text\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\t//... whatever\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(socket);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onerror = (error) => {\r\n\t\t\t\t\tsocket.close();\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onclose = () => {\r\n\t\t\t\t\t// reconnectr or what?\r\n\t\t\t\t\tconsole.log(\"Reconnecting in  5 seconds\");\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t(async () => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tlet socket = iamSignedIn\r\n\t\t\t\t\t\t\t\t\t? await connect()\r\n\t\t\t\t\t\t\t\t\t: null;\r\n\t\t\t\t\t\t\t\tsetSocketGlobal(socket);\r\n\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})();\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t\tresolve(null);\r\n\t\t\t\t\t// this part needs editing ? maybe not\r\n\t\t\t\t};\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(`global websocket errpr: ${err}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}, [dispatch, signOut, redirectToGamePlay, pack, iamSignedIn, iamBusy]);\r\n\r\n\t// EVENT NAME: PlayerUpdateEvent\r\n\t// happens when player sign in status changes => set ups global socket connection and then if signed in=> reads number of online users in page\r\n\tuseEffect(() => {\r\n\t\t//updates every time record changes or common user data changes, good or what?\r\n\t\tif (clientOnline && iamSignedIn) {\r\n\t\t\t(async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet socket = iamSignedIn ? await connect() : null;\r\n\t\t\t\t\tsetSocketGlobal(socket);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t}, [clientOnline, iamSignedIn, connect]);\r\n\r\n\tconst { fullname } = me ? me : { fullname: null };\r\n\tconst {\r\n\t\tfriendRequestTarget,\r\n\t\tfriendlyGameTarget,\r\n\t\trandomSearchRepeats,\r\n\t\tacceptedGame,\r\n\t} = tools;\r\n\t// EVENT NAME: RandomGameInitiated Event\r\n\t// happens when user clicks on 'Random Game\" Tab search button => sends opponent search request to server\r\n\tuseEffect(() => {\r\n\t\tif (randomSearchRepeats) {\r\n\t\t\tif (room.type) {\r\n\t\t\t\t//is it necessary?\r\n\t\t\t\t//completely making sure we're on right stage\r\n\t\t\t\tif (!room.name && iamSignedIn && socketGlobal)\r\n\t\t\t\t\tsocketGlobal.send(pack(\"find\", room.type));\r\n\t\t\t} else if (!room.name) {\r\n\t\t\t\t//room --> {null,null} --> means room has been reset hand u need to remove\r\n\t\t\t\tif (socketGlobal) socketGlobal.send(pack(\"close_game\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}, [iamSignedIn, room, randomSearchRepeats, socketGlobal, pack]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (friendRequestTarget) {\r\n\t\t\t//friendRequestTarget either contains null => no request, or contains target ID for friendship\r\n\t\t\tif (socketGlobal)\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tpack(\"friendship\", {\r\n\t\t\t\t\t\ttargetID: friendRequestTarget,\r\n\t\t\t\t\t\taskerName: fullname,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tif (acceptedGame) {\r\n\t\t\tif (socketGlobal)\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tpack(\"respond_friendlygame\", {\r\n\t\t\t\t\t\tanswer: true,\r\n\t\t\t\t\t\tinviterID: acceptedGame.inviterID,\r\n\t\t\t\t\t\tgameType: acceptedGame.type,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t} else if (friendlyGameTarget) {\r\n\t\t\tif (socketGlobal)\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tpack(\"friendly_game\", {\r\n\t\t\t\t\t\ttargetID: friendlyGameTarget.targetID,\r\n\t\t\t\t\t\tgameType: friendlyGameTarget.type,\r\n\t\t\t\t\t\taskerName: fullname,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t}\r\n\t}, [\r\n\t\tfriendRequestTarget,\r\n\t\tfriendlyGameTarget,\r\n\t\tacceptedGame,\r\n\t\tsocketGlobal,\r\n\t\tpack,\r\n\t\tfullname,\r\n\t]);\r\n\r\n\tconst respondToFriendshipRequest = (answer) => {\r\n\t\t// handle multiple requests *************\r\n\r\n\t\t//target reponds to requester\r\n\t\tif (socketGlobal)\r\n\t\t\tsocketGlobal.send(\r\n\t\t\t\tpack(\"respond_friendship\", {\r\n\t\t\t\t\tanswer,\r\n\t\t\t\t\ttargetName: me.fullname,\r\n\t\t\t\t\taskerID: incommingFriendRequest.askerID,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t// if(answer) dispatch(TriggerRecordUpdate());\r\n\t\tsetShowFriendshipModal(false);\r\n\t\tsetIncommingFriendRequest(null);\r\n\t\tif (answer)\r\n\t\t\t// if request accepted => reload friendship status after some seconds, delay is set to make sure friends are linked in database\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdispatch(ReloadRecords());\r\n\t\t\t}, 5000);\r\n\r\n\t\t// dispatch(SendFriendRequestTo(null)); //reset friend request targetID to prevent any future problm\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (message.sent && socketGlobal) {\r\n\t\t\t//if destination is determined, otherwise => means no message has been sent\r\n\t\t\tsocketGlobal.send(pack(\"chat\", message.sent));\r\n\t\t\tdispatch(ResetMessages());\r\n\t\t}\r\n\t}, [message.sent, socketGlobal, pack, dispatch]);\r\n\r\n\t// if online status changes\r\n\tsetInterval(() => {\r\n\t\tif (window.navigator.onLine) {\r\n\t\t\t//client online\r\n\t\t\tif (!clientOnline)\r\n\t\t\t\t//this means -> client JUST became online\r\n\t\t\t\ttoggleClientOnline(true); //change connection status\r\n\t\t} else {\r\n\t\t\t// clients offline\r\n\t\t\tif (clientOnline)\r\n\t\t\t\t//this means -> client JUST became offline now\r\n\t\t\t\ttoggleClientOnline(false); //change connection status\r\n\t\t}\r\n\t}, 5000);\r\n\r\n\t// is it really necessary though ?????\r\n\t// move UI to notification center\r\n\treturn (\r\n\t\t//this is just for firendship request in games\r\n\t\t<Fragment>\r\n\t\t\t<NotificationCenter />\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showFriendshipModal}\r\n\t\t\t\tonHide={() => respondToFriendshipRequest(false)}>\r\n\t\t\t\t<Modal.Header closeButton />\r\n\t\t\t\t<Modal.Body className=\"text-right\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{!incommingFriendRequest ? null : (\r\n\t\t\t\t\t\t\t<Badge\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: \"18px\", margin: \"2%\" }}\r\n\t\t\t\t\t\t\t\tpill\r\n\t\t\t\t\t\t\t\tvariant=\"warning\">\r\n\t\t\t\t\t\t\t\t{incommingFriendRequest.askerName}\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tبه شما پیشنهاد دوستی داده است.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>اگر تمایل به دوستی ندارید میتواند درخواست را رد کنید.</p>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer className=\"w-100 text-right\">\r\n\t\t\t\t\t<Row className=\"w-100\">\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\trespondToFriendshipRequest(true)\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\tپذیرفتن\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\trespondToFriendshipRequest(false)\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\tرد\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default GlobalSocketManager;\r\n","import { ToastContainer } from \"react-toastify\";\r\nimport NavigationBar from \"./commons/NavigationBar\";\r\nimport GlobalStates from \"./globals/state/GlobalStates\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport MainRouter from \"./commons/MainRouter\";\r\nimport { useSelector } from \"react-redux\";\r\nimport GlobalSocketManager from \"./services/ws/GlobalSocketManager\";\r\n\r\nconst App = () => {\r\n\tconst me = useSelector((state) => state.me);\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<GlobalStates>\r\n\t\t\t\t{me && <GlobalSocketManager />}\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<MainRouter />\r\n\t\t\t</GlobalStates>\r\n\t\t</BrowserRouter>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import { combineReducers } from \"redux\";\r\nimport { meReducer } from \"./me\";\r\nimport { opponentReducer } from \"./opponent\";\r\nimport { roomReducer } from './room';\r\nimport { scoreboardReducer } from './scoreboard';\r\nimport { toolsReducer } from \"./tools\";\r\nimport { statisticsReducer } from \"./statistics\";\r\nimport { messageReducer } from './message';\r\nimport { interactionsReducer } from './interactions';\r\n\r\nexport const reducers = combineReducers({\r\n    me: meReducer,\r\n    opponent: opponentReducer,\r\n    room: roomReducer,\r\n    scoreboard: scoreboardReducer,\r\n    tools: toolsReducer,\r\n    statistics: statisticsReducer,\r\n    message: messageReducer,\r\n    interactions: interactionsReducer\r\n});","export const meReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOAD_MINE\":\r\n            return action.payload;\r\n        case \"RESET_MINE\":\r\n            return null;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const opponentReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOAD_OPPONENT\":\r\n            return action.payload;\r\n        case \"RESET_OPPONENT\":\r\n            return null;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const roomReducer = (state = {name: null, type: null}, action) => {\r\n    switch (action.type) {\r\n        case \"ENTER_ROOM\":\r\n            return {...action.payload};\r\n        case \"EXIT_ROOM\":\r\n            return {name: null, type: null}\r\n        default:\r\n            return state;\r\n    }\r\n};","// simple scoreboard for player's live games\r\n\r\nexport const scoreboardReducer = (state = {me: null, opp: null}, action) => {\r\n    switch (action.type) {\r\n        case \"UPDATE_SCOREBOARD\":\r\n            return {...action.payload}; // payload === {me: {shape: , score: }, opp: 0} // null for ended or not started games : {me: null, opp: null}\r\n        case \"CLEAN_SCOREBOARD\":\r\n            return {me: null, opp: null};\r\n        default:\r\n            return state;\r\n    }\r\n};","export const toolsReducer = (\r\n\tstate = {\r\n\t\trandomSearchRepeats: 0,\r\n\t\tfriendRequestTarget: null,\r\n\t\tfriendlyGameTarget: null,\r\n\t\tgameInvitation: null,\r\n\t\tacceptedGame: null,\r\n\t\trecordReloadTrigger: false,\r\n\t},\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"UPDATE_TOOLS\":\r\n\t\t\treturn { ...action.payload };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","export const statisticsReducer = (state = { players: 0, games: 0 }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"UPDATE_STATISTICS\":\r\n\t\t\treturn { ...action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","export const messageReducer = (\r\n\tstate = { sent: null, recieved: null },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"RECIEVE_MESSAGE\": {\r\n\t\t\treturn {\r\n\t\t\t\trecieved: { ...action.payload, pushed: false },\r\n\t\t\t\tsent: state.sent,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase \"SEND_MESSAGE\": {\r\n\t\t\treturn {\r\n\t\t\t\tsent: { ...action.payload, pushed: true },\r\n\t\t\t\trecieved: state.recieved,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase \"MEESAGE_PUSHED\":\r\n\t\t\treturn {\r\n\t\t\t\tsent: state.sent,\r\n\t\t\t\trecieved: {...state.recieved, pushed: true},\r\n\t\t\t};\r\n\t\tcase \"RESET_MESSAGES\":\r\n\t\t\treturn { sent: null, recieved: null };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","export const interactionsReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n        case \"LOAD_INTERACTIONS\":\r\n            return [...action.payload];\r\n        case \"RESET_INTERACTIONS\":\r\n            return [];\r\n        default:\r\n            return state;\r\n    }\r\n};","import { applyMiddleware, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { reducers } from \"../reducers\";\r\n\r\nexport const store = createStore(reducers, applyMiddleware(thunk));\r\n\r\n//dispatch\r\n// store.subscribe(() => console.log(store.getState()));","import { render } from \"react-dom\";\r\nimport App from \"./App.js\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./globals/redux/store/index\";\r\n\r\nrender(\r\n\t<Provider store={store}>\r\n\t\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n","const ClientRoutes = require('./client');\r\nconst ServerRoutes = require('./server');\r\nconst Status = require('./status');\r\nconst browserStorage = require('./browser');\r\nconst GameSetting = require('./gamesetting');\r\n//all configs\r\nmodule.exports = {\r\n    browserStorage,\r\n    Routes: { Server: ServerRoutes, Client: ClientRoutes },\r\n    Status,\r\n    GameSetting,\r\n    Devices: { SmartPhone: 2, Tablet: 1, Desktop: 0 },\r\n}"],"sourceRoot":""}