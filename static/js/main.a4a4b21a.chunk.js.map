{"version":3,"sources":["services/configs/client.js","services/configs/local.js","services/configs/status.js","services/configs/browser.js","services/configs/gamesetting.js","tools/format.js","tables/scores/SingleScoreCard.jsx","tables/scores/AllScores.jsx","tools/msgbox.js","services/http/httpService.js","services/http/userServices.js","services/http/gameServices.js","tables/scores/ScoresTable.jsx","informations/GameGuide.jsx","informations/ContactUs.jsx","commons/LoadingBar.jsx","users/ModalSignIn.jsx","users/SignUp.jsx","sidebars/SignInSideBar.jsx","services/http/noticeServices.js","sidebars/NoticeSideBar.jsx","sidebars/no-avatar.png","sidebars/OnlineStatistics.jsx","globals/redux/actions/index.js","chat/GameChatBox.jsx","profile/friendgames/Record.jsx","sidebars/PlayerInfoSideBar.jsx","tools/NotificationCenter.jsx","services/ws/GlobalSocketManager.jsx","tools/AutoSignIn.jsx","globals/state/GlobalContext.jsx","layouts/MainLayout.jsx","tables/rankings/SinglePlayerCard.jsx","tables/rankings/AllPlayers.jsx","tables/rankings/Rankings.jsx","services/ws/gamePlaySocketServices.js","globals/redux/withReduxDashboard.js","games/gameplay/BriefScoreboard.jsx","games/gameplay/TableDesign.jsx","games/gameplay/GamePlay.jsx","games/SingleGame.jsx","games/competitions/CompetitionSummary.jsx","games/competitions/CompetitionsMain.jsx","games/GameDeck.jsx","profile/NoticeManager.jsx","profile/AcountCredentials.jsx","profile/friendgames/no-avatar.png","profile/friendgames/FriendRecords.jsx","profile/friendgames/MyGamesAndFriends.jsx","services/http/chatServices.js","chat/Message.jsx","chat/ChatBox.jsx","chat/ChatRoom.jsx","profile/panel/ProfilePanel.jsx","profile/panel/CollapsedPanel.jsx","layouts/ProfilePanelLayout.jsx","commons/NavigationBar.jsx","App.js","globals/redux/reducers/index.js","globals/redux/reducers/player.js","globals/redux/reducers/opponent.js","globals/redux/reducers/room.js","globals/redux/reducers/scoreboard.js","globals/redux/reducers/tools.js","globals/redux/reducers/statistics.js","globals/redux/reducers/message.js","globals/redux/reducers/token.js","globals/redux/store/index.js","globals/state/GlobalStates.jsx","index.js","services/configs/index.js"],"names":["Profile","module","exports","Root","SignUp","SignIn","GameDeck","Rankings","GameGuide","ContactUs","ChatRoom","MyGamesAndFriends","Notices","WebSocketRoot","wsGamePlayRoute","wsGlobalRoute","Users","Credentials","PasswordChange","Friends","Public","Administrators","Games","Mine","Chats","NoticeManagement","Successful","CreatedSuccessfully","BadRequest","Unauthorized","Forbidden","NotFound","NotAcceptable","Conflict","SessionExpired","UnprocessableEntity","InternalServerError","isErrorExpected","error","response","status","writeUser","id","token","sessionStorage","setItem","TOKEN","getItem","ID","T3D","TableRowMargings","TurnTimeOut","objectify","date","DateObject","Date","calendar","persian","locale","persian_fa","toHijri","format","SingleScoreCard","Type","playerXName","playerOName","xScore","oScore","useState","xBadge","setXBadge","oBadge","setOBadge","hijriDate","setHijriDate","useEffect","Card","border","className","Body","Row","Footer","Button","variant","block","size","aria-hidden","AllScores","scores","console","log","length","map","score","players","name","gameID","Text","Sorry","text","toast","position","closeOnClick","icon","style","float","OK","success","Notify","info","Attention","warn","type","axios","defaults","headers","post","put","interceptors","request","use","config","browserStorage","Authorization","Promise","reject","expectedErrors","Status","http","get","delete","Server","Routes","userServices","signUp","user","JSON","stringify","signIn","getPlayer","userID","getAllPlayers","getMyCredentials","editMyCredentials","newMe","changeMyPassword","passwords","getMyFriends","isMyFriend","targetID","isAdministrator","gameServices","getAllGames","getMyGames","loadPlayerData","a","data","resolve","player","ScoresTable","state","liveScores","finalScores","showLiveOnes","loading","btnShowLiveScores","setState","btnShowFinalScores","this","props","Device","Configs","allGames","then","result","reverse","filter","game","isLive","catch","err","Container","Col","onClick","Component","Header","href","LoadingBar","whichOne","setWhichOne","Math","floor","random","useLayoutEffect","document","body","overflowY","height","selectedLoader","time","customLoading","ModalSignIn","showModal","studentID","password","onCloseClick","onShowClick","onSignInSubmitted","event","preventDefault","Number","history","replace","onForgotPasswordClick","Modal","backdrop","show","onHide","closeButton","Form","onSubmit","Group","Label","Control","placeholder","autoComplete","value","onChange","e","target","controlId","withRouter","confirmPassword","firstname","lastname","email","checkConfirmPassword","setCustomValidity","onSignUpSubmit","trim","newUser","fullname","pattern","onInput","onInvalid","required","SignInSideBar","noticeServices","createNotice","notice","getAdvancedNotics","getShortNotices","editNotice","noticeID","NoticeSideBar","notices","setNotices","title","Alert","color","fontSize","uuidv1","OnlineStatistics","useSelector","statistics","games","ListGroup","Item","Badge","pill","LoadMe","payload","SetRoom","room","SendFriendRequestTo","SendMessageTo","friendID","GameChatBox","myMessage","setMyMessage","message","dispatch","useDispatch","me","composeMessage","recieved","InputGroup","Prepend","width","Record","children","small","PlayerInfoSideBar","scoreboard","personIsFriend","setPersonIsFriend","person","piece","setPiece","opp","isFriend","records","Image","src","noAvatar","alt","index","Heading","shape","points","wins","draws","loses","innerHTML","disabled","onFriendRequestClick","location","pathname","pushed","Client","textAlign","NewMsg","decoded_token","jwtdecode","exp","expirationLength","iat","now","GlobalSocketManager","socketGlobal","setSocketGlobal","incommingFriendRequest","setIncommingFriendRequest","showFriendshipModal","setShowFriendshipModal","opponent","tools","clientOnline","toggleClientOnline","enableGlobalTimer","useCallback","setInterval","send","clientID","msg","timerID","clearInterval","connect","socket","WebSocket","onopen","onmessage","parse","command","setTimeout","askerID","answer","targetName","onerror","close","onclose","opponentSearchTriggered","friendRequest","askerName","respondToFriendshipRequest","sent","window","navigator","onLine","margin","AutoSignIn","storageUserID","GlobalContext","createContext","device","context","useContext","leftSideBar","setLeftSideBar","rightSideBar","setRightSideBar","setPrimaryRightSideBar","Devices","Tablet","SmartPhone","xs","SinglePlayerCard","rowNumber","scope","AllPlayers","borderRadius","findIndex","p","Ranking","tempPlayers","sort","p1","p2","createSocketRequest","rname","playerID","roomName","gameType","server","withReduxDashboard","component","LoadOpponent","ResetOpponent","ResetRoom","SetGameID","UpdateScoreboard","details","CleanScoreboard","TriggerRecordUpdate","SaveNewToken","BriefScoreboard","timeRemaining","timeStamp","setTimeStamp","aThird","GameSetting","TableDesign","dimension","table","onEachCellClick","normalCell","dimens","i","push","bg","row","direction","marginLeft","column","GamePlay","selected","lineColor","turn","myTurn","undefined","socketGamePlay","playerOnline","connectionCheckTimerID","LoadOpponentData","opponentID","updateGameScorebaord","oppTurn","enableTimerForMyMove","timeout","updatePlayerStates","disableAllTimers","clearTimeout","socketOnMessage","cmd","startTime","IDs","opponentIndex","cellID","nextMove","verifyAndApplyTheMove","getCellCoordinates","cellButtons","focus","endThisGame","closeThisGame","forceConnectWS","nextJob","enableConnectionCheckTimer","dimen","onFloorId","selectedCellButton","cell","cellButton","tempTable","inspectAreaAroundTheCell","playerInTheCell","rowCount","columnCount","floorMainDiagCount","floorSideDiagCount","tableMainDiagCount","tableSideDiagCount","tableAltitudeCount","connectTheScoreLines","count","firstCell","step","getElementsByClassName","RoomManager","friendlyGame","setRoomName","setGameType","searching","setSearching","onStartGameClick","padding","Radio","checked","CompetitionSummary","summary","CompetitionsMain","Tab","defaultActiveKey","sm","Nav","Link","eventKey","Content","Pane","Tabs","transition","SingleGame","NoticeManager","isAllowed","setAllowed","setTitle","setText","startDate","setStartDate","endDate","setEndDate","selectedNoticeID","setSelectedNoticeID","updateTrigger","setUpdateTrigger","setLoading","resetStates","isAdmin","admin","createNewNotice","saveChanges","as","calendarPosition","_id","selecteNotice","MODES","AccountCredentials","setFullname","setStudentID","setEmail","setPassword","pageMode","setPageMode","pageUpdateTrigger","triggerPageUpdate","newPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","Error","reloadPage","selectMode","FriendRecords","friend","round","myFriends","setMyFriends","myGames","setMyGames","filterID","setFilterID","selectedFriendIndex","setSelectedFriendIndex","serverResponse","friends","onSelect","key","area-hidden","chatServices","getOurChat","Message","previousDay","inDesktop","showDate","setShowDate","setTime","hDate","hTime","getDate","ChatBox","mostRecentMessageRef","useRef","allMsgs","setAllMsgs","loadPreviousMessages","myIndex","chat","previousMsgs","owner","recieveMessage","tempMsg","current","scrollIntoView","behavior","top","offsetTop","ref","Desktop","exact","to","aria-current","ProfilePanelLayout","NavigationBar","Navbar","activeClassName","App","path","reducers","combineReducers","action","clear","updateTriggered","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","GlobalStates","isDesktop","useMediaQuery","query","isSmartPhone","isTablet","setDevice","mode","Provider","render","getElementById","ClientRoutes","require","ServerRoutes"],"mappings":"2LAGA,IAAMA,EAAU,WAKhBC,EAAOC,QAAU,CACbC,KAAM,IACNC,OAAQ,UACRC,OAAQ,UACRC,SAAU,YACVC,SAAU,YACVC,UAAW,aACXC,UAAW,YACXT,UACAU,SAAS,GAAD,OAAKV,EAAL,YAbG,YAcXW,kBAAkB,GAAD,OAAKX,EAAL,YAbG,gBAcpBY,QAAQ,GAAD,OAAKZ,EAAL,YAbG,a,kBCLdC,EAAOC,QAAU,CACbC,KAAM,wBACNU,cAAe,yBACfC,gBAAiB,WACjBC,cAAe,SACfX,OAAQ,SACRC,OAAQ,SACRW,MAAO,QACPC,YAAa,cACbC,eAAgB,WAChBC,QAAS,UACTC,OAAQ,SACRC,eAAgB,iBAChBC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPZ,QAAS,UACTa,iBAAkB,W,kBCVtBxB,EAAOC,QAAU,CACbwB,WAAY,IACZC,oBAAqB,IACrBC,WAAY,IACZC,aAAc,IACdC,UAAW,IACXC,SAAU,IACVC,cAAe,IACfC,SAAU,IACVC,eAAgB,IAChBC,oBAAqB,IACrBC,oBAAqB,IACrBC,gBApBoB,SAACC,GACrB,OACIA,EAAMC,UACND,EAAMC,SAASC,QAAU,KACzBF,EAAMC,SAASC,OAAS,O,kBCAhCvC,EAAOC,QAAU,CACbuC,UAAW,SAACC,EAAIC,GAEZC,eAAeC,QALX,MAK0BH,GAC9BE,eAAeC,QAPN,MAOwBF,IAErCG,MAAO,kBAAMF,eAAeG,QATf,QAUbC,GAAI,kBAAMJ,eAAeG,QATjB,U,kBCFZ9C,EAAOC,QAAU,CACb+C,IAAK,CACDC,iBAAkB,CAAC,EAAG,GAAI,GAAI,IAAK,KACnCC,YAAa,M,sPCCfC,EAAY,SAACC,GACf,OAAO,IAAIC,UAAW,CACxBD,KAAM,IAAIE,KAAKF,GACfG,SAAUC,IACVC,OAAQC,OAGGC,EAAU,SAACP,GACvB,MAAO,CACND,EAAUC,GAAMQ,OAAO,qBACvBT,EAAUC,GAAMQ,OAAO,W,OCoDVC,EA7DS,SAAC,GAOnB,EANFC,KAMG,IALHV,EAKE,EALFA,KACAW,EAIE,EAJFA,YACAC,EAGE,EAHFA,YACAC,EAEE,EAFFA,OACAC,EACE,EADFA,OACE,EAE0BC,mBAAS,MAFnC,mBAEKC,EAFL,KAEaC,EAFb,OAG0BF,mBAAS,MAHnC,mBAGKG,EAHL,KAGaC,EAHb,OAIgCJ,mBAAS,MAJzC,mBAIKK,EAJL,KAIgBC,EAJhB,KAsBF,OAjBAC,qBAAU,WACND,EAAad,EAAQP,GAAM,IACvBa,EAASC,GAETG,EAAU,iBACVE,EAAU,iBACHN,IAAWC,GAElBG,EAAU,iBACVE,EAAU,mBAGVA,EAAU,iBACVF,EAAU,mBAEf,CAACjB,EAAMa,EAAQC,IAGd,eAACS,EAAA,EAAD,CAAMC,OAAO,OAAOC,UAAU,oBAA9B,UAEI,cAACF,EAAA,EAAKG,KAAN,UACI,eAACC,EAAA,EAAD,CAAKF,UAAU,sBAAf,UACI,sBAAMA,UAAU,QAAhB,SAAyBd,IACzB,sBACIc,UAAS,2BAAsBT,EAAtB,6BADb,SAEKH,IAGL,sBACIY,UAAS,2BAAsBP,EAAtB,6BADb,SAEKJ,IAEL,sBAAMW,UAAU,QAAhB,SAAyBb,SAGjC,cAACW,EAAA,EAAKK,OAAN,CAAaH,UAAU,MAAvB,SACI,eAACI,EAAA,EAAD,CACIC,QAAQ,eACRC,OAAK,EACLC,KAAK,KACLP,UAAU,qBAJd,UAKSL,EACD,mBAAGK,UAAU,uBAAuBQ,cAAY,kBC9BzDC,EAzBG,SAAC,GAAc,IAAbC,EAAY,EAAZA,OAEhB,OADAC,QAAQC,IAAIF,GAER,cAAC,WAAD,UACMA,EAAOG,OAASH,EAAOI,KAAI,SAAAC,GAAK,OAC9B,cAAC,EAAD,CACI9B,KAAM8B,EAAM9B,KACZV,KAAMwC,EAAMxC,KACZW,YAAa6B,EAAMC,QAAQ,GAAGC,KAC9B9B,YAAa4B,EAAMC,QAAQ,GAAGC,KAC9B7B,OAAQ2B,EAAMC,QAAQ,GAAGD,MACzB1B,OAAQ0B,EAAMC,QAAQ,GAAGD,OANPA,EAAMG,WAShC,cAACpB,EAAA,EAAD,CAAME,UAAU,8BAA8BD,OAAO,SAArD,SACI,cAACD,EAAA,EAAKG,KAAN,CAAWD,UAAU,cAArB,SACI,cAACF,EAAA,EAAKqB,KAAN,qK,yCClBPC,EAAQ,SAACC,GAClBC,IAAM9D,MAAM6D,EAAM,CAEdE,SAAU,YACVC,cAAc,EACdC,KAAM,mBAAGC,MAAO,CAACC,MAAM,SAAU3B,UAAU,cAAcQ,cAAY,YAKhEoB,EAAK,SAACP,GACfC,IAAMO,QAAQR,EAAM,CAEhBE,SAAU,WACVC,cAAc,EACdC,KAAM,mBAAGC,MAAO,CAACC,MAAM,SAAU3B,UAAU,cAAcQ,cAAY,YAKhEsB,EAAS,SAACT,GACnBC,IAAMS,KAAKV,EAAM,CAEbE,SAAU,aACVC,cAAc,EACdC,KAAM,mBAAGC,MAAO,CAACC,MAAM,SAAU3B,UAAU,aAAaQ,cAAY,YAI/DwB,EAAY,SAACX,GAOtBC,IAAMW,KAAKZ,EAAM,CACba,KAAM,OACNX,SAAU,aACVC,cAAc,EACdC,KAAM,mBAAGC,MAAO,CAACC,MAAM,SAAU3B,UAAU,cAAcQ,cAAY,YCvC7E2B,IAAMC,SAASC,QAAQC,KAAK,gBAAkB,mBAC9CH,IAAMC,SAASC,QAAQE,IAAI,gBAAkB,mBAG7CJ,IAAMK,aAAaC,QAAQC,KACvB,SAACC,GACG,IAAM9E,EAAQ+E,iBAAe5E,QAI7B,OAHW2E,EAAON,QAAQQ,cAAtBhF,EAAO,iBAAyCA,GAChB,GAE7B8E,KAEX,SAACnF,GAEG,OAAOsF,QAAQC,OAAOvF,MAiB9B2E,IAAMK,aAAa/E,SAASiF,IAAI,MAAM,SAAClF,GACnC,IAAMwF,EACFxF,EAAMC,UACND,EAAMC,SAASC,QAAUuF,SAAOnG,YAChCU,EAAMC,SAASC,OAASuF,SAAO3F,oBA0BnC,OArBIE,EAAMC,SAASC,SAAWuF,SAAOnG,WACjCsE,EAAM,0VACC5D,EAAMC,SAASC,SAAWuF,SAAOlG,aACxCqE,EAAM,+SACC5D,EAAMC,SAASC,SAAWuF,SAAOjG,UACxCoE,EAAM,oMACC5D,EAAMC,SAASC,SAAWuF,SAAO/F,cAExCkE,EAAM,2MACC5D,EAAMC,SAASC,SAAWuF,SAAO9F,SACxC6E,EAAU,+SACHxE,EAAMC,SAASC,SAAWuF,SAAO7F,eACxCgE,EAAM,uRAEC5D,EAAMC,SAASC,SAAWuF,SAAO5F,oBACxC+D,EAAM,wOACE4B,GAER5B,EAAM,sUAGH0B,QAAQC,OAAOvF,MAG1B,IAOe0F,EAPF,CACTC,IAAKhB,IAAMgB,IACXb,KAAMH,IAAMG,KACZC,IAAKJ,IAAMI,IACXa,OAAQjB,IAAMiB,QCpEXC,EAAUC,SAAVD,OAuDQE,EArDM,CACjBC,OAAQ,SAACC,GACL,OAAOP,EAAKZ,KAAL,UACAe,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAO/H,QACzCoI,KAAKC,UAAUF,KAGvBG,OAAQ,SAACH,GAEL,OADA9C,QAAQC,IAAR,UAAeyC,EAAOhI,KAAtB,YAA8BgI,EAAOnH,MAArC,YAA8CmH,EAAO9H,SAC9C2H,EAAKZ,KAAL,UACAe,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAO9H,QACzCmI,KAAKC,UAAUF,KAGvBI,UAAW,SAACC,GACR,OAAOZ,EAAKC,IAAL,UACAE,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAO/G,OADtC,YACgDwH,KAG3DC,cAAe,WACX,OAAOb,EAAKC,IAAL,UAAYE,EAAOhI,KAAnB,YAA2BgI,EAAOnH,MAAlC,YAA2CmH,EAAO/G,UAE7D0H,iBAAkB,WAEd,OAAOd,EAAKC,IAAL,UAAYE,EAAOhI,KAAnB,YAA2BgI,EAAOnH,MAAlC,YAA2CmH,EAAOlH,eAE7D8H,kBAAmB,SAACC,GAChB,OAAOhB,EAAKX,IAAL,UACAc,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAOlH,aACzCuH,KAAKC,UAAUO,KAGvBC,iBAAkB,SAACC,GACf,OAAOlB,EAAKX,IAAL,UACAc,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAOlH,YADtC,YACqDkH,EAAOjH,gBAC/DsH,KAAKC,UAAUS,KAGvBC,aAAc,WACV,OAAOnB,EAAKC,IAAL,UAAYE,EAAOhI,KAAnB,YAA2BgI,EAAOnH,MAAlC,YAA2CmH,EAAOlH,YAAlD,YAAiEkH,EAAOhH,WAEnFiI,WAAY,SAACC,GACT,OAAOrB,EAAKC,IAAL,UACAE,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAOlH,YADtC,YACqDkH,EAAOhH,QAD5D,YACuEkI,KAGlFC,gBAAiB,SAACV,GACd,OAAOZ,EAAKC,IAAL,UACAE,EAAOhI,KADP,YACegI,EAAOnH,MADtB,YAC+BmH,EAAO9G,eADtC,YACwDuH,MChDhET,EAAUC,SAAVD,OAqBQoB,EAnBM,CAEjBC,YAAa,WACT,OAAOxB,EAAKC,IAAL,UAAYE,EAAOhI,KAAnB,YAA2BgI,EAAO7G,SAE7CmI,WAAY,WACR,OAAOzB,EAAKC,IAAL,UAAYE,EAAOhI,KAAnB,YAA2BgI,EAAO7G,MAAlC,YAA2C6G,EAAO5G,QAE7DmI,eAAe,WAAD,4BAAE,WAAMd,GAAN,mBAAAe,EAAA,0DACRf,EADQ,gCAC6BP,EAAaM,UAAUC,GADpD,gBACMgB,EADN,EACMA,KAAMpH,EADZ,EACYA,OADZ,gCAGL,IAAIoF,SAAQ,SAACiC,EAAShC,GACV,OAAXe,GAAiBf,EAAO,MACxBrF,IAAWuF,SAAOrG,YAAYmI,EAAQD,EAAKE,QAC/CjC,EAAO,UANC,2CAAF,mDAAC,I,kBCyFJkC,E,4MAhGXC,MAAQ,CACJC,WAAY,GACZC,YAAa,GACbC,cAAc,EACdC,SAAS,G,EA6BbC,kBAAoB,WAChB,EAAKC,SAAS,CAAEH,cAAc,K,EAGlCI,mBAAqB,WACjB,EAAKD,SAAS,CAAEH,cAAc,K,uDA/BlC,WAAqB,IAAD,OAChB1E,QAAQC,IAAI,kBAAmB8E,KAAKC,MAAMC,QAG1C,sBAAC,8BAAAf,EAAA,6DACG,EAAKW,SAAS,CAAEF,SAAS,IAD5B,SAEkCb,EAAaC,cAF/C,mBAEWI,EAFX,EAEWA,KAFX,EAEiBpH,SACCmI,IAAQ5C,OAAOrG,WAHjC,yCAGoDkI,EAAKgB,UAHzD,gCAIU,IAJV,0CAAD,GAMKC,MAAK,SAACC,GACHA,EAASA,EAAOC,UAChB,EAAKT,SAAS,CACVL,WAAYa,EAAOE,QAAO,SAACC,GAAD,OAAUA,EAAKC,UACzChB,YAAaY,EAAOE,QAAO,SAACC,GAAD,OAAWA,EAAKC,UAC3Cd,SAAS,OAIhBe,OAAM,SAACC,GAGJ,EAAKd,SAAS,CAAEJ,YAAa,GAAIE,SAAS,S,oBAatD,WAAS,MAI2CI,KAAKR,MAA/CC,EAJD,EAICA,WAAYC,EAJb,EAIaA,YAAaC,EAJ1B,EAI0BA,aAG/B,OACI,eAACkB,EAAA,EAAD,WACI,eAACrG,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIC,QACIgF,EACM,kBACA,kBAEVrF,UAAU,4BACVyG,QAASf,KAAKH,kBAPlB,oEASI,mBACIvF,UAAU,yBACVQ,cAAY,cAGxB,cAACgG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIC,QACKgF,EAEK,kBADA,kBAGVrF,UAAU,4BACVyG,QAASf,KAAKD,mBAPlB,0EASI,mBACIzF,UAAU,yBACVQ,cAAY,iBAI5B,cAACN,EAAA,EAAD,UACI,cAACsG,EAAA,EAAD,UAEI,cAAC,EAAD,CACI9F,OAAQ2E,EAAeF,EAAaC,e,GAxFtCsB,a,gBCYXhL,G,OAhBG,WACd,OACI,eAACoE,EAAA,EAAD,CAAMC,OAAO,UAAUC,UAAU,qBAAjC,UACI,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,iFACA,eAACF,EAAA,EAAKG,KAAN,CAAWD,UAAU,aAArB,UACI,cAACF,EAAA,EAAKqB,KAAN,2IACA,eAACrB,EAAA,EAAKqB,KAAN,sBAAmB,mBAAGyF,KAAK,0BAAR,sCACnB,cAAC9G,EAAA,EAAKqB,KAAN,0CACA,cAACrB,EAAA,EAAKqB,KAAN,iHACA,cAACrB,EAAA,EAAKqB,KAAN,gCACA,cAACrB,EAAA,EAAKqB,KAAN,qCCMDxF,EAhBG,WACd,OACI,eAACmE,EAAA,EAAD,CAAMC,OAAO,OAAOC,UAAU,qBAA9B,UACI,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,iFACA,eAACF,EAAA,EAAKG,KAAN,CAAWD,UAAU,aAArB,UACI,cAACF,EAAA,EAAKqB,KAAN,2IACA,eAACrB,EAAA,EAAKqB,KAAN,sBAAmB,mBAAGyF,KAAK,0BAAR,sCACnB,cAAC9G,EAAA,EAAKqB,KAAN,0CACA,cAACrB,EAAA,EAAKqB,KAAN,iHACA,cAACrB,EAAA,EAAKqB,KAAN,gCACA,cAACrB,EAAA,EAAKqB,KAAN,oC,0BCYD0F,EAtBI,SAAC,GAAiB,IAAfvB,EAAc,EAAdA,QAAc,EACAhG,mBAAS,GADT,mBACzBwH,EADyB,KACfC,EADe,KAEhClH,qBAAU,WACNkH,EAAYC,KAAKC,MAAsB,IAAhBD,KAAKE,aAC7B,IACHC,2BAAgB,WACZC,SAASC,KAAK3F,MAAQ,CAAE4F,UAAW,QACnCF,SAASC,KAAK3F,MAAQ,CAAE6F,OAAQ,UACjC,CAACjC,EAASwB,IAEb,IAAMU,EACFV,EAAW,IAAM,EACb,cAAC,UAAD,CAASW,KAAM,EAAGC,cAAepC,IACjCwB,EAAW,IAAM,EACjB,cAAC,UAAD,CAASW,KAAM,EAAGC,cAAepC,IAEjC,cAAC,QAAD,CAAOmC,KAAM,EAAGC,cAAepC,IAGvC,OAAO,cAAC,WAAD,UAAWA,EAAUkC,EAAiB,QCd3CG,E,4MAGFzC,MAAQ,CACJ0C,WAAW,EACXC,UAAW,GACXC,SAAU,GACVxC,SAAS,G,EAGbyC,aAAe,kBAAM,EAAKvC,SAAS,CAAEoC,WAAW,K,EAChDI,YAAc,kBAAM,EAAKxC,SAAS,CAAEoC,WAAW,K,EAE/CK,kB,uCAAoB,WAAOC,GAAP,2BAAArD,EAAA,6DAChBqD,EAAMC,iBACN,EAAK3C,SAAS,CAAEF,SAAS,IAFT,EAGgB,EAAKJ,MAA7B2C,EAHQ,EAGRA,UAAWC,EAHH,EAGGA,SACbrE,EAAO,CAAEoE,UAAWO,OAAOP,GAAYC,YAJ7B,kBAMmBvE,EAAaK,OAAOH,GANvC,gBAMJ/F,EANI,EAMJA,OAAQoH,EANJ,EAMIA,KACZpH,IAAWmI,IAAQ5C,OAAOrG,aAC1BgG,iBAAejF,UAAUmH,EAAKhB,OAAQgB,EAAKjH,OAC3C,EAAK8H,MAAM0C,QAAQC,QAAQ,MATnB,kDAaZ,EAAK9C,SAAS,CAAEsC,SAAU,KACrBjC,IAAQ5C,OAAO1F,gBAAf,OACD+D,IAAM9D,MACF,8OACA,CAAE+D,SAAU,YAAaC,cAAc,IAjBnC,QAoBhB,EAAKgE,SAAS,CAAEF,SAAS,IApBT,0D,wDAuBpBiD,sBAAwB,a,4CAExB,WAAU,IAAD,SAC+C7C,KAAKR,MAAjD0C,EADH,EACGA,UAAWC,EADd,EACcA,UAAWC,EADzB,EACyBA,SAAUxC,EADnC,EACmCA,QAExC,OACI,eAAC,WAAD,WACI,cAAC,EAAD,CAAYA,QAASA,IACrB,eAAClF,EAAA,EAAD,CAAQC,QAAQ,kBAAkBoG,QAASf,KAAKsC,YAAhD,UACI,mBAAGhI,UAAU,kBAAkBQ,cAAY,SAD/C,yEAKA,eAACgI,EAAA,EAAD,CACIC,SAAS,SACTC,KAAMd,EACNe,OAAQjD,KAAKqC,aAHjB,UAII,cAACS,EAAA,EAAM7B,OAAP,CAAciC,aAAW,IAEzB,cAACJ,EAAA,EAAMvI,KAAP,UACI,eAAC4I,EAAA,EAAD,CACI7I,UAAU,iBACV8I,SAAU,SAACZ,GAAD,OAAW,EAAKD,kBAAkBC,IAFhD,UAGI,eAACW,EAAA,EAAKE,MAAN,CAAY/I,UAAU,mBAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,6FAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLlC,UAAU,iBACVkJ,YAAY,aACZC,aAAa,WACbC,MAAOvB,EACPwB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVqC,UAAWyB,EAAEC,OAAOH,cAMpC,eAACP,EAAA,EAAKE,MAAN,CACI/I,UAAU,mBACVwJ,UAAU,oBAFd,UAGI,cAACX,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,yDAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLlC,UAAU,iBACVkJ,YAAY,WACZC,aAAa,mBACbC,MAAOtB,EACPuB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVsC,SAAUwB,EAAEC,OAAOH,cAKnC,uBACA,eAAClJ,EAAA,EAAD,WACI,eAACE,EAAA,EAAD,CACIJ,UAAU,OACVkC,KAAK,SACL7B,QAAQ,kBAHZ,UAII,mBACIL,UAAU,qBACVQ,cAAY,SANpB,8BASA,eAACJ,EAAA,EAAD,CACIJ,UAAU,OACVK,QAAQ,kBACRoG,QAASf,KAAK6C,sBAHlB,UAII,mBACIvI,UAAU,qBACVQ,cAAY,SANpB,qF,GA3GNkG,aA6HX+C,cAAW9B,GC3HpBrM,G,mNAIF4J,MAAQ,CACJ2C,UAAW,GACXC,SAAU,GACV4B,gBAAiB,GACjBC,UAAW,GACXC,SAAU,GACVC,MAAO,GACPvE,SAAS,G,EAGbwE,qBAAuB,SAAC5B,GACpB,EAAK1C,SAAS,CAAEkE,gBAAiBxB,EAAMqB,OAAOH,QAC1C,EAAKlE,MAAM4C,WAAaI,EAAMqB,OAAOH,MACrClB,EAAMqB,OAAOQ,kBACT,ySAGD7B,EAAMqB,OAAOQ,kBAAkB,K,EAE1CC,e,uCAAiB,WAAO9B,GAAP,mCAAArD,EAAA,yDACbqD,EAAMC,iBADO,EAST,EAAKjD,MANL2C,EAHS,EAGTA,UACAC,EAJS,EAITA,SACA4B,EALS,EAKTA,gBACAC,EANS,EAMTA,UACAC,EAPS,EAOTA,SACAC,EARS,EAQTA,QAEAF,EAAUM,OAAOpJ,OAAS,GAAK+I,EAASK,OAAOpJ,OAAS,GAV/C,uBAWTO,EAAM,oQACN,EAAKoE,SAAS,CACVmE,UAAWA,EAAUM,OACrBL,SAAUA,EAASK,SAdd,6BAkBTnC,IAAa4B,EAlBJ,iCAoBL,EAAKlE,SAAS,CAAEF,SAAS,IACnB4E,EAAU,CACZrC,UAAWO,OAAOP,GAClBC,WACA+B,QACAM,UAAWR,EAAY,IAAMC,GAAUtB,QAAQ,OAAQ,MAzBtD,UA4B0B/E,EAAaC,OAAO0G,GA5B9C,iBA4BGxM,EA5BH,EA4BGA,OAAQoH,EA5BX,EA4BWA,KAEZpH,IAAWmI,IAAQ5C,OAAOpG,sBAE1B+E,EAAG,uIACHgB,iBAAejF,UAAUmH,EAAKhB,OAAQgB,EAAKjH,OAC3C,EAAK8H,MAAM0C,QAAQC,QAAQ,MAlC1B,kDAwCL,EAAK9C,SAAS,CAAEF,SAAS,IACrB,KAAI7H,SAASC,SAAWmI,IAAQ5C,OAAO9F,SAEvC2E,EAAO,kdACC+D,IAAQ5C,OAAO1F,gBAAf,OACR6D,EACI,0PA9CH,gCAmDTA,EAAM,qIAnDG,QAqDb,EAAKoE,SAAS,CAAEF,SAAS,IArDZ,0D,kGAwDjB,WAAU,IAAD,SASDI,KAAKR,MAPL2C,EAFC,EAEDA,UACAC,EAHC,EAGDA,SACA4B,EAJC,EAIDA,gBACAC,EALC,EAKDA,UACAC,EANC,EAMDA,SACAC,EAPC,EAODA,MACAvE,EARC,EAQDA,QAGJ,OACI,eAACxF,EAAA,EAAD,CAAMC,OAAO,UAAUC,UAAU,eAAjC,UACI,cAAC,EAAD,CAAYsF,QAASA,IACrB,cAACxF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,4CAAvB,sEAGA,cAACF,EAAA,EAAKG,KAAN,UACI,eAAC4I,EAAA,EAAD,CAAMC,SAAU,SAACZ,GAAD,OAAW,EAAK8B,eAAe9B,IAA/C,UACI,eAACW,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,gCACA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLkI,QAAQ,uBACRC,QAAS,SAACf,GAAD,OAAOA,EAAEC,OAAOQ,kBAAkB,KAC3CO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,oPAGR/J,UAAU,uBACVkJ,YAAY,aACZE,MAAOO,EACPY,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVmE,UAAWL,EAAEC,OAAOH,cAMpC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,iFAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLlC,UAAU,uBACVoK,QAAQ,uBACRC,QAAS,SAACf,GAAD,OAAOA,EAAEC,OAAOQ,kBAAkB,KAC3CO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,qSAGRb,YAAY,YACZE,MAAOQ,EACPW,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVoE,SAAUN,EAAEC,OAAOH,cAMnC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,6FAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLkI,QAAQ,WACRC,QAAS,SAACf,GAAD,OAAOA,EAAEC,OAAOQ,kBAAkB,KAC3CO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,iMAGR/J,UAAU,uBACVkJ,YAAY,aACZE,MAAOvB,EACPsB,aAAa,WACboB,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVqC,UAAWyB,EAAEC,OAAOH,cAMpC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,4CACA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,QACLkI,QAAQ,QACRC,QAAS,SAACf,GAAD,OAAOA,EAAEC,OAAOQ,kBAAkB,KAC3CO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,oUAGR/J,UAAU,uBACVkJ,YAAY,SACZE,MAAOS,EACPU,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CAAEqE,MAAOP,EAAEC,OAAOH,cAK5C,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,yDACA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLkI,QAAQ,UACRC,QAAS,SAACf,GAAD,OAAOA,EAAEC,OAAOQ,kBAAkB,KAC3CO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,uSAGR/J,UAAU,uBACVkJ,YAAY,WACZE,MAAOtB,EACPqB,aAAa,eACboB,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CACVsC,SAAUwB,EAAEC,OAAOH,cAMnC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,wFAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLlC,UAAU,uBACVkJ,YAAY,mBACZE,MAAOM,EACPa,SAAS,WACTlB,SAAU,SAACnB,GAAD,OACN,EAAK4B,qBAAqB5B,SAKtC,eAAC9H,EAAA,EAAD,CACI8B,KAAK,SACLlC,UAAU,iCAFd,UAGI,mBACIA,UAAU,uBACVQ,cAAY,SALpB,gDAUR,eAACV,EAAA,EAAKK,OAAN,CAAaH,UAAU,gCAAvB,2KACqC,cAAC,EAAD,IADrC,kC,GAnPK0G,cA2PN+C,eAAWnO,GC5PpBkP,I,mNAGFtF,MAAQ,CACJ2C,UAAW,GACXC,SAAU,GACVxC,SAAS,G,EAGb2C,kB,uCAAoB,WAAOC,GAAP,2BAAArD,EAAA,6DAChBqD,EAAMC,iBACN,EAAK3C,SAAS,CAAEF,SAAS,IAFT,EAGgB,EAAKJ,MAA7B2C,EAHQ,EAGRA,UAAWC,EAHH,EAGGA,SACbrE,EAAO,CAAEoE,UAAWO,OAAOP,GAAYC,YAJ7B,kBAMmBvE,EAAaK,OAAOH,GANvC,gBAMJ/F,EANI,EAMJA,OAAQoH,EANJ,EAMIA,KACZpH,IAAWmI,IAAQ5C,OAAOrG,aAC1B+D,QAAQC,IAAIkE,GACZlC,iBAAejF,UAAUmH,EAAKhB,OAAQgB,EAAKjH,OAC3C,EAAK8H,MAAM0C,QAAQC,QAAQ,MAVnB,kDAcZ3H,QAAQC,IAAR,MACA,EAAK4E,SAAS,CAAEsC,SAAU,KACrBjC,IAAQ5C,OAAO1F,gBAAf,OACD6D,EACI,+OAlBI,QAsBhB,EAAKoE,SAAS,CAAEF,SAAS,IAtBT,0D,kGAyBpB,WAAU,IAAD,SACoCI,KAAKR,MAAtC2C,EADH,EACGA,UAAWC,EADd,EACcA,SAAUxC,EADxB,EACwBA,QAC7B,OACI,eAACxF,EAAA,EAAD,CAAMC,OAAO,UAAUC,UAAU,kBAAjC,UACI,cAACF,EAAA,EAAK6G,OAAN,CACI5G,OAAO,UACPC,UAAU,2BAFd,iFAKA,cAAC,EAAD,CAAYsF,QAASA,IACrB,cAACxF,EAAA,EAAKG,KAAN,CAAWD,UAAU,eAArB,SACI,eAAC6I,EAAA,EAAD,CAAMC,SAAU,SAACZ,GAAD,OAAW,EAAKD,kBAAkBC,IAAlD,UACI,cAACW,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLiH,aAAa,WACbnJ,UAAU,0BACVkJ,YAAY,kFACZE,MAAOvB,EACPwB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CAAEqC,UAAWyB,EAAEC,OAAOH,WAG5C,uBACA,cAACP,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLiH,aAAa,mBACbnJ,UAAU,0BACVkJ,YAAY,8CACZE,MAAOtB,EACPuB,SAAU,SAACC,GAAD,OACN,EAAK9D,SAAS,CAAEsC,SAAUwB,EAAEC,OAAOH,WAG3C,uBACA,cAACtJ,EAAA,EAAKK,OAAN,CAAaH,UAAU,gCAAvB,SACI,eAACE,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACI8B,KAAK,SACL7B,QAAQ,UACRL,UAAU,0BAHd,UAII,mBACIA,UAAU,qBACVQ,cAAY,SANpB,gCAUJ,cAACgG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIJ,UAAU,0BACVK,QAAQ,UAFZ,UAGI,mBACIL,UAAU,qBACVQ,cAAY,SALpB,kG,GAlFRkG,cAoGb+C,eAAWe,IC1GnBnH,GAAUC,SAAVD,OAwBQoH,GAvBQ,CACnBC,aAAc,SAACC,GACX,OAAOzH,EAAKZ,KAAL,UACAe,GAAOhI,KADP,YACegI,GAAOvH,QADtB,YACiCuH,GAAO1G,kBAC3C+G,KAAKC,UAAUgH,KAGvBC,kBAAmB,WACf,OAAO1H,EAAKC,IAAL,UACAE,GAAOhI,KADP,YACegI,GAAOvH,QADtB,YACiCuH,GAAO1G,oBAGnDkO,gBAAiB,WACb,OAAO3H,EAAKC,IAAL,UAAYE,GAAOhI,KAAnB,YAA2BgI,GAAOvH,WAE7CgP,WAAY,SAACC,EAAUJ,GACnB,OAAOzH,EAAKX,IAAL,UACAc,GAAOhI,KADP,YACegI,GAAOvH,QADtB,YACiCuH,GAAO1G,iBADxC,YAC4DoO,GAC/DrH,KAAKC,UAAUgH,M,oBC4CZK,GA5DO,WAAO,IAAD,EACM1L,mBAAS,IADf,mBACjB2L,EADiB,KACRC,EADQ,KAgCxB,OA5BArL,qBAAU,WACN,sBAAC,gCAAAgF,EAAA,+EAEsC4F,GAAeI,kBAFrD,gBAEenN,EAFf,EAEeA,OAAQoH,EAFvB,EAEuBA,KACZpH,IAAWmI,IAAQ5C,OAAOrG,aAGtBkI,EAAKmG,QAAQpK,QAAQqK,EAAWpG,EAAKmG,QAAQhF,WAEtB,IAAxBnB,EAAKmG,QAAQpK,QACZqK,EAAW,CAAC,CACRC,MAAO,2BACP9J,KAAM,wIAXzB,gDAgBO6J,EAAW,CACP,CACIC,MAAO,qBACP9J,KAAM,6SAnBrB,wDAAD,KAyBD,IAGC,eAACvB,EAAA,EAAD,CAAME,UAAU,iBAAiBD,OAAO,UAAxC,UACI,cAACD,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,2BAAvB,qEAGA,cAACF,EAAA,EAAKG,KAAN,CAAWD,UAAU,aAArB,SACKiL,EAAQpK,QAAUoK,EAAQnK,KAAI,SAAC6J,GAC5B,OACI,eAAC,WAAD,WACI,eAACS,GAAA,EAAD,CAAO/K,QAAQ,OAAf,UACI,mBACIL,UAAU,iBACVQ,cAAY,SAChB,sBACIkB,MAAO,CAAE2J,MAAO,MAAOC,SAAU,QADrC,SAEKX,EAAOQ,QANhB,KAQOR,EAAOtJ,QAEd,yBAXWkK,yBC9CxB,OAA0B,sC,sCC8C1BC,GA3CU,WAAO,IAAD,EACFC,cAAY,SAACvG,GAAD,OAAWA,EAAMwG,cAA/C1K,EADoB,EACpBA,QAAS2K,EADW,EACXA,MAChB,OACI,eAACC,GAAA,EAAD,CAAW5L,UAAU,8BAArB,UACI,cAAC4L,GAAA,EAAUC,KAAX,CAAgB7L,UAAU,iBAA1B,SACI,eAACE,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACI,eAAC1G,EAAA,EAAKqB,KAAN,CAAWnB,UAAU,cAArB,UACI,mBACIA,UAAU,kBACVQ,cAAY,SAHpB,uFAOJ,cAACgG,EAAA,EAAD,UACI,cAACsF,GAAA,EAAD,CAAO9L,UAAU,yBAAyBK,QAAQ,UAAU0L,MAAI,EAAhE,SACK/K,WAKjB,cAAC4K,GAAA,EAAUC,KAAX,CAAgB7L,UAAU,iBAA1B,SACI,eAACE,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACI,eAAC1G,EAAA,EAAKqB,KAAN,CAAWnB,UAAU,cAArB,UACI,mBACIA,UAAU,qBACVQ,cAAY,SAHpB,4EAOJ,cAACgG,EAAA,EAAD,UACI,cAACsF,GAAA,EAAD,CAAO9L,UAAU,yBAAyBK,QAAQ,UAAU0L,MAAI,EAAhE,SACKJ,eCpChBK,GAAS,SAAChH,GAAD,MAAa,CAC/B9C,KAAM,UACN+J,QAASjH,IAwBAkH,GAAU,SAACC,GAAD,MAAW,CAC9BjK,KAAM,WACN+J,QAASE,IA4BAC,GAAsB,SAAC7H,GAAD,MAAe,CAC9CrC,KAAM,sBACN+J,QAAS1H,IAGA8H,GAAgB,SAACpL,EAAMqL,EAAUjL,GAAjB,MAA2B,CACpDa,KAAM,eACN+J,QAAS,CAAEhL,OAAMqL,WAAUjL,U,UCNhBkL,GApDK,SAAC,GAAkB,IAAhBD,EAAe,EAAfA,SAAe,EACAhN,mBAAS,IADT,mBAC3BkN,EAD2B,KAChBC,EADgB,KAE5BC,EAAUjB,cAAY,SAACvG,GAAD,OAAWA,EAAMwH,WACvCC,EAAWC,eACXC,EAAKpB,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UAWxC,OACI,eAAC6D,EAAA,EAAD,CAAMC,SAAU,SAACZ,GAAD,OAVG,SAACA,GAChBsE,IAEAtE,EAAMC,iBACNwE,EAASN,GAAcQ,EAAG1C,SAAUmC,EAAUE,IAC9CC,EAAa,KAKUK,CAAe5E,IAA1C,UACI,cAAChI,EAAA,EAAD,CAAKF,UAAU,qBAAf,SACI,cAACoL,GAAA,EAAD,CAAOpL,UAAU,mBAAmBK,QAAQ,OAA5C,SACKqM,GAAWA,EAAQK,SAChBL,EAAQK,SAAS1L,KAEjB,mBAAGrB,UAAU,MAAb,mBAIZ,cAACE,EAAA,EAAD,CAAKF,UAAU,qBAAf,SACI,eAACgN,GAAA,EAAD,CAAYhN,UAAU,QAAtB,UACI,cAACgN,GAAA,EAAWC,QAAZ,CAAoBvL,MAAO,CAAEwL,MAAO,OAApC,SACI,cAAC9M,EAAA,EAAD,CACI8B,KAAK,SACLlC,UAAU,UACVK,QAAQ,eAHZ,SAII,mBACIL,UAAU,oBACVQ,cAAY,aAIxB,cAACwM,GAAA,EAAWC,QAAZ,CAAoBvL,MAAO,CAAEwL,MAAO,OAApC,SACI,cAACrE,EAAA,EAAKI,QAAN,CACIC,YAAY,8BACZE,MAAOoD,EACPnD,SAAU,SAACC,GAAD,OAAOmD,EAAanD,EAAEC,OAAOH,QACvCpJ,UAAU,0BCxBvBmN,I,MApBA,SAAC,GAA6B,IAA5BC,EAA2B,EAA3BA,SAASjC,EAAkB,EAAlBA,MAAOkC,EAAW,EAAXA,MAC7B,OACI,cAACzB,GAAA,EAAUC,KAAX,CAAgB7L,UAAU,iBAA1B,SACI,eAACE,EAAA,EAAD,CAAKF,WAAYqN,GAAS,OAA1B,UACI,cAAC7G,EAAA,EAAD,CAAKxG,UAAU,cAAf,SACI,cAACF,EAAA,EAAKqB,KAAN,UAAYgK,MAEhB,cAAC3E,EAAA,EAAD,CAAKxG,UAAWqN,EAAQ,YAAc,cAAtC,SACI,cAACvB,GAAA,EAAD,CACI9L,UAAU,yBACV+L,MAAI,EACJ1L,QAAQ,UAHZ,SAIK+M,aCkGVE,GA/FW,SAAC3H,GAC1B,IAAMkH,EAAKpB,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UAClCuI,EAAa9B,cAAY,SAACvG,GAAD,OAAWA,EAAMqI,cAE1CZ,EAAWC,eAJmB,EAKQtN,oBAAS,GALjB,mBAK7BkO,EAL6B,KAKbC,EALa,KAO9BC,EAAS/H,EAAM+H,OAAS/H,EAAM+H,OAASb,EAPT,EAaVvN,mBAAS,MAbC,mBAa7BqO,EAb6B,KAatBC,EAbsB,KAsCpC,GAvBA/N,qBAAU,WACTc,QAAQC,IAAI2M,GACZK,EACCf,GAAMa,EAAO5J,SAAW+I,EAAG/I,OAASyJ,EAAWM,IAAMN,EAAWV,MAE/D,CAACa,EAAQb,EAAIU,IAChB1N,qBAAU,WACLgN,GAAMa,EAAO5J,SAAW+I,EAAG/I,QAC9B,sBAAC,gCAAAe,EAAA,+EAEgCtB,EAAae,WAC3CoJ,EAAO5J,QAHT,gBAESpG,EAFT,EAESA,OAAQoH,EAFjB,EAEiBA,KAGZpH,IAAWmI,IAAQ5C,OAAOrG,YAC7B6Q,EAAkB3I,EAAKgJ,UANzB,gDAUCnN,QAAQC,IAAR,MAVD,wDAAD,KAcC,CAACiM,EAAIa,KACHA,EAAQ,OAAO,KAtCgB,IAuC5BK,EAAYL,EAAZK,QACR,OACC,eAACjO,EAAA,EAAD,CAAMC,OAAO,OAAOC,UAAU,sBAA9B,UACC,eAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,oCAAvB,UACC,cAACwG,EAAA,EAAD,UACC,cAAC1G,EAAA,EAAKqB,KAAN,CAAWnB,UAAU,YAArB,SACE0N,EAAOvD,aAGV,cAAC3D,EAAA,EAAD,UACC,cAACwH,GAAA,EAAD,CACChO,UAAU,6BACViO,IAAKC,GACLC,IAAI,2KAKP,cAACrO,EAAA,EAAKG,KAAN,UACC,eAAC2L,GAAA,EAAD,CAAW5L,UAAU,8BAArB,UACE2N,GACA,cAAC/B,GAAA,EAAUC,KAAX,UACC,cAACT,GAAA,EAAD,CAAO/K,QAASsN,EAAMS,MAAQ,SAAW,UAAzC,SACC,eAAChD,GAAA,EAAMiD,QAAP,CAAerO,UAAU,cAAzB,UACE2N,EAAM5M,MADR,MACkB4M,EAAMW,aAK3B,cAAC,GAAD,CAAQjB,OAAK,EAAClC,MAAM,4EAApB,SAAqC4C,EAAQQ,SAC7C,cAAC,GAAD,CAAQlB,OAAK,EAAClC,MAAM,gEAApB,SAAmC4C,EAAQS,OAC3C,cAAC,GAAD,CAAQnB,OAAK,EAAClC,MAAM,gEAApB,SAAmC4C,EAAQU,QAC3C,cAAC,GAAD,CAAQpB,OAAK,EAAClC,MAAM,sEAApB,SAAoC4C,EAAQW,aAG9C,cAAC5O,EAAA,EAAKK,OAAN,UACE0M,IAAOa,EACP,cAAC,GAAD,IACGF,EACH,cAAC,GAAD,CAAalB,SAAUoB,EAAO5J,SAE9B,eAAC1D,EAAA,EAAD,CACCC,QAAS,eACTC,OAAK,EACLmG,QAAS,SAACyB,GAAD,OA3Ee,SAACA,GAC7BA,EAAMqB,OAAOoF,UAAY,iDACzBzG,EAAMqB,OAAOqF,UAAW,EACxBjC,EAASP,GAAoBsB,EAAO5J,SAwEZ+K,CAAqB3G,IAH1C,UAIC,mBACClI,UAAU,yBACVQ,cAAY,SANd,qF,SC9CUiJ,gBA9CY,SAAC,GAAkB,IAAhBqF,EAAe,EAAfA,SACvBpC,EAAUjB,cAAY,SAACvG,GAAD,OAAWA,EAAMwH,WACrCqC,EAAaD,EAAbC,SACFpC,EAAWC,eAwCjB,OAtCA/M,qBAAU,WACT,IACK6M,GAAWA,EAAQK,WAAaL,EAAQK,SAASiC,QAChDD,IAAazL,SAAO2L,OAAOrT,WACb0H,SAAO2L,OAAOzT,SnB8Bd,SAAC,GAAkB,IAAjByF,EAAgB,EAAhBA,KAAMI,EAAU,EAAVA,KAC1BC,YAAM,GAAD,OAAIL,EAAJ,cAAcI,GAAQ,CACvBa,KAAM,OACNX,SAAU,WACVC,cAAc,EACdC,KAAM,mBAAGC,MAAO,CAACC,MAAM,QAASuN,UAAW,SAAUlP,UAAU,mBAAmBQ,cAAY,WmB9BjG2O,CAAOzC,EAAQK,UAEfJ,EJ+C+B,CAChCzK,KAAM,oBI5CP,IAAMkN,EAAgBC,aAAUzM,iBAAe5E,SAG/C,GAAIoR,EAAe,CAAC,IACXE,EAAaF,EAAbE,IACFC,GAAqBD,EADNF,EAARI,KAC2B,GACF/Q,KAAKgR,MAJb,IAAO,GAIeF,EAAiB,GAKlDD,EAAM,IACxBtN,EAAU,+ZAMX,MAAOsE,GACR3F,QAAQC,IAAI0F,MAEX,CAACoG,EAASqC,EAAUpC,IAEhB,QCgTO+C,GAlVa,WAAM,MAIOpQ,mBAAS,MAJhB,mBAI1BqQ,EAJ0B,KAIZC,EAJY,OAK2BtQ,mBAAS,MALpC,mBAK1BuQ,EAL0B,KAKFC,EALE,OAMqBxQ,oBAAS,GAN9B,mBAM1ByQ,EAN0B,KAMLC,EANK,KAO3BhL,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACtCiL,EAAWxE,cAAY,SAACvG,GAAD,OAAWA,EAAM+K,YACxCC,EAAQzE,cAAY,SAACvG,GAAD,OAAWA,EAAMgL,SACrC/D,EAAOV,cAAY,SAACvG,GAAD,OAAWA,EAAMiH,QACpCO,EAAUjB,cAAY,SAACvG,GAAD,OAAWA,EAAMwH,WAXZ,EAYUpN,oBAAS,GAZnB,mBAY1B6Q,EAZ0B,KAYZC,EAZY,KAa3BzD,EAAWC,eAEXyD,EAAoBC,uBAAY,WACrC,OAAOC,aAAY,WACdZ,IACHhP,QAAQC,IAAI,0BACZ+O,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,SACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,WAIN,OACD,CAACf,EAAc3K,IAElBnF,qBAAU,WACTc,QAAQC,IAAI,wBACZ,IAAM+P,EAAUN,IAEhB,OAAO,WACN1P,QAAQC,IAAI,yBACZgQ,cAAcD,MAEb,CAACN,IAEJ,IAAMQ,EAAUP,uBAAY,WAC3B,OAAO,IAAIxN,SAAQ,SAACiC,EAAShC,GAC5B,IAAI+N,EAAS,IAAIC,UAAJ,UACTzN,SAAOD,OAAOtH,cADL,YACsBuH,SAAOD,OAAOpH,gBAEjD6U,EAAOE,OAAS,WACfF,EAAON,KACN9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,SACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,QAGP3L,EAAQ+L,IAGTA,EAAOG,UAAY,SAACxT,GAAc,ILTFwD,EAAMqL,EAAUjL,EKUvCyD,EAASrH,EAATqH,KADwB,EAEPpB,KAAKwN,MAAMpM,GAA5BqM,EAFwB,EAExBA,QAAST,EAFe,EAEfA,IACjB,OAAQS,GACP,IAAK,SAAW,IACPnQ,EAAmB0P,EAAnB1P,QAAS2K,EAAU+E,EAAV/E,MACjBgB,ELlC2C,CAC7CzK,KAAM,oBACN+J,QKiCoB,CAChBjL,UACA2K,WAGF,MAED,IAAK,cAEA+E,GACH/P,QAAQC,IAAI,YAAa8P,GACzB/D,EAAST,GAAQwE,IACjBI,EAAON,KACN9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,SACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,SAOPU,YAAW,WACVzE,ELvDoC,CACxCzK,KAAM,8BKuDA,KAEJ,MAED,IAAK,qBACAwO,EAAIW,UAAYpB,EAASnM,SAE5BgM,EAA0BY,GAC1BV,GAAuB,IAKxB,MAED,IAAK,sBAAwB,IACpBsB,EAAuBZ,EAAvBY,OAAQC,EAAeb,EAAfa,WAEZD,EACH1P,EAAG,GAAD,OAAI2P,EAAJ,oJAEFvP,EAAU,GAAD,OACLuP,EADK,+IAGV5E,EAASP,GAAoB,OAC7B,MAEc,IAAK,iBAIpB,IAAK,gBAIU,IAAK,kBAGnB,MAED,IAAK,OACJO,GLnF6B1L,EKoFTyP,EAAIzP,KLpFWqL,EKoFLoE,EAAIpE,SLpFWjL,EKoFDqP,EAAIrP,KLpFO,CACzDa,KAAM,kBACN+J,QAAS,CAAEhL,OAAMqL,WAAUjL,WK4F3B0D,EAAQ+L,IAGTA,EAAOU,QAAU,SAAChU,GAEjBsT,EAAOW,QACP1O,EAAOvF,IAGRsT,EAAOY,QAAU,WAEhB/Q,QAAQC,IAAI,8BACZwQ,YAAW,WACV,sBAAC,4BAAAvM,EAAA,kEAEClE,QAAQC,IAAI,iCACCoE,EAHd,gCAG6B6L,IAH7B,8CAGyC,KAHzC,OAGKC,EAHL,KAIClB,EAAgBkB,GAJjB,kDAMCnQ,QAAQC,IAAR,MAND,yDAAD,KASE,KACHmE,EAAQ,YAIR,CAAC4H,EAAUsD,EAAUjL,IAIxBnF,qBAAU,WACLsQ,GAAgBnL,GACnB,sBAAC,4BAAAH,EAAA,kEAEClE,QAAQC,IAAI,iCACCoE,EAHd,gCAG6B6L,IAH7B,8CAGyC,KAHzC,OAGKC,EAHL,KAIClB,EAAgBkB,GAJjB,kDAMCnQ,QAAQC,IAAR,MAND,yDAAD,KAUC,CAACuP,EAAcnL,EAAQ6L,IAI1BhR,qBAAU,WACLsM,EAAKjK,MAGHiK,EAAKlL,MAAQ0O,GAAgB3K,GACjC2K,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,OACTgO,SAAUzL,EAAOlB,OACjB4M,IAAKvE,EAAKjK,QAGFiK,EAAKlL,MAEZ0O,GACHA,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,aACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,UAIP,CAAC1L,EAAQmH,EAAM+D,EAAMyB,wBAAyBhC,IAEjD9P,qBAAU,WACLqQ,EAAM0B,eAETjC,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,aACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,CACJnM,SAAU2L,EAAM0B,cAChBC,UAAW7M,EAAOmF,eAKpB,CAAC+F,EAAM0B,cAAejC,EAAc3K,IAEvC,IAAM8M,EAA6B,SAACR,GAEnC3B,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,qBACTgO,SAAUzL,EAAOlB,OACjB4M,IAAK,CACJY,SACAC,WAAYvM,EAAOmF,SACnBkH,QAASxB,EAAuBwB,YAKnCrB,GAAuB,GACvBF,EAA0B,MAC1BnD,EAASP,GAAoB,QAmC9B,OAhCAvM,qBAAU,WACL6M,EAAQqF,OAEXpC,EAAaa,KACZ9M,KAAKC,UAAU,CACd9F,MAAO+E,iBAAe5E,QACtByE,QAAS,OACTgO,SAAUzL,EAAOlB,OACjB4M,IAAKhE,EAAQqF,QAGfpF,ELhNiC,CAChCzK,KAAM,sBKiNN,CAAC8C,EAAQ0H,EAASiD,EAAchD,IAGnC4D,aAAY,WACPyB,OAAOC,UAAUC,OAEf/B,GAEJC,GAAmB,GAGhBD,GAEHC,GAAmB,KAEnB,KAMF,cADA,CACC,WAAD,WACC,cAAC,GAAD,IAEA,eAAC5H,EAAA,EAAD,CACCE,KAAMqH,EACNpH,OAAQ,kBAAMmJ,GAA2B,IAF1C,UAGC,cAACtJ,EAAA,EAAM7B,OAAP,CAAciC,aAAW,IACzB,eAACJ,EAAA,EAAMvI,KAAP,CAAYD,UAAU,aAAtB,UACC,8BACG6P,EACD,cAAC/D,GAAA,EAAD,CACCpK,MAAO,CAAE4J,SAAU,OAAQ6G,OAAQ,MACnCpG,MAAI,EACJ1L,QAAQ,UAHT,SAIEwP,EAAuBgC,YALC,KAD5B,4JAWA,gTAED,cAACrJ,EAAA,EAAMrI,OAAP,CAAcH,UAAU,mBAAxB,SACC,eAACE,EAAA,EAAD,CAAKF,UAAU,QAAf,UACC,cAACwG,EAAA,EAAD,UACC,cAACpG,EAAA,EAAD,CACCC,QAAQ,UACRC,OAAK,EACLmG,QAAS,kBACRqL,GAA2B,IAJ7B,0DASD,cAACtL,EAAA,EAAD,UACC,cAACpG,EAAA,EAAD,CACCE,OAAK,EACLD,QAAQ,SACRoG,QAAS,kBACRqL,GAA2B,IAJ7B,wCChTQM,GA3BI,WACf,IAAMC,EAAgBzP,iBAAe1E,KAC/ByO,EAAWC,eACXqD,EAAWxE,cAAY,SAACvG,GAAD,OAAWA,EAAM+K,YAqB9C,OApBApQ,qBAAU,WACNc,QAAQC,IAAI,8BACRyR,GACA1R,QAAQC,IAAI,eACZ6D,EACKG,eAAeyN,GACftM,MAAK,SAACC,GACH2G,EAASX,GAAOhG,OAGnBK,OAAM,SAACC,GACJqG,EAASX,GAAO,WAKxBW,EAASX,GAAO,SAErB,CAACqG,EAAepC,EAAUtD,IAEtB,MC1BI2F,GAJOC,wBAAc,CAChCC,OAAQ,ICyFG/I,gBAhFI,SAAC9D,GACnB,IAAM8M,EAAUC,qBAAWJ,IACnBvD,EAAapJ,EAAMmJ,SAAnBC,SAEF/J,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACtCiL,EAAWxE,cAAY,SAACvG,GAAD,OAAWA,EAAM+K,YACxC1C,EAAa9B,cAAY,SAACvG,GAAD,OAAWA,EAAMqI,cANnB,EAQSjO,mBAAS,MARlB,mBAQtBqT,EARsB,KAQTC,EARS,OASWtT,mBAAS,MATpB,mBAStBuT,EATsB,KASRC,EATQ,KA+C7B,OArCAjT,qBAAU,WACT+S,EAAe,cAAC,GAAD,OACb,IAIH/S,qBAAU,WACTc,QAAQC,IAAI,4CACZ,IAAMmS,EAAyB,WAC1BN,EAAQD,SAAWQ,UAAQC,OAC9BH,EACC9N,EAAS,cAAC,GAAD,IAAwB,cAAC,GAAD,KAE9B8N,EAAgB,OAElB/D,IAAazL,SAAO2L,OAAO3T,QAC9BwX,EAAgB,MAChBF,EAAe,OACL7D,IAAazL,SAAO2L,OAAOzT,UAIrCuX,IACI9C,IACCwC,EAAQD,SAAWQ,UAAQE,WAC9BN,EAAe,cAAC,GAAD,CAAmBlF,OAAQuC,MAE1C2C,EAAe,MACfE,EAAgB,UAIlBF,EAAe,cAAC,GAAD,KACfG,OAEC,CAAC/N,EAAQiL,EAAUlB,EAAUxB,EAAYkF,EAAQD,SAGnD,eAAC,WAAD,WACC,cAAC,GAAD,IACCxN,GAAU,cAAC,GAAD,IAEVyN,EAAQD,SAAWQ,UAAQE,WAC3B,eAAChT,EAAA,EAAD,CAAKF,UAAU,gBAAf,UACE6S,GAAgB,cAACrM,EAAA,EAAD,CAAK2M,GAAI,EAAT,SAAaN,IAC9B,cAACrM,EAAA,EAAD,CACCxG,UAAU,UACVmT,GAAIpE,IAAazL,SAAO2L,OAAO3T,OAAS,KAAO,EAFhD,SAGEqK,EAAMyH,WAEPuF,GACA,cAACnM,EAAA,EAAD,CAAK2M,GAAIV,EAAQD,SAAWQ,UAAQC,OAAS,EAAI,EAAjD,SACEN,OAKJ,eAACpM,EAAA,EAAD,WAEEvB,EACA,cAAC9E,EAAA,EAAD,CAAKF,UAAU,gBAAf,SAAgC6S,IAC7B,KACJ,cAAC3S,EAAA,EAAD,CAAKF,UAAU,gBAAf,SAAgC2S,IAChC,cAACzS,EAAA,EAAD,CAAKF,UAAU,gBAAf,SAAgC2F,EAAMyH,oB,SCxE5BgG,GAbU,SAAC,GAAoD,IAAnDC,EAAkD,EAAlDA,UAAWpS,EAAuC,EAAvCA,KAAMsN,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,KAAME,EAAmB,EAAnBA,MAAOD,EAAY,EAAZA,MAC7D,OACI,+BACI,oBAAI6E,MAAM,MAAV,SAAiBD,IACjB,6BAAKpS,IACL,6BAAKsN,IACL,6BAAKC,IACL,6BAAKE,IACL,6BAAKD,QC+BF8E,GApCI,SAAC,GAAiB,IAAfvS,EAAc,EAAdA,QAClB,OACI,eAAClB,EAAA,EAAD,CAAMC,OAAO,OAAO2B,MAAO,CAAEwL,MAAO,OAAQsG,aAAc,OAA1D,UACI,cAAC1T,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,yDACA,wBAAOA,UAAU,6DAAjB,UACI,uBAAOA,UAAU,UAAjB,SACI,+BACI,oBAAIsT,MAAM,MAAV,eACA,oBAAIA,MAAM,MAAV,qEACA,oBAAIA,MAAM,MAAV,kDACA,oBAAIA,MAAM,MAAV,+DACA,oBAAIA,MAAM,MAAV,qEACA,oBAAIA,MAAM,MAAV,gFAGR,gCACKtS,EAAQF,KAAI,SAACkE,GAAD,OACT,cAAC,GAAD,CAEIqO,UACIrS,EAAQyS,WACJ,SAACC,GAAD,OAAOA,EAAE5P,SAAWkB,EAAOlB,UAC3B,EAER7C,KAAM+D,EAAOmF,SACboE,OAAQvJ,EAAO+I,QAAQQ,OACvBC,KAAMxJ,EAAO+I,QAAQS,KACrBE,MAAO1J,EAAO+I,QAAQW,MACtBD,MAAOzJ,EAAO+I,QAAQU,OAVjBzJ,EAAOlB,oBC2BzB6P,G,4MAxCXzO,MAAQ,CAAElE,QAAS,GAAIsE,SAAS,G,uDAEhC,WAAqB,IAAD,OAChB,sBAAC,8BAAAT,EAAA,6DACG,EAAKW,SAAS,CAAEF,SAAS,IAD5B,SAEkC/B,EAAaQ,gBAF/C,mBAEWe,EAFX,EAEWA,KAFX,EAEiBpH,SACCmI,IAAQ5C,OAAOrG,WAHjC,yCAGoDkI,EAAK9D,SAHzD,gCAIU,IAJV,0CAAD,GAMK+E,MAAK,SAACC,GACH,IAAI4N,EAAW,aAAO5N,GACtB,EAAKR,SAAS,CACVxE,QAAS4S,EAAYC,MACjB,SAACC,EAAIC,GAAL,OACIA,EAAGhG,QAAQQ,OAASuF,EAAG/F,QAAQQ,QAC/BwF,EAAGhG,QAAQS,KAAOsF,EAAG/F,QAAQS,MAC7BsF,EAAG/F,QAAQW,MAAQqF,EAAGhG,QAAQW,SAEtCpJ,SAAS,OAGhBe,OAAM,SAACC,GAGJ,EAAKd,SAAS,CAAExE,QAAS,GAAIsE,SAAS,S,oBAGlD,WAAU,IAAD,EACwBI,KAAKR,MAA1BlE,EADH,EACGA,QAASsE,EADZ,EACYA,QACjB,OACI,eAACpF,EAAA,EAAD,CAAKF,UAAU,eAAf,UACKsF,EAAU,cAAC,EAAD,CAAYA,QAASA,IAAc,KAC9C,cAACpF,EAAA,EAAD,CAAKF,UAAU,gBAAf,SACI,cAAC,GAAD,CAAYgB,QAASA,a,GAlCnB0F,aCLTsN,I,OAAsB,SAACvR,EAASwR,EAAOC,EAAUxD,GAA3B,OAC/BhN,KAAKC,UAAU,CACXlB,UACAwR,QACAC,WACArW,MAAO+E,iBAAe5E,QACtB0S,UAGKG,GAAU,SAACsD,EAAUD,EAAUE,GACxC,OAAO,IAAItR,SAAQ,SAACiC,EAAShC,GACzB,IAAIsR,EAAS,IAAItD,UAAJ,UAAiBzN,SAAOD,OAAOtH,cAA/B,YAAgDuH,SAAOD,OAAOrH,kBAC3EqY,EAAOrD,OAAS,WACZqD,EAAO7D,KAAKwD,GAAoB,OAAQG,EAAUD,EAAUE,IAC5DrP,EAAQsP,IAGZA,EAAO7C,QAAU,SAAChU,GAEd6W,EAAO5C,QACP1O,EAAOvF,IAGX6W,EAAO3C,QAAU,WAEb3M,EAAQ,WC4BLuP,OA/Bf,SAA4BC,GA4BxB,OAAO1D,cA3BiB,SAAC3L,GAAD,MAAY,CAChCF,OAAQE,EAAMF,OACdiL,SAAU/K,EAAM+K,SAChB9D,KAAMjH,EAAMiH,KACZoB,WAAYrI,EAAMqI,WAClB2C,MAAOhL,EAAMgL,UAGU,SAACvD,GAAD,MAAe,CACtCX,OAAQ,SAAChH,GAAD,OAAY2H,EAASX,GAAOhH,KACpCwP,aAAc,SAACvE,GAAD,OAActD,EblBR,SAACsD,GAAD,MAAe,CACvC/N,KAAM,gBACN+J,QAASgE,GagBgCuE,CAAavE,KAClDwE,cAAe,kBAAM9H,EbdO,CAChCzK,KAAM,oBacFgK,QAAS,SAACC,GAAD,OAAUQ,EAAST,GAAQC,KACpCuI,UAAW,kBAAM/H,EbRO,CAC5BzK,KAAM,gBaQFyS,UAAW,SAACzT,GAAD,OAAYyL,EbNN,SAACzL,GAAD,MAAa,CAClCgB,KAAM,cACN+J,QAAS/K,GaI2ByT,CAAUzT,KAC1C0T,iBAAkB,SAACC,GAAD,OAAalI,EbFP,SAACkI,GAAD,MAAc,CAC1C3S,KAAM,oBACN+J,QAAS4I,GaAmCD,CAAiBC,KACzDC,gBAAiB,kBAAMnI,EbEO,CAClCzK,KAAM,sBaFF6S,oBAAqB,kBAAMpI,EbjCO,CACtCzK,KAAM,oBaiCF8S,aAAc,kBAAMrI,EbtCO,CAC/BzK,KAAM,mBa8CC2O,CAA6C0D,ICCzCU,GAhDS,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,cAAelU,EAAc,EAAdA,QAAc,EAClB1B,mBAAS,MADS,mBAC7C6V,EAD6C,KAClCC,EADkC,KAE9CC,EAASC,cAAYnX,IAAIE,YAAc,EAuB7C,OAtBAwB,qBAAU,WACN,IAAIwL,EAAQ,KACR5J,EAAO,KACPyT,EACIA,GAAiBG,GACjBhK,EAAQ,eACR5J,EACI,mBAAGzB,UAAU,6BAA6BQ,cAAY,WAG1D6K,EAAQ,cACR5J,EACI,mBAAGzB,UAAU,4BAA4BQ,cAAY,WAI7D6K,EAAQ,YACR5J,EAAO,mBAAGzB,UAAU,2BAA2BQ,cAAY,UAE/D4U,EAAa,sBAAKpV,UAAWqL,EAAhB,UAAwB5J,EAAMyT,QAC5C,CAACA,EAAeG,IAGf,cAACvV,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,oBAAvB,SACI,eAACE,EAAA,EAAD,CAAKwB,MAAO,CAAE4J,SAAU,QAAxB,UACI,eAAC9E,EAAA,EAAD,CACI9E,MAAO,CACHwN,UAAW,QACX7D,MAAOrK,EAAQ,GAAGqK,OAH1B,UAKKrK,EAAQ,GAAGsN,MALhB,MAK0BtN,EAAQ,GAAGD,SAErC,cAACyF,EAAA,EAAD,UAAM2O,IACN,eAAC3O,EAAA,EAAD,CACI9E,MAAO,CACHwN,UAAW,OACX7D,MAAOrK,EAAQ,GAAGqK,OAH1B,UAKKrK,EAAQ,GAAGD,MALhB,MAK0BC,EAAQ,GAAGsN,eC8BtCiH,GAtEK,SAAC,GAEjB,IAF+F,IAA5EL,EAA2E,EAA3EA,cAAeM,EAA4D,EAA5DA,UAAWxU,EAAiD,EAAjDA,QAASyU,EAAwC,EAAxCA,MAAOC,EAAiC,EAAjCA,gBAAgBC,EAAiB,EAAjBA,WACzEC,EAAS,GACJC,EAAI,EAAGA,EAAIL,EAAWK,IAAKD,EAAOE,KAAKD,GAGhD,OACI,eAAC/V,EAAA,EAAD,CACIiW,GAAG,cACHhW,OAAO,OACPC,UAAU,gBAHd,UAII,cAAC,GAAD,CAAiBkV,cAAeA,EAAelU,QAASA,IACxD,cAAClB,EAAA,EAAKG,KAAN,CAAWD,UAAU,mBAArB,SACKyV,EACGG,EAAO9U,KAAI,SAACmG,GAAD,OACP,eAAC,WAAD,WACK2O,EAAO9U,KAAI,SAACkV,GAAD,OACR,cAAC9V,EAAA,EAAD,CACIwB,MAAO,CACHuU,UAAW,MACXC,WAAW,GAAD,OAAKZ,cAAYnX,IAAIC,iBAAiB4X,GAAtC,OAHlB,SAKKJ,EAAO9U,KAAI,SAACqV,GAAD,OACR,cAAC/V,EAAA,EAAD,CAMIC,QAASsV,EACT3V,UAAU,mBACV0B,MAEI,OADA+T,EAAMxO,GAAO+O,GAAKG,GAEZ,CACI9K,MAAOrK,EACHyU,EAAMxO,GAAO+O,GACTG,IAEN9K,OAEN,KAEVzN,GACIqJ,EAAQuO,EAAYA,EACpBQ,EAAMR,EACNW,EAEJ1P,QAAS,SAACyB,GAAD,OACLwN,EAAgBxN,IA1BxB,SA6BQ,OADHuN,EAAMxO,GAAO+O,GAAKG,IAEfnV,EACIyU,EAAMxO,GAAO+O,GAAKG,IACpB7H,OA9BFrH,EAAQuO,EAAYA,EACpBQ,EAAMR,EACNW,WAiCpB,6BAIR,mBAAGnW,UAAU,cAAb,uFCvDdoW,G,kDAkCL,aAAe,IAAD,8BACb,gBAjCDlR,MAAQ,CACPyQ,WAAY,eACZ3U,QAAS,CACR,CAECsN,MAAO,mBAAGtO,UAAU,cAAcQ,cAAY,SAC9C6K,MAAO,OACPgL,SAAU,UACVC,UAAW,UACXvV,MAAO,GAER,CAECuN,MAAO,mBAAGtO,UAAU,cAAcQ,cAAY,SAC9C6K,MAAO,UACPgL,SAAU,UACVC,UAAW,SACXvV,MAAO,IAGTwV,KAAM,EACNf,UAAW,EACXC,MAAO,KACPe,YAAQC,EACRvV,OAAQ,KACRwV,oBAAgBD,EAChBE,cAAc,EACdzB,cAAe,EACfvE,QAAS,KACTiG,uBAAwB,MAGX,EAKdC,iBAAmB,SAACC,GAAgB,IAAD,EACC,EAAKnR,MAAhCsK,EAD0B,EAC1BA,SAAUuE,EADgB,EAChBA,cACbvE,GAAY6G,GAChBrS,EACEG,eAAekS,GACf/Q,MAAK,SAACC,GACNwO,EAAaxO,GAAkB,SAE/BK,OAAM,SAACC,GAEPkO,EAAa,UAfH,EAoBduC,qBAAuB,WAAO,IAAD,EACA,EAAK7R,MAAzBsR,EADoB,EACpBA,OAAQxV,EADY,EACZA,QACVgW,EAAU5O,QAAQoO,GAExB,EAAK7Q,MAAMiP,iBAAiB,CAC3B/H,GAAI,CACHuB,MAAOoI,EACPlI,MAAOtN,EAAQwV,GAAQlI,MACvBvN,MAAOC,EAAQwV,GAAQzV,OAExB8M,IAAK,CACJO,MAAO4I,EACP1I,MAAOtN,EAAQgW,GAAS1I,MACxBvN,MAAOC,EAAQgW,GAASjW,UAjCb,EAsCdkW,qBAAuB,WAA4C,IAA3CC,EAA0C,uDAAhC5B,cAAYnX,IAAIE,YACjD,EAAKmH,SAAS,CAAE0P,cAAegC,IAE/B,IAAMvG,EAAUJ,aAAY,WAAO,IAAD,EACE,EAAKrL,MAAhCgQ,EADyB,EACzBA,cAAevE,EADU,EACVA,QACnBuE,GAAiB,EACpBtE,cAAcD,GAGf,EAAKnL,SAAS,CAAE0P,cAAe,EAAKhQ,MAAMgQ,cAAgB,MACxD,KACH,EAAK1P,SAAS,CAAEmL,aAjDH,EAoDdwG,mBAAqB,YAA+B,IAA5BZ,EAA2B,EAA3BA,KAAMnX,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,OAC/B2B,EAAO,aAAO,EAAKkE,MAAMlE,SAC/BA,EAAQ,GAAGD,MAAQ3B,EACnB4B,EAAQ,GAAGD,MAAQ1B,EACnB,EAAKmG,SAAS,CACbxE,UACAuV,SAED,EAAKQ,wBA5DQ,EA+DdK,iBAAmB,WAAO,IAAD,EACoB,EAAKlS,MAAzC0R,EADgB,EAChBA,uBAAwBjG,EADR,EACQA,QAChC0G,aAAaT,GACbS,aAAa1G,IAlEA,EAqEd2G,gBAAkB,SAAC7Z,GAAc,IACxBqH,EAASrH,EAATqH,KADuB,EAEVpB,KAAKwN,MAAMpM,GAAxByS,EAFuB,EAEvBA,IAAK7G,EAFkB,EAElBA,IACb,GAAY,UAAR6G,EAAiB,CACpB,IAAMC,ElCtGDlZ,EkCsGyBoS,GlCtGT3R,OAAO,SkCuG5BiD,EAAU,wEAAD,OAAkBwV,EAAlB,iDACH,GAAY,SAARD,EAAgB,CAAC,IACnBE,EAA2B/G,EAA3B+G,IAAKjC,EAAsB9E,EAAtB8E,UAAWgB,EAAW9F,EAAX8F,OACxB,EAAKhR,SAAS,CAAEgQ,YAAWgB,WAC3B,IAAMkB,EAAgBtP,QAAQoO,GAC9B,EAAKK,iBAAiBY,EAAIC,SACpB,GAAY,SAARH,EAAgB,CAC1B,EAAKJ,mBAAmBzG,GADE,IAElB+E,EAAU/E,EAAV+E,MAER,EAAKjQ,SAAS,CACbiQ,UAED,EAAKsB,4BACC,GAAY,UAARQ,EAIV5W,QAAQC,IAAI,iBAAkB8P,GAC9B,EAAKlL,SAAS,CAAE0P,cAAexE,IAC/B2G,aAAa,EAAKnS,MAAMyL,SACxB,EAAKsG,qBAAqBvG,QACpB,GAAY,WAAR6G,EAAkB,EAAKJ,mBAAmBzG,QAChD,GAAY,WAAR6G,EAAkB,CAAC,IAAD,EACD,EAAK5R,MAAtBX,EADkB,EAClBA,OAAQmH,EADU,EACVA,KACRqJ,EAAc,EAAKtQ,MAAnBsQ,UACFmC,EAASvP,OAAOsI,EAAIkH,UAO1B,EAAKC,sBACJ,EAAKC,mBAAmBH,EAAQnC,GAChC,EAAKuC,YAAYJ,IAGlB,EAAKR,mBAAmBzG,GAExB,EAAKqH,YAAYJ,GAAQK,QACzB,EAAKjB,uBAIL,EAAK7R,MAAMwR,eAAelG,KACzBwD,GACC,gBACA7H,EAAKlL,KACL+D,EAAOlB,QACP,IAIF,EAAKmT,4BACC,GAAY,gBAARM,EAAuB,CAAC,IAC1Bf,EAAW,EAAKtR,MAAhBsR,OAER,EAAKhR,SAAS,CAAE+Q,KAAM7F,IAClBA,IAAQ8F,GAAQ,EAAKS,2BACP,QAARM,GACV,EAAKJ,mBAAmBzG,GACxB,EAAKuH,cACL,EAAKb,oBACa,UAARG,GACVvV,EACC,kSAED,EAAKkW,iBAELvX,QAAQC,IAAI,yBAhJA,EAoJduX,eApJc,uCAoJG,WAAOC,GAAP,qBAAAvT,EAAA,+DACS,EAAKc,MAAtBX,EADQ,EACRA,OAAQmH,EADA,EACAA,KADA,kBAII0E,GAAQ1E,EAAKlL,KAAM+D,EAAOlB,OAAQqI,EAAKjK,MAJ3C,QAIX4O,EAJW,QAKRG,UAAY,EAAKqG,gBACxB,EAAK9R,SAAS,CAAEkR,eAAgB5F,IAC5BsH,GAASA,IAPE,kDASfzX,QAAQC,IAAR,MAGAwQ,YACC,WACCzQ,QAAQC,IAAI,6BACZ,EAAKuX,eAAeC,KAErBA,EAAU,IAAO,KAjBH,0DApJH,wDA4KdC,2BAA6B,WAC5B,OAAO9H,aAAY,WACdyB,OAAOC,UAAUC,OACf,EAAKhN,MAAMyR,eAEfhW,QAAQC,IAAI,aACZ,EAAK4E,SAAS,CAAEmR,cAAc,IAC9B,EAAKwB,eAAe,OAEX,EAAKjT,MAAMyR,eAErBhW,QAAQC,IAAI,iBACZ,EAAK4E,SAAS,CAAEmR,cAAc,OAE7B,OA1LU,EAsNdmB,mBAAqB,SAACH,EAAQW,GAC7B,IACMC,EAAYZ,GAAUW,EAAQA,GAIpC,MAAO,CAAErR,MALSD,KAAKC,MAAM0Q,GAAUW,EAAQA,IAKpBtC,IAHXhP,KAAKC,MAAMsR,EAAYD,GAGEnC,OAFtBoC,EAAYD,IA1NlB,EA8Nd5C,gBAAkB,SAACxN,GAAW,IAAD,EACS,EAAKhD,MAAlCsQ,EADoB,EACpBA,UAAWe,EADS,EACTA,KAAM5F,EADG,EACHA,QADG,EAEO,EAAKhL,MAAhCX,EAFoB,EAEpBA,OAAQiL,EAFY,EAEZA,SAAU9D,EAFE,EAEFA,KAC1B,GAAI8D,EACH,IACC,IAAMuI,EAAqBtQ,EAAMqB,OAGjC,GAAI,EAAKrE,MAAMqR,OAAS,EAAKrR,MAAMsR,OAIlC,OAHA7V,QAAQC,IAAI,EAAKsE,MAAMsR,aAEvB,EAAK2B,eAAe,MAIrB,IAAMM,EAAO,EAAKX,mBACjBU,EAAmB5a,GACnB4X,GAGG,EAAKqC,sBAAsBY,EAAMD,KAGpC,EAAKhT,SAAS,CAAE+Q,MAAOA,EAAO,GAAK,IACnC,EAAK4B,gBAAe,WACnB,EAAKjT,MAAMwR,eAAelG,KACzBwD,GACC,OACA7H,EAAKlL,KACL+D,EAAOlB,OACP0U,EAAmB5a,QActBgT,cAAcD,GACd,EAAKnL,SAAS,CAAE0P,cAAe,KAE/B,MAAO5O,GACR3F,QAAQC,IAAI0F,KA9QD,EAoRduR,sBAAwB,SAACY,EAAMC,GAAgB,IAAD,EACP,EAAKxT,MAAnClE,EADqC,EACrCA,QAASuV,EAD4B,EAC5BA,KAAMZ,EADsB,EACtBA,WACnBgD,EAAS,aAAO,EAAKzT,MAAMuQ,OAC/B,OAAqD,OAAjDkD,EAAUF,EAAKxR,OAAOwR,EAAKzC,KAAKyC,EAAKtC,UACxCwC,EAAUF,EAAKxR,OAAOwR,EAAKzC,KAAKyC,EAAKtC,QAAUI,EAC/C,EAAK/Q,SAAS,CAAEiQ,MAAOkD,IAGvBD,EAAW1Y,UAAX,mCAAmDgB,EAAQuV,GAAMF,UACxDjF,YAAW,WAAOsH,EAAW1Y,UAAX,mCAAmD2V,KAAgB,KAE9F,EAAKiD,yBAAyBH,EAAKxR,MAAOwR,EAAKzC,IAAKyC,EAAKtC,SAElD,IAjSK,EAsSdyC,yBAA2B,SAAC3R,EAAO+O,EAAKG,GAYvC,IAZkD,MAGZ,EAAKjR,MAAnClE,EAH0C,EAG1CA,QAASyU,EAHiC,EAGjCA,MAAOD,EAH0B,EAG1BA,UAClBqD,EAAkBpD,EAAMxO,GAAO+O,GAAKG,GACtC2C,EAAW,EACdC,EAAc,EACdC,EAAqB,EACrBC,EAAqB,EAClBC,EAAqB,EACxBC,EAAqB,EACrBC,EAAqB,EACbvD,EAAI,EAAGA,EAAIL,EAAWK,IAC1BJ,EAAMxO,GAAO+O,GAAKH,KAAOgD,GAAiBC,IAC1CrD,EAAMxO,GAAO4O,GAAGM,KAAY0C,GAAiBE,IAC7CtD,EAAMI,GAAGG,GAAKG,KAAY0C,GAAiBO,IAC3CpD,IAAQG,IACPV,EAAMxO,GAAO4O,GAAGA,KAAOgD,GAC1BG,IACGhD,IAAQ/O,GAASwO,EAAMI,GAAGA,GAAGA,KAAOgD,GACvCK,KAEElD,EAAMG,EAAS,IAAMX,IACpBC,EAAMxO,GAAO4O,GAAGL,EAAYK,EAAI,KAAOgD,GAC1CI,IAEAjD,IAAQ/O,GACRwO,EAAMI,GAAGA,GAAGL,EAAYK,EAAI,KAAOgD,GAEnCM,KAKH,EAAKE,qBACJP,EACA7R,EAAQuO,EAAYA,EAAYQ,EAAMR,EACtC,EACAxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJN,EACA9R,EAAQuO,EAAYA,EAAYW,EAChCX,EACAxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJL,EACA/R,EAAQuO,EAAYA,EACpBA,EAAY,EACZxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJJ,EACAhS,EAAQuO,EAAYA,GAAaA,EAAY,GAC7CA,EAAY,EACZxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJH,EACA,EACA1D,GAAaA,EAAY,GAAK,EAC9BxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJF,EACA3D,EAAY,EACZA,GAAaA,EAAY,GAAK,EAC9BxU,EAAQ6X,GACRrD,GAED,EAAK6D,qBACJD,EACApD,EAAMR,EAAYW,EAClBX,EAAYA,EACZxU,EAAQ6X,GACRrD,IAvXY,EA6Xd6D,qBAAuB,SAACC,EAAOC,EAAWC,EAAMxU,EAAQwQ,GAAe,IAC9DG,EAAe,EAAKzQ,MAApByQ,WACR,GAAI2D,IAAU9D,EACb,IADyB,IAAD,WACfK,GACR,EAAKkC,YACJwB,EAAY1D,EAAI2D,GACfxZ,UAFF,mCAE0CgF,EAAOsR,WACjDlF,YAAW,WACV,EAAK2G,YACJwB,EAAY1D,EAAI2D,GACfxZ,UAFF,mCAE0C2V,KACxC,IAAW,IAAJE,IARFA,EAAI,EAAGA,EAAIL,EAAWK,IAAM,EAA5BA,IAhYG,EA6YdqC,cAAgB,WACf,EAAKhT,MAAMwR,eAAejF,QAC1B,EAAKjM,SAAS,CAAEkR,eAAgB,OAChCtF,YAAW,WACV,EAAKzL,MAAMmP,kBACX,EAAKnP,MAAM8O,gBACX,EAAK9O,MAAM+O,YACX,EAAK/O,MAAMoP,sBACX,EAAKpP,MAAM0C,QAAQC,QAAQ,OACzB,MAtZU,EAyZd2P,YAAc,WAAO,IAAD,EACS,EAAK/S,MAAzBlE,EADW,EACXA,QAASwV,EADE,EACFA,OACXQ,EAAU5O,QAAQoO,GAEpBxV,EAAQwV,GAAQzV,MAAQC,EAAQgW,GAASjW,MAC5Ce,EAAO,yLACCd,EAAQwV,GAAQzV,QAAUC,EAAQgW,GAASjW,MACnDe,EAAO,yLACHA,EAAO,2DAEZ,EAAKoW,iBAjaL,EAAKH,YAAc,GAFN,E,qDA6Ld,WAAqB,IAAD,OACnBrS,KAAKqS,YAAc3Q,SAASqS,uBAAuB,oBADhC,MAGM/T,KAAKC,MAAtBX,EAHW,EAGXA,OAAQmH,EAHG,EAGHA,KACRqK,EAAW9Q,KAAKR,MAAhBsR,OACR9Q,KAAKF,SAAS,CAAEgQ,UAAWrJ,EAAKjK,OAEhCwD,KAAKyS,gBAAe,WACnB,EAAKjT,MAAMwR,eAAelG,KACzBwD,GAAoB,OAAQ7H,EAAKlL,KAAM+D,EAAOlB,OAAQ,OAEvD,EAAKoB,MAAMwR,eAAelG,KACzBwD,GAAoB,UAAW7H,EAAKlL,KAAM+D,EAAOlB,OAAQ0S,OAI3D7V,QAAQC,IAAI,iCAAkC8E,KAAKC,OACnDD,KAAKF,SAAS,CACboR,uBAAwBlR,KAAK2S,iC,kCAI/B,WACC3S,KAAK0R,qB,oBAkNN,WACC,OACC,cAAC,GAAD,CACC5B,UAAW9P,KAAKR,MAAMsQ,UACtBxU,QAAS0E,KAAKR,MAAMlE,QACpByU,MAAO/P,KAAKR,MAAMuQ,MAClBP,cAAexP,KAAKR,MAAMgQ,cAC1BQ,gBAAiBhQ,KAAKgQ,gBACVC,WAAYjQ,KAAKR,MAAMyQ,iB,GAhdhBjP,aAsdR+C,eAAW6K,GAAmB8B,KCrX9BsD,GAvGK,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aAAmB,EACNra,mBAAS,IADH,mBAC/B6U,EAD+B,KACrByF,EADqB,OAENta,mBAAS,GAFH,mBAE/B8U,EAF+B,KAErByF,EAFqB,KAGhC7U,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UAHN,EAIJ1F,oBAAS,GAJL,mBAI/Bwa,EAJ+B,KAIpBC,EAJoB,KAMhCpN,EAAWC,eAuBjB,OALA/M,qBAAU,WACN,OAAO,WACHka,GAAa,MAElB,IAEC,eAAC,WAAD,WACI,cAAC,EAAD,CAAYzU,QAASwU,IACrB,uBACA,eAACjR,EAAA,EAAD,CAAMC,SAAU,SAACZ,GAAD,OAzBC,SAACA,GACtBA,EAAMC,iBACDnD,EAID2U,EAAchN,EAAST,GAAQ,CAAEjL,KAAMkT,EAAUjS,KAAMkS,MAGvDzH,EAAST,GAAQ,CAAEjL,KAAM,KAAMiB,KAAMkS,KACrCzH,EjB0BgC,CACxCzK,KAAM,4BiB1BE6X,GAAa,IARbjY,EAAO,8LAsBoBkY,CAAiB9R,IAA5C,UACI,eAACW,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,qEACA,eAACgN,GAAA,EAAD,CACItL,MAAO,CACH3B,OAAQ,mBACRyT,aAAc,MACdyG,QAAS,OAJjB,UAMI,eAACjN,GAAA,EAAWC,QAAZ,CAAoBjN,UAAU,OAA9B,UACI,cAACgN,GAAA,EAAWkN,MAAZ,CACI9Q,MAAM,IACNnI,KAAK,iBACLkZ,QAAsB,IAAb/F,EACT/K,SAAU,kBAAMwQ,EAAY,MAEhC,cAAC7M,GAAA,EAAW7L,KAAZ,2BAEJ,eAAC6L,GAAA,EAAWC,QAAZ,CAAoBjN,UAAU,OAA9B,UACI,cAACgN,GAAA,EAAWkN,MAAZ,CACI9Q,MAAM,IACNnI,KAAK,iBACLkZ,QAAsB,IAAb/F,EACT/K,SAAU,kBAAMwQ,EAAY,MAEhC,cAAC7M,GAAA,EAAW7L,KAAZ,2BAEJ,eAAC6L,GAAA,EAAWC,QAAZ,CAAoBjN,UAAU,OAA9B,UACI,cAACgN,GAAA,EAAWkN,MAAZ,CACI9Q,MAAM,IACNnI,KAAK,iBACLkZ,QAAsB,IAAb/F,EACT/K,SAAU,kBAAMwQ,EAAY,MAEhC,cAAC7M,GAAA,EAAW7L,KAAZ,iCAIZ,uBACCwY,GAEG,eAAC9Q,EAAA,EAAKE,MAAN,CAAY/I,UAAU,mBAAtB,UAEI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,mDACA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACLlC,UAAU,gCACVkJ,YAAY,YACZE,MAAO+K,EACP5J,SAAS,WACTlB,SAAU,SAACnB,GAAD,OACN0R,EAAY1R,EAAMqB,OAAOH,aAKzC,uBACA,eAAChJ,EAAA,EAAD,CAAQ8B,KAAK,SAASlC,UAAU,OAAOM,OAAK,EAACD,QAAQ,UAArD,UACI,mBACIL,UAAS,aACL2Z,EAAe,iBAAmB,YAD7B,SAGTnZ,cAAY,SACfmZ,EAAe,4EAAkB,2C,8BCjEvCS,I,OArCY,SAAC,GAAwB,IAAtBjP,EAAqB,EAArBA,MAAOkP,EAAc,EAAdA,QACjC,OACI,eAAC9T,EAAA,EAAD,WACI,cAACrG,EAAA,EAAD,UACI,eAACkL,GAAA,EAAD,CAAOpL,UAAU,mBAAmBK,QAAQ,OAA5C,UACI,cAAC+K,GAAA,EAAMiD,QAAP,CAAerO,UAAU,cAAzB,SACI,cAAC8L,GAAA,EAAD,CAAOzL,QAAQ,cAAf,SACK8K,MAIT,4BAAIkP,IACJ,4BAAIA,IACJ,4BAAIA,IACJ,4BAAIA,SAGZ,uBACA,cAACna,EAAA,EAAD,UACI,eAACkL,GAAA,EAAD,CAAOpL,UAAU,mBAAmB+L,KAAK,OAAO1L,QAAQ,OAAxD,UACI,8IACA,uFAGR,uBACA,eAACH,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACI,cAACpG,EAAA,EAAD,CAAQE,OAAK,EAACD,QAAQ,kBAAtB,0FAEJ,cAACmG,EAAA,EAAD,UACA,cAACpG,EAAA,EAAD,CAAQE,OAAK,EAACD,QAAQ,oBAAtB,iGC+CDia,GA3EU,WACrB,OACI,eAACC,GAAA,EAAIhU,UAAL,CAAe3I,GAAG,oBAAoB4c,iBAAiB,QAAvD,UACI,uBAEA,eAACta,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,CAAKxG,UAAU,wBAAwBya,GAAI,EAA3C,SACI,eAACC,GAAA,EAAD,CAAKra,QAAQ,QAAQL,UAAU,cAA/B,UACI,cAAC0a,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAAU3a,UAAU,aAAa4a,SAAS,QAA1C,2DAIJ,cAACF,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAAU3a,UAAU,aAAa4a,SAAS,SAA1C,6EAIJ,cAACF,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAAU3a,UAAU,aAAa4a,SAAS,QAA1C,iEAIJ,cAACF,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAAU3a,UAAU,aAAa4a,SAAS,QAA1C,uEAIJ,cAACF,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAAU3a,UAAU,aAAa4a,SAAS,QAA1C,oDAOZ,cAACpU,EAAA,EAAD,CAAKiU,GAAI,EAAT,SACI,eAACF,GAAA,EAAIM,QAAL,WACI,cAACN,GAAA,EAAIO,KAAL,CAAUF,SAAS,QAAnB,SACI,cAAC,GAAD,CACIzP,MAAM,8CACNkP,QAAQ,4HAGhB,cAACE,GAAA,EAAIO,KAAL,CAAUF,SAAS,SAAnB,SACI,cAAC,GAAD,CACIzP,MAAM,gEACNkP,QAAQ,4HAGhB,cAACE,GAAA,EAAIO,KAAL,CAAUF,SAAS,QAAnB,SACI,cAAC,GAAD,CACIzP,MAAM,oDACNkP,QAAQ,4HAGhB,cAACE,GAAA,EAAIO,KAAL,CAAUF,SAAS,QAAnB,SACI,cAAC,GAAD,CACIzP,MAAM,0DACNkP,QAAQ,4HAGhB,cAACE,GAAA,EAAIO,KAAL,CAAUF,SAAS,QAAnB,SACI,cAAC,GAAD,CACIzP,MAAM,kCACNkP,QAAQ,wICxBzB7e,GAtCE,WACb,IAAM2Q,EAAOV,cAAY,SAACvG,GAAD,OAAWA,EAAMiH,QAE1C,OACI,cAAC,WAAD,UACKA,EAAKlL,KACF,cAAC,GAAD,IAEA,cAACnB,EAAA,EAAD,CACIC,OAAO,YACPgW,GAAG,cACH/V,UAAU,iBAHd,SAII,cAACF,EAAA,EAAKG,KAAN,UACI,eAAC8a,GAAA,EAAD,CACIP,iBAAiB,aACjBQ,YAAY,EACZpd,GAAG,qBACHyC,QAAQ,QAERL,UAAU,OANd,UAQI,cAACua,GAAA,EAAD,CAAKK,SAAS,aAAazP,MAAM,gEAAjC,SACI,cAAC8P,GAAD,CAAYtB,cAAc,MAE9B,cAACY,GAAA,EAAD,CAAKK,SAAS,eAAezP,MAAM,6CAAnC,SACI,cAAC,GAAD,MAEJ,cAACoP,GAAA,EAAD,CAAKK,SAAS,eAAezP,MAAM,6EAAnC,SACI,cAAC8P,GAAD,CAAYtB,cAAc,gB,qBCmS3CuB,GA1TO,WAErB,IAAMlW,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UAFjB,EAGK1F,wBAASmX,GAHd,mBAGpB0E,EAHoB,KAGTC,EAHS,OAID9b,mBAAS,IAJR,mBAIpB6L,EAJoB,KAIbkQ,EAJa,OAKH/b,mBAAS,IALN,mBAKpB+B,EALoB,KAKdia,EALc,OAMOhc,mBAAS,MANhB,mBAMpBic,EANoB,KAMTC,EANS,OAOGlc,mBAAS,MAPZ,mBAOpBmc,EAPoB,KAOXC,EAPW,OAQGpc,mBAAS,IARZ,mBAQpB2L,EARoB,KAQXC,EARW,OASqB5L,mBAAS,MAT9B,mBASpBqc,EAToB,KASFC,EATE,OAUetc,oBAAS,GAVxB,mBAUpBuc,EAVoB,KAULC,EAVK,OAWGxc,oBAAS,GAXZ,mBAWpBgG,EAXoB,KAWXyW,EAXW,KAarBC,EAAc,WACnBX,EAAS,IACTC,EAAQ,IACRE,EAAa,MACbE,EAAW,MACXE,EAAoB,MACpBE,GAAkBD,IAGnBhc,qBAAU,WAGT,sBAAC,gCAAAgF,EAAA,sEAECkX,GAAW,GAFZ,SAIQtR,GAAeG,oBAJvB,gBAGSlN,EAHT,EAGSA,OAAQoH,EAHjB,EAGiBA,KAEZpH,IAAWuF,SAAOrG,aAEjBkI,EAAKmG,QAAQpK,QAAQqK,EAAWpG,EAAKmG,QAAQhF,WAErB,IAAxBnB,EAAKmG,QAAQpK,QAChBqK,EAAW,CACV,CACCC,MAAO,2BACP9J,KAAM,wIAbX,kDAmBC6J,EAAW,CACV,CACCC,MAAO,qBACP9J,KAAM,6SAGR0a,GAAW,GAzBZ,QA2BAA,GAAW,GA3BX,yDAAD,KA6BE,CAACF,IAEJhc,qBAAU,WACT,IACUoc,OAAUxF,EACpB,GAFc7T,iBAAe5E,QAElB,CACV,IAAMoR,EAAgBC,aAAUzM,iBAAe5E,SAK/C,GAJAie,EAAU7M,GACTA,EAAc3L,KAAKyY,OACnB9M,EAAcE,IAAM7Q,KAAKgR,MAAQ,KAE7BzK,IAAsB,IAAZiX,EAId,OADA7a,EAAM,iPACC,UAGE6a,GAAU,EACrBb,EAAWa,KACT,CAACjX,IAIJ,IAAMmX,GAAe,uCAAG,4BAAAtX,EAAA,sEAGtBkX,GAAW,GAHW,SAIGtR,GAAeC,aAAa,CACpDS,QACA9J,OACAka,UAAW,IAAI9c,KAAK8c,GACpBE,QAAS,IAAIhd,KAAKgd,KARG,kBAId/d,SAQOuF,SAAOpG,sBACrB+E,EAAG,qDAAD,OAAcuJ,EAAd,mGACF6Q,KAdqB,gDAiBjB/Y,SAAO1F,gBAAP,OACJ6D,EACC,+RAnBoB,QAsBvB2a,GAAW,GAtBY,yDAAH,qDAsCfK,GAAW,uCAAG,4BAAAvX,EAAA,yDAEd8W,EAFc,wDAGnBI,GAAW,GAHQ,kBAKOtR,GAAeK,WACvC6Q,EACA,CAAExQ,QAAO9J,OAAMka,YAAWE,YAPT,kBAKV/d,SAIOuF,SAAOrG,aACrBgF,EAAG,qDAAD,OAAcuJ,EAAd,+GACF6Q,KAXiB,kDAcb/Y,SAAO1F,gBAAP,OACJ6D,EACC,+RAhBgB,QAmBnB2a,GAAW,GAnBQ,0DAAH,qDA2BjB,OACC,cAAC,WAAD,UACE/W,GAAUmW,GACV,eAACjb,EAAA,EAAD,CAAKwB,MAAO,CAAE6F,OAAQ,QAAtB,UACC,cAAC,EAAD,CAAYjC,QAASA,IACrB,cAACkB,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACC,eAACrT,EAAA,EAAD,CACCC,OAAO,UACPgW,GAAG,cACH/V,UAAU,8BAHX,UAIC,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,iFAGA,eAACF,EAAA,EAAKG,KAAN,CAAWD,UAAU,aAArB,UACC,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,eAAtB,uFAGA,cAAC6I,EAAA,EAAKI,QAAN,CACCG,MAAO+B,EACP9B,SAAU,SAACC,GAAD,OAAO+R,EAAS/R,EAAEC,OAAOH,QACnCgB,QAAQ,UACRC,QAAS,SAACf,GAAD,OACRA,EAAEC,OAAOQ,kBAAkB,KAE5BO,UAAW,SAAChB,GAAD,OACVA,EAAEC,OAAOQ,kBACR,0RAGF/J,UAAU,eACVkC,KAAK,OACLgH,YAAY,iCACZqB,SAAS,aAEV,uBACA,cAAC1B,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,eAAtB,wDAGA,cAAC6I,EAAA,EAAKI,QAAN,CACCoT,GAAG,WACHjS,QAAQ,WACRC,QAAS,SAACf,GAAD,OACRA,EAAEC,OAAOQ,kBAAkB,KAE5BO,UAAW,SAAChB,GAAD,OACVA,EAAEC,OAAOQ,kBACR,+QAGF/J,UAAU,oBACVkJ,YAAY,wJACZE,MAAO/H,EACPkJ,SAAS,WACTlB,SAAU,SAACC,GAAD,OAAOgS,EAAQhS,EAAEC,OAAOH,UAEnC,uBACA,cAACP,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,YAAtB,oGAIA,cAAC,KAAD,CACCA,UAAU,qBACVtB,SAAUC,IACVC,OAAQC,IACRyd,iBAAiB,eACjBlT,MAAOmS,EACPlS,SAAUmS,EACVjR,SAAS,aAEV,uBACA,cAAC1B,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,YAAtB,0GAIA,cAAC,KAAD,CACCA,UAAU,eACVtB,SAAUC,IACVC,OAAQC,IACRyd,iBAAiB,eACjBlT,MAAOqS,EACPpS,SAAUqS,EACVnR,SAAS,aAEV,0BAED,cAACzK,EAAA,EAAKK,OAAN,UACGwb,EAWD,eAACzb,EAAA,EAAD,WACC,cAACsG,EAAA,EAAD,UACC,eAACpG,EAAA,EAAD,CACCE,OAAK,EACLD,QAAQ,kBACRoG,QAAS2V,GAHV,UAIC,mBACCpc,UAAU,sBACVQ,cAAY,SANd,iFAUD,cAACgG,EAAA,EAAD,UACC,eAACpG,EAAA,EAAD,CACCE,OAAK,EACLD,QAAQ,iCACRoG,QAhJW,WACrBuV,KA4IS,UAIC,mBACChc,UAAU,sBACVQ,cAAY,SANd,kEAvBF,eAACJ,EAAA,EAAD,CACCE,OAAK,EACLD,QAAQ,UACRoG,QAAS0V,GAHV,UAIC,mBACCnc,UAAU,sBACVQ,cAAY,SANd,sFAsCJ,cAACgG,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACC,eAACrT,EAAA,EAAD,CACCC,OAAO,OACPgW,GAAG,cACH/V,UAAU,8BAHX,UAIC,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,oGAGA,cAACF,EAAA,EAAKG,KAAN,CACCyB,MAAO,CAAE4F,UAAW,UACpBtH,UAAU,aAFX,SAGEiL,EAAQnK,KAAI,SAAC6J,GACb,OACC,eAAC,WAAD,WACC,eAACS,GAAA,EAAD,CAAO/K,QAAQ,YAAf,UACC,mBACCL,UAAU,yBACVQ,cAAY,SACb,sBACCkB,MAAO,CACN2J,MAAO,MACPC,SAAU,QAHZ,SAKEX,EAAOQ,QATV,KAWIR,EAAOtJ,KACV,mBACCrB,UAAU,8CACVQ,cAAY,OACZiG,QAAS,kBAlMC,SAACkE,GAEtBiR,EAAoBjR,EAAO4R,KAC3BlB,EAAS1Q,EAAOQ,OAChBmQ,EAAQ3Q,EAAOtJ,MACfma,EAAa,IAAI/c,KAAKkM,EAAO4Q,YAC7BG,EAAW,IAAIjd,KAAKkM,EAAO8Q,UA6Lfe,CAAc7R,SAGjB,0CC/SL8R,GAAqB,EAArBA,GAA8B,EAA9BA,GAA8C,EA8UrCC,GA7UY,WAAM,MAGGpd,mBAAS,IAHZ,mBAGtB6K,EAHsB,KAGZwS,EAHY,OAIKrd,mBAAS,IAJd,mBAItBuI,EAJsB,KAIX+U,EAJW,OAKHtd,mBAAS,IALN,mBAKtBuK,EALsB,KAKfgT,EALe,OAMGvd,mBAAS,IANZ,mBAMtBwI,EANsB,KAMZgV,EANY,OAOCxd,mBAAS,IAPV,mBAOtBgG,EAPsB,KAObyW,EAPa,OAQGzc,mBAASmd,IARZ,mBAQtBM,EARsB,KAQZC,EARY,OASkB1d,oBAAS,GAT3B,mBAStB2d,EATsB,KASHC,EATG,OAUS5d,mBAAS,IAVlB,mBAUtB6d,EAVsB,KAUTC,EAVS,OAWuB9d,mBAAS,IAXhC,mBAWtB+d,EAXsB,KAWFC,EAXE,KAavB3Q,EAAWC,eAGjB/M,qBAAU,WACN,sBAAC,kCAAAgF,EAAA,sEAEOkX,GAAW,GAFlB,SAGsCxY,EAAaS,mBAHnD,gBAGetG,EAHf,EAGeA,OAAQoH,EAHvB,EAGuBA,KACZpH,IAAWmI,IAAQ5C,OAAOrG,aAClBiQ,EAAO/H,EAAP+H,GACR8P,EAAY9P,EAAG1C,UACfyS,EAAa/P,EAAGhF,WAChBgV,EAAShQ,EAAGhD,QARvB,kDAWYhE,IAAQ5C,OAAO1F,gBAAf,OACDggB,MACI,sUAERxB,GAAW,GAflB,QAiBGA,GAAW,GAjBd,yDAAD,KAmBD,CAACkB,IAEJ,IAAMO,EAAa,WACfzB,GAAW,GACXiB,EAAYP,IACZS,GAAmBD,IAEjBb,EAAW,uCAAG,4BAAAvX,EAAA,6DAGhBkX,GAAW,GAHK,kBAKaxY,EAAaU,kBAAkB,CACpD4D,YACAsC,WACAN,QACA/B,aATQ,kBAKJpK,SAMOmI,IAAQ5C,OAAOrG,aAC1BgF,EAAG,4IACH+K,EtB1D0B,CACtCzK,KAAM,mBsB2DMsb,KAfQ,gDAkBP3X,IAAQ5C,OAAO1F,gBAAf,OACDggB,MACI,8RACA,CAAEhc,SAAU,WAAYC,cAAc,IArBlC,QAwBhBua,GAAW,GAxBK,yDAAH,qDA2BX5X,GAAgB,uCAAG,4BAAAU,EAAA,6DACrBkX,GAAW,GADU,kBAGQxY,EAAaY,iBAAiB,CACnD0D,YACAC,WACAqV,gBANa,kBAGTzf,SAKOmI,IAAQ5C,OAAOrG,aAC1BgF,EAAG,gKACH+K,EtBlF0B,CACtCzK,KAAM,mBsBkFMsb,KAXa,gDAcZ3X,IAAQ5C,OAAO1F,gBAAf,OACD6D,EACI,+RAhBS,QAmBrB2a,GAAW,GAnBU,yDAAH,qDA+CtB,OACI,cAAC,WAAD,UACI,eAACjc,EAAA,EAAD,CACIC,OAAO,YACPgW,GAAG,cACH/V,UAAU,kBAHd,UAII,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,SACI,eAACE,EAAA,EAAD,CAAKF,UAAU,gBAAf,UACI,cAACwG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIE,OAAK,EACLmG,QAAS,kBAAMuW,EAAYP,KAC3Bpc,QAAO,UACF0c,EAEK,oBADA,mBALd,UAQKA,IAAaN,IACV,mBACIzc,UAAU,0BACVQ,cAAY,SAXxB,+DAgBJ,cAACgG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIE,OAAK,EACLmG,QAAS,kBAAMuW,EAAYP,KAC3Bpc,QAAO,UACH0c,IAAaN,GACP,kBACA,qBANd,UAQKM,IAAaN,IACV,mBACIzc,UAAU,0BACVQ,cAAY,SAXxB,4CAgBJ,cAACgG,EAAA,EAAD,UACI,eAACpG,EAAA,EAAD,CACIE,OAAK,EACLmG,QAAS,kBAAMuW,EAAYP,KAC3Bpc,QAAO,UACH0c,IAAaN,GACP,kBACA,qBANd,UAQKM,IAAaN,IACV,mBACIzc,UAAU,0BACVQ,cAAY,SAXxB,uFAkBZ,eAACqI,EAAA,EAAD,CAAMC,SAAU,SAACQ,GAAD,OAtFT,SAACA,GAEhB,OADAA,EAAEnB,iBACM4U,GACJ,KAAKN,GAED,YADAL,IAEJ,KAAKK,GAED,YADAtY,KAEJ,QACI,QA4EuBsZ,CAAWnU,IAAlC,UACI,eAACxJ,EAAA,EAAKG,KAAN,CAAWD,UAAU,2BAArB,UACI,cAAC,EAAD,CAAYsF,QAASA,IAEpByX,IAAaN,IACV,eAAC,WAAD,WACI,eAAC5T,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,6FAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,OACL0M,UAAQ,EACR5O,UAAU,4BACVkJ,YAAY,aACZE,MAAOvB,OAGf,eAACgB,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,+DAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI2F,UAAWmO,EACX7a,KAAK,OACLlC,UAAU,4BACVoK,QAAQ,uBACRC,QAAS,SAACf,GAAD,OACLA,EAAEC,OAAOQ,kBAAkB,KAE/BO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,qSAGRb,YAAY,YACZE,MAAOe,EACPI,SAAS,WACTlB,SAAU,SAACC,GAAD,OACNqT,EAAYrT,EAAEC,OAAOH,aAKjC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,4CAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,QACL0M,UAAWmO,EACX3S,QAAQ,QACRC,QAAS,SAACf,GAAD,OACLA,EAAEC,OAAOQ,kBAAkB,KAE/BO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,oUAGR/J,UAAU,4BACVkJ,YAAY,SACZE,MAAOS,EACPU,SAAS,WACTlB,SAAU,SAACC,GAAD,OACNuT,EAASvT,EAAEC,OAAOH,gBAMrC2T,IAAaN,IACV,eAAC5T,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,+DAEQ+c,IAAaN,GACP,2BACA,MAGd,cAAC5T,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLlC,UAAU,4BACVkJ,YAAY,WACZE,MAAOtB,EACPuB,SAAU,SAACC,GAAD,OACNwT,EAAYxT,EAAEC,OAAOH,aAKpC2T,IAAaN,IACV,qCACI,eAAC5T,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,kFAGA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLkI,QAAQ,UACRC,QAAS,SAACf,GAAD,OACLA,EAAEC,OAAOQ,kBAAkB,KAE/BO,UAAW,SAAChB,GAAD,OACPA,EAAEC,OAAOQ,kBACL,uSAGR/J,UAAU,4BACVkJ,YAAY,eACZE,MAAO+T,EACP5S,SAAS,WACTlB,SAAU,SAACC,GAAD,OACN8T,EAAe9T,EAAEC,OAAOH,aAIpC,eAACP,EAAA,EAAKE,MAAN,CAAY/I,UAAU,cAAtB,UACI,cAAC6I,EAAA,EAAKG,MAAN,CAAYhJ,UAAU,OAAtB,iHAIA,cAAC6I,EAAA,EAAKI,QAAN,CACI/G,KAAK,WACLlC,UAAU,4BACVkJ,YAAY,uBACZE,MAAOiU,EACP9S,SAAS,WACTlB,SAAU,SAACnB,GAAD,OAzMjB,SAACA,GAC1BoV,EAAsBpV,EAAMqB,OAAOH,OAC/B+T,IAAgBjV,EAAMqB,OAAOH,MAC7BlB,EAAMqB,OAAOQ,kBACT,2VAGD7B,EAAMqB,OAAOQ,kBAAkB,IAmMFD,CAAqB5B,eAO7C,cAACpI,EAAA,EAAKK,OAAN,UACI,eAACC,EAAA,EAAD,CACI8B,KAAK,SACL0M,UAAWmO,EACXzc,OAAK,EACLD,QAAQ,UACRL,UAAU,eALd,UAMI,mBACIA,UAAU,oBACVQ,cAAY,SARpB,8ECtUT,OAA0B,sC,UCuF1Bkd,GAjFO,SAAC/X,GACtB,IAAMkH,EAAKpB,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACxC,IAAK6H,EAAI,OAAO,KAFgB,IAIxBkB,GAAYpI,EAAMgY,OAAShY,EAAMgY,OAAS9Q,GAA1CkB,QACR,OACC,eAACjO,EAAA,EAAD,CAAMC,OAAO,UAAUgW,GAAG,cAAc/V,UAAU,iBAAlD,UACC,cAACF,EAAA,EAAKG,KAAN,UACC,eAACC,EAAA,EAAD,CAAKF,UAAU,oBAAf,UAEC,cAACwG,EAAA,EAAD,CAAK2M,GAAI,EAAGnT,UAAU,uBAAtB,SACC,cAAC,KAAD,CACC0B,MAAO,CACNwL,MAAO,OACP3F,OAAQ,OACR4K,OAAQ,OACRjD,UAAW,UAEZ0O,OAAO,EACP3P,IAAKC,OAGP,cAAC1H,EAAA,EAAD,UACC,eAACoF,GAAA,EAAD,CAAW5L,UAAU,+BAArB,UACC,eAACE,EAAA,EAAD,WACC,cAACsG,EAAA,EAAD,CAAKxG,UAAU,YAAf,SACC,cAAC,GAAD,CAAQmL,MAAM,4EAAd,SACE4C,EAAQQ,WAGX,cAAC/H,EAAA,EAAD,CAAKxG,UAAU,YAAf,SACC,cAAC,GAAD,CAAQmL,MAAM,gEAAd,SACE4C,EAAQS,YAIZ,eAACtO,EAAA,EAAD,WACC,cAACsG,EAAA,EAAD,CAAKxG,UAAU,YAAf,SACC,cAAC,GAAD,CAAQmL,MAAM,gEAAd,SACE4C,EAAQU,UAGX,cAACjI,EAAA,EAAD,CAAKxG,UAAU,YAAf,SACC,cAAC,GAAD,CAAQmL,MAAM,sEAAd,SACE4C,EAAQW,uBAQf/I,EAAMgY,QACN,cAAC7d,EAAA,EAAKK,OAAN,UACC,eAACD,EAAA,EAAD,WACC,cAACsG,EAAA,EAAD,UACC,eAACpG,EAAA,EAAD,CACCC,QAAQ,YACRC,OAAK,EACLmG,QAAS,KAHV,UAIC,mBACCzG,UAAU,yBACVQ,cAAY,SANd,2EAUD,cAACgG,EAAA,EAAD,UACC,cAACpG,EAAA,EAAD,CACCC,QAAQ,SACRC,OAAK,EACLmG,QAAS,KAHV,2CCiDQ5K,GAhHW,WAAO,IAAD,EACDyD,oBAAS,GADR,mBACxBgG,EADwB,KACfyW,EADe,OAEGzc,mBAAS,IAFZ,mBAExBue,EAFwB,KAEbC,EAFa,OAGDxe,mBAAS,IAHR,mBAGxBye,EAHwB,KAGfC,EAHe,OAIC1e,mBAAS,MAJV,mBAIxB2e,EAJwB,KAIdC,EAJc,OAKuB5e,oBAAU,GALjC,mBAKxB6e,EALwB,KAKHC,EALG,KAM/Bve,qBAAU,WACT,sBAAC,4BAAAgF,EAAA,sEAECkX,GAAW,GAFZ,SAG4BtX,EAAaE,aAHzC,cAGK0Z,EAHL,QAIoB3gB,SAAWmI,IAAQ5C,OAAOrG,YAC5CohB,EAAWK,EAAevZ,KAAKiZ,QAAQ9X,WALzC,SAMwB1C,EAAac,eANrC,QAMCga,EAND,QAOoB3gB,SAAWmI,IAAQ5C,OAAOrG,YAC5CkhB,EAAaO,EAAevZ,KAAKwZ,SARnC,kDAUC3d,QAAQC,IAAR,MACAmb,GAAW,GAXZ,QAaAA,GAAW,GAbX,yDAAD,KAeE,IAEHlc,qBAAU,WACTue,EACc,OAAbH,EACGJ,EAAUpK,WAAU,SAACkK,GAAD,OAAYA,EAAO7Z,SAAWma,MACjD,KAGH,CAACA,EAAUJ,IAOd,OACC,eAAC/d,EAAA,EAAD,CAAMC,OAAO,YAAYgW,GAAG,cAAc/V,UAAU,kBAApD,UACC,cAACF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,iJAGA,cAAC,EAAD,CAAYsF,QAASA,IACrB,eAACxF,EAAA,EAAKG,KAAN,WACC,cAAC,EAAD,CAAYqF,QAASA,IACrB,cAACiV,GAAA,EAAIhU,UAAL,CACCiU,iBAAkByD,EAClBM,SAAU,SAACC,GAAD,OAASN,EAAYM,IAFhC,SAGC,eAACte,EAAA,EAAD,CAAKF,UAAU,wCAAf,UACC,cAACwG,EAAA,EAAD,CAAKxG,UAAU,0BAA0BmT,GAAI,EAA7C,SACC,eAACuH,GAAA,EAAD,CACCra,QAAQ,QACRL,UAAU,yBAFX,UAGC,cAAC0a,GAAA,EAAI7O,KAAL,UACC,cAAC6O,GAAA,EAAIC,KAAL,CAAUC,SAAS,KAAnB,wEAIAiD,EAAU/c,KAAI,SAAC6c,GAAD,OACd,cAACjD,GAAA,EAAI7O,KAAL,UACC,cAAC6O,GAAA,EAAIC,KAAL,CAAUC,SAAU+C,EAAO7Z,OAA3B,SACC,eAAC5D,EAAA,EAAD,CAAKF,UAAU,QAAf,UACC,cAACwG,EAAA,EAAD,UAAMmX,EAAOxT,WACb,cAAC3D,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACC,mBAAG1M,QAAS,aAAwBzG,UAAU,iCAAiCye,cAAY,0BASlG,cAACjY,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACC,cAAC,GAAD,CACCwK,QAC0B,IAAzBQ,EACGN,EAAUM,GACV,SAKN,cAAC3X,EAAA,EAAD,UACC,eAAC+T,GAAA,EAAIM,QAAL,WACC,cAACN,GAAA,EAAIO,KAAL,CAAUF,SAAS,KAAnB,SACC,cAAC,EAAD,CAAWla,OAAQqd,MAEnBF,EAAU/c,KAAI,SAAC6c,GAAD,OACd,cAACpD,GAAA,EAAIO,KAAL,CAAUF,SAAU+C,EAAO7Z,OAA3B,SACC,cAAC,EAAD,CACCpD,OAAQqd,EAAQ7X,QACf,SAACC,GAAD,OACCwX,EAAO7Z,SACNqC,EAAKnF,QAAQ,GAAGpD,IACjB+f,EAAO7Z,SACNqC,EAAKnF,QAAQ,GAAGpD,8BCvGvByF,I,OAAUC,SAAVD,QASQqb,GAPM,CAEjBC,WAAY,SAACrS,GACT,OAAOpJ,EAAKC,IAAL,UAAYE,GAAOhI,KAAnB,YAA2BgI,GAAO3G,MAAlC,YAA2C4P,MCoE3CsS,GAxEC,SAAC,GAAqC,IAAnClO,EAAkC,EAAlCA,IAAKmO,EAA6B,EAA7BA,YAAaC,EAAgB,EAAhBA,UACzBvgB,EAASmS,EAATnS,KADyC,EAGjBe,oBAAS,GAHQ,mBAG1Cyf,EAH0C,KAGhCC,EAHgC,OAIzB1f,mBAAS,MAJgB,mBAI1CmI,EAJ0C,KAIpCwX,EAJoC,OAKf3f,mBAAS,MALM,mBAK1CK,EAL0C,KAK/BC,EAL+B,KAgBjD,OATAC,qBAAU,WAAO,IAAD,EACWf,EAAQP,GADnB,mBACL2gB,EADK,KACEC,EADF,KAEZF,EAAQE,GAAQvf,EAAasf,GAC7BF,EACI,IAAIvgB,KAAKF,GAAM6gB,YAAcP,GAA+B,IAAhBA,KAEjD,CAACtgB,EAAMsgB,IAIN,eAAC,WAAD,WACME,EACE,eAAC,WAAD,WACI,uBACA,mBAAG/e,UAAU,eAAb,SAA6BL,OAHxB,KAMb,eAACO,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UACKkK,EAAI7D,IACD,cAACzB,GAAA,EAAD,CAAOpL,UAAU,aAAaK,QAAQ,OAAtC,SACKye,EACG,eAAC5e,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,UAAMkK,EAAI7D,KACV,cAACrG,EAAA,EAAD,CAAKxG,UAAU,kBAAkBmT,GAAI,EAArC,SACK1L,OAIT,eAAC,WAAD,WACI,cAACvH,EAAA,EAAD,UAAMwQ,EAAI7D,KACV,cAAC3M,EAAA,EAAD,CAAKF,UAAU,kBAAkBmT,GAAI,EAArC,SACK1L,WAOzB,cAACjB,EAAA,EAAD,UACKkK,EAAIiN,QACD,cAACvS,GAAA,EAAD,CAAOpL,UAAU,aAAaK,QAAQ,UAAtC,SACKye,EACG,eAAC5e,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,CAAKxG,UAAU,sBAAsBmT,GAAI,EAAzC,SACK1L,IAEL,cAACjB,EAAA,EAAD,UAAMkK,EAAIiN,YAGd,eAAC,WAAD,WACI,cAACzd,EAAA,EAAD,UAAMwQ,EAAIiN,SACV,cAACzd,EAAA,EAAD,CAAKF,UAAU,sBAAsBmT,GAAI,EAAzC,SACK1L,gBA3ClB8D,iBCoKR8T,GAvKC,SAAC,GAAkB,IAAhB/S,EAAe,EAAfA,SAAe,EACIhN,mBAAS,IADb,mBACvBkN,EADuB,KACZC,EADY,KAExBC,EAAUjB,cAAY,SAACvG,GAAD,OAAWA,EAAMwH,WACvCC,EAAWC,eACXC,EAAKpB,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UAClCsa,EAAuBC,iBAAO,MAC9B9M,EAAUC,qBAAWJ,IANG,EASAhT,mBAAS,CACnC,CAAEuN,GAAI,KAAM8Q,OAAQ,KAAMpf,KAAM,KAAMigB,IAAK,KAVjB,mBASvBgB,EATuB,KASdC,EATc,KAaxBC,EAAuBpP,sBAAW,sBAAC,sCAAAzL,EAAA,+EAEF6Z,GAAaC,WAAWrS,GAFtB,gBAEzB5O,EAFyB,EAEzBA,OAAQoH,EAFiB,EAEjBA,KACZpH,IAAWuF,SAAOrG,aACV+iB,EAAkB7a,EAAlB6a,QAASC,EAAS9a,EAAT8a,KACXC,EAAeD,EAAK9e,KAAI,SAAC4L,GAAa,IAChCrL,EAAsBqL,EAAtBrL,KAAMye,EAAgBpT,EAAhBoT,MAAOvhB,EAASmO,EAATnO,KACrB,OAAIuhB,IAAUH,EACH,CACH9S,GAAIxL,EACJsc,OAAQ,KACRpf,QAED,CACHsO,GAAI,KACJ8Q,OAAQtc,EACR9C,WAGRkhB,EAAWI,IAnBkB,yGAwBtC,CAACvT,IAEJzM,qBAAU,WAGN,OAFA6f,IAEO,WACHD,EAAW,OAEhB,CAACC,IAEJ,IAyBMK,EAAiBzP,uBACnB,SAACI,GACG,IAAIsP,EAAO,aAAOR,GAElB,OADAQ,EAAQlK,KAAK,CAAEjJ,GAAI,KAAM8Q,OAAQjN,EAAIrP,KAAM9C,KAAM,IAAIE,OAC9CuhB,IAEX,CAACR,IAkBL,OAfA3f,qBAAU,WAAO,IACLkN,EAAaL,EAAbK,UACHL,EAAQqF,MAAQhF,GAAYA,EAAST,WAAaA,IACnDmT,EAAWM,EAAerT,EAAQK,WAElCqE,YAAW,WACHkO,GAAwBA,EAAqBW,SAC7CX,EAAqBW,QAAQC,eAAe,CACxCC,SAAU,SACVC,IAAKd,EAAqBW,QAAQI,cAE3C,QAER,CAAC3T,EAASJ,IAGT,cAACiO,GAAA,EAAIO,KAAL,CAAUF,SAAUtO,EAApB,SACI,eAAC/F,EAAA,EAAD,WACI,cAACrG,EAAA,EAAD,UACI,cAACJ,EAAA,EAAD,CACIC,OAAO,OACPgW,GAAG,cACH/V,UAAS,0BACLyS,EAAQD,SAAWQ,UAAQE,WACrB,sBACA,kCANd,SAQI,cAACpT,EAAA,EAAKG,KAAN,UACKuf,EAAQ1e,KAAI,SAAC4P,EAAKtC,GAAN,OACT,qBAAKkS,IAAKhB,EAAV,SACI,cAAC,GAAD,CAEI5O,IAAKA,EACLoO,UAAWrM,EAAQD,SAAWQ,UAAQuN,QACtC1B,YACc,IAAVzQ,EACM,IAAI3P,KACA+gB,EAAQpR,EAAQ,GAAG7P,MACrB6gB,UACF,eAQlC,cAAClf,EAAA,EAAD,UACI,cAAC2I,EAAA,EAAD,CACIC,SAAU,SAACZ,GAAD,OAnFP,SAACA,GAEpB,GADAA,EAAMC,iBACFqE,EAAW,CACX,IAAIwT,EAAO,aAAOR,GAClBQ,EAAQlK,KAAK,CACTjJ,GAAIL,EACJmR,OAAQ,KACRpf,KAAM,IAAIE,KACV+f,IAAKgB,EAAQ3e,SAEjB4e,EAAWO,GACXrT,EAASN,GAAcQ,EAAG1C,SAAUmC,EAAUE,IAC9CC,EAAa,IAET6S,GAAwBA,EAAqBW,SAC7C7O,YAAW,WACPkO,EAAqBW,QAAQC,eAAe,CACxCC,SAAU,SACVC,IAAKd,EAAqBW,QAAQI,cAEvC,MA+D0BvT,CAAe5E,IACpClI,UAAU,aAFd,SAGI,eAACgN,GAAA,EAAD,CAAYhN,UAAU,QAAtB,UACI,cAACgN,GAAA,EAAWC,QAAZ,CACIvL,MAAO,CACHwL,MAAO,MAFf,SAII,cAAC9M,EAAA,EAAD,CACI8B,KAAK,SACLR,MAAO,CAAE3B,OAAQ,OAAQuL,SAAU,QACnCtL,UAAU,gBACVK,QAAQ,eAJZ,SAKI,mBACIL,UAAU,oBACVQ,cAAY,aAIxB,cAACwM,GAAA,EAAWC,QAAZ,CACIvL,MAAO,CAAEyQ,OAAQ,OAAQjF,MAAO,OADpC,SAEI,cAACrE,EAAA,EAAKI,QAAN,CACIG,MAAOoD,EACPnD,SAAU,SAACC,GAAD,OACNmD,EAAanD,EAAEC,OAAOH,QAE1BF,YAAY,8BACZlJ,UAAU,6ECnG/BpE,GAnEE,SAAC,GAAa,EAAZgK,OAAa,IAAD,EACGtG,oBAAS,GADZ,mBACpBgG,EADoB,KACXyW,EADW,OAEOzc,mBAAS,IAFhB,mBAEpBue,EAFoB,KAETC,EAFS,KAGrBrL,EAAUC,qBAAWJ,IAgB3B,OAdAzS,qBAAU,WACN,sBAAC,gCAAAgF,EAAA,sEAEOkX,GAAW,GAFlB,SAGsCxY,EAAac,eAHnD,gBAGe3G,EAHf,EAGeA,OAAQoH,EAHvB,EAGuBA,KACZpH,IAAWuF,SAAOrG,YAClBkhB,EAAahZ,EAAKwZ,SAL7B,kDAOOvC,GAAW,GAPlB,QASGA,GAAW,GATd,yDAAD,KAWD,IAGC,eAACjc,EAAA,EAAD,CACIC,OAAO,YACPgW,GAAG,cACH/V,UAAU,iBAHd,UAII,cAAC,EAAD,CAAYsF,QAASA,IACrB,cAACxF,EAAA,EAAK6G,OAAN,CAAa3G,UAAU,cAAvB,gEACA,cAACF,EAAA,EAAKG,KAAN,UACI,cAACsa,GAAA,EAAIhU,UAAL,UAKI,eAACrG,EAAA,EAAD,WACI,cAACsG,EAAA,EAAD,CACIxG,UACIyS,EAAQD,SAAWQ,UAAQE,WACrB,4CACA,qCAEVuH,GAAI,EANR,SAOI,cAACC,GAAA,EAAD,CACIra,QAAQ,QACRL,UAAU,yBAFd,SAGK6d,EAAU/c,KAAI,SAAC6c,GAAD,OACX,cAACjD,GAAA,EAAI7O,KAAL,UACI,cAAC6O,GAAA,EAAIC,KAAL,CAA8BC,SAAU+C,EAAO7Z,OAA/C,SACK6Z,EAAOxT,UADGwT,EAAO7Z,iBAQtC,cAAC0C,EAAA,EAAD,UACI,cAAC+T,GAAA,EAAIM,QAAL,UACKgD,EAAU/c,KAAI,SAAC6c,GAAD,OACX,cAAC,GAAD,CAAwBrR,SAAUqR,EAAO7Z,QAA3ByH,kCCgCnC9B,gBAxFM,SAAC9D,GAClB,IAAMX,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACtC2H,EAAWC,eAMjB,OACQ,eAAC1M,EAAA,EAAD,CAAKF,UAAU,yDAAf,UACI,eAACI,EAAA,EAAD,CACIsB,MAAO,CAAE3B,OAAQ,QACjBM,QAAQ,kBACRL,UAAU,mFAHd,UAII,mBAAGA,UAAU,kBAAkBQ,cAAY,SAJ/C,6DAOA,uBACA,qBAAIR,UAAU,oCAAd,UACI,oBAAIA,UAAU,WAAd,SACI,eAAC,IAAD,CACIwgB,OAAK,EACLC,GAAI5a,IAAQvC,OAAO2L,OAAO/T,QAC1B8E,UAAU,WACV0gB,eAAa,OAJjB,UAKI,mBACI1gB,UAAU,oBACVQ,cAAY,SAPpB,4CAWJ,6BACI,eAAC,IAAD,CACIR,UAAU,qBACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOpT,kBAF9B,UAGI,mBACImE,UAAU,mBACVQ,cAAY,SALpB,yFASJ,6BACI,eAAC,IAAD,CACIR,UAAU,qBACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOrT,SAF9B,UAGI,mBACIoE,UAAU,qBACVQ,cAAY,SALpB,uCASJ,uBACCwE,GAAUA,EAAOiX,SACd,eAAC,WAAD,WAEI,6BACI,eAAC,IAAD,CACIjc,UAAU,gCACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOnT,QAF9B,UAGI,mBACIkE,UAAU,yBACVQ,cAAY,SALpB,+DASJ,6BACI,eAAC,IAAD,CACIR,UAAU,qBACVygB,GAAG,+BAFP,UAGI,qBACIzgB,UAAU,UACVkN,MAAM,KACN3F,OAAO,OANf,uFAahB,uBACA,eAACnH,EAAA,EAAD,CAAQC,QAAQ,iBAAiBoG,QA7E3B,WACdkG,E9BAsB,CAC1BzK,KAAM,a8BAFyD,EAAM0C,QAAQC,QAAQ,MA2Ed,UACI,mBAAGtI,UAAU,sBAAsBQ,cAAY,SADnD,+GCpBDiJ,gBA5DQ,SAAC9D,GACpB,IAAMX,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACtC2H,EAAWC,eAMjB,OACI,eAAC1M,EAAA,EAAD,CAAK6V,GAAG,QAAQ/V,UAAU,mDAA1B,UACI,cAACI,EAAA,EAAD,CACIsB,MAAO,CAAE3B,OAAQ,OAAQka,QAAQ,GACjC5Z,QAAQ,kBACRL,UAAU,mFAHd,SAII,mBAAGA,UAAU,aAAaQ,cAAY,WAE1C,cAAC,IAAD,CACIggB,OAAK,EACLC,GAAI5a,IAAQvC,OAAO2L,OAAO/T,QAC1B8E,UAAU,WACV0gB,eAAa,OAJjB,SAKI,mBAAG1gB,UAAU,eAAeQ,cAAY,WAE5C,cAAC,IAAD,CACIR,UAAU,qBACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOpT,kBAF9B,SAGI,mBAAGmE,UAAU,cAAcQ,cAAY,WAE3C,cAAC,IAAD,CACIR,UAAU,qBACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOrT,SAF9B,SAGI,mBAAGoE,UAAU,eAAeQ,cAAY,WAE5C,uBACCwE,GAAUA,EAAOiX,SACd,eAAC,WAAD,WAEI,cAAC,IAAD,CACIjc,UAAU,gCACVygB,GAAI5a,IAAQvC,OAAO2L,OAAOnT,QAF9B,SAGI,mBAAGkE,UAAU,oBAAoBQ,cAAY,WAEjD,cAAC,IAAD,CACIR,UAAU,qBACVygB,GAAG,+BAFP,SAGI,qBAAKzgB,UAAU,UAAUkN,MAAM,KAAK3F,OAAO,YAIvD,uBACA,cAACnH,EAAA,EAAD,CACIJ,UAAU,aACVK,QAAQ,iBACRoG,QAlDM,WACdkG,E/BAsB,CAC1BzK,KAAM,a+BAFyD,EAAM0C,QAAQC,QAAQ,MA6ClB,SAII,mBAAGtI,UAAU,iBAAiBQ,cAAY,iBC3B3CmgB,GA1BY,SAAC,GAAyB,EAAvB/a,OAAwB,IAAhBwH,EAAe,EAAfA,SAC5B3J,EAAOgI,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACpCyN,EAAUC,qBAAWJ,IAC3B,OACI,eAAC,WAAD,WACI,cAAC,GAAD,IACC7O,GAAQ,cAAC,GAAD,IACPgP,EAAQD,SAAWQ,UAAQuN,QACzB,eAACrgB,EAAA,EAAD,CAAKF,UAAU,gBAAf,UACI,cAACwG,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACI,cAAC,GAAD,MAEJ,cAAC3M,EAAA,EAAD,UAAM4G,OAGV,eAAClN,EAAA,EAAD,CAAKF,UAAU,gBAAf,UACI,cAACwG,EAAA,EAAD,CAAK2M,GAAI,EAAT,SACI,cAAC,GAAD,MAEJ,cAAC3M,EAAA,EAAD,UAAM4G,W,UC8DXwT,GApFO,WACrB,IAAM5b,EAASyG,cAAY,SAACvG,GAAD,OAAWA,EAAMF,UACtCyN,EAAUC,qBAAWJ,IAE3B,OACC,cAACuO,GAAA,EAAD,CAAQ9K,GAAG,QAAQ/V,UAAU,uBAA7B,SACC,cAACuG,EAAA,EAAD,CAAWvG,UAAU,aAArB,SACC,eAAC0a,GAAA,EAAD,CAAK1a,UAAU,UAAf,UACC,eAAC,IAAD,CACCA,UAAU,wBACV8gB,gBAAgB,wBAChBL,GACCzb,EACG1B,SAAO2L,OAAO/T,QACdoI,SAAO2L,OAAO3T,OANnB,UAQC,mBACC0E,UAAU,0BACVQ,cAAY,SACZwE,EACEyN,EAAQD,SAAWQ,UAAQE,YAAclO,EAAOmF,SAChD,2CAEJ,eAAC,IAAD,CACCnK,UAAU,wBACVygB,GAAInd,SAAO2L,OAAO5T,KAClBmlB,OAAK,EACLM,gBAAgB,kCAJjB,UAKC,mBAAG9gB,UAAU,kBAAkBQ,cAAY,SAC1CiS,EAAQD,SAAWQ,UAAQuN,SAAW,uDAGxC,eAAC,IAAD,CACCvgB,UAAU,wBACVygB,GAAInd,SAAO2L,OAAOzT,SAClBslB,gBAAgB,kCAHjB,UAIC,mBACC9gB,UAAU,qBACVQ,cAAY,SACZiS,EAAQD,SAAWQ,UAAQuN,SAAW,2CAEvCvb,GACA,eAAC,IAAD,CACChF,UAAU,wBACVygB,GAAInd,SAAO2L,OAAOrT,SAClBklB,gBAAgB,kCAHjB,UAIC,mBACC9gB,UAAU,qBACVQ,cAAY,SACZiS,EAAQD,SAAWQ,UAAQuN,SAAW,qCAIzC,eAAC,IAAD,CACCvgB,UAAU,wBACVygB,GAAInd,SAAO2L,OAAOxT,SAClBqlB,gBAAgB,kCAHjB,UAIC,mBACC9gB,UAAU,qBACVQ,cAAY,SACZiS,EAAQD,SAAWQ,UAAQuN,SAAW,0CAExC,eAAC,IAAD,CACCvgB,UAAU,wBACVygB,GAAInd,SAAO2L,OAAOvT,UAClBolB,gBAAgB,kCAHjB,UAIC,mBAAG9gB,UAAU,iBAAiBQ,cAAY,SACzCiS,EAAQD,SAAWQ,UAAQuN,SAAW,0CAExC,eAAC,IAAD,CACCvgB,UAAU,wBACVygB,GAAInd,SAAO2L,OAAOtT,UAClBmlB,gBAAgB,kCAHjB,UAIC,mBACC9gB,UAAU,0BACVQ,cAAY,SACZiS,EAAQD,SAAWQ,UAAQuN,SAAW,gECR9BQ,GA1DH,WACX,OACC,eAAC,IAAD,WACC,cAAC,IAAD,IACA,cAAC,GAAD,IAEA,eAAC,IAAD,WACC,cAAC,IAAD,CAAOC,KAAI,UAAK1d,SAAO2L,OAAO/T,QAAnB,WAAqCslB,OAAK,EAArD,SACC,cAAC,GAAD,UACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOQ,KAAM1d,SAAO2L,OAAOpT,kBAA3B,SACC,cAAC,GAAD,MAED,cAAC,IAAD,CAAOmlB,KAAM1d,SAAO2L,OAAOnT,QAA3B,SACC,cAAC,GAAD,MAGD,cAAC,IAAD,CAAOklB,KAAM1d,SAAO2L,OAAOrT,SAA3B,SACC,cAAC,GAAD,MAGD,cAAC,IAAD,CAAO4kB,OAAK,EAACQ,KAAM1d,SAAO2L,OAAO/T,QAAjC,SACC,cAAC,GAAD,aAKJ,cAAC,IAAD,UACC,cAAC,GAAD,UACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAO8lB,KAAM1d,SAAO2L,OAAO3T,OAA3B,SACC,cAAC,GAAD,MAGD,cAAC,IAAD,CAAO0lB,KAAM1d,SAAO2L,OAAOzT,SAA3B,SACC,cAAC,GAAD,MAED,cAAC,IAAD,CAAOwlB,KAAM1d,SAAO2L,OAAOxT,SAA3B,SACC,cAACA,GAAD,MAED,eAAC,IAAD,CAAOulB,KAAM1d,SAAO2L,OAAOvT,UAA3B,UACC,cAAC,EAAD,IADD,OAGA,cAAC,IAAD,CAAOslB,KAAM1d,SAAO2L,OAAOtT,UAA3B,SACC,cAAC,EAAD,MAGD,cAAC,IAAD,CAAOqlB,KAAM1d,SAAO2L,OAAO5T,KAAMmlB,OAAK,EAAtC,SACC,cAAC,EAAD,oB,SCvDKS,GAAWC,aAAgB,CACpClc,OCXyB,WAA2B,IAA1BE,EAAyB,uDAAjB,KAAMic,EAAW,uCACnD,OAAQA,EAAOjf,MACX,IAAK,UACD,OAAOif,EAAOlV,QAClB,IAAK,WAED,OADAnO,eAAesjB,QACR,KAGX,QACI,OAAOlc,IDEf+K,SEZ2B,WAA2B,IAA1B/K,EAAyB,uDAAjB,KAAMic,EAAW,uCACrD,OAAQA,EAAOjf,MACX,IAAK,gBACD,OAAOif,EAAOlV,QAClB,IAAK,iBACD,OAAO,KACX,QACI,OAAO/G,IFMfiH,KGbuB,WAA+C,IAA9CjH,EAA6C,uDAArC,CAACjE,KAAM,KAAMiB,KAAM,MAAOif,EAAW,uCACrE,OAAQA,EAAOjf,MACX,IAAK,WAAL,MACyBif,EAAOlV,QAArBhL,EADX,EACWA,KAAMiB,EADjB,EACiBA,KACb,MAAO,CAACjB,OAAMiB,QAGlB,IAAK,aACD,MAAO,CAACjB,KAAM,KAAMiB,KAAM,MAC9B,QACI,OAAOgD,IHIfqI,WIZ6B,WAA4C,IAA3CrI,EAA0C,uDAAlC,CAAC2H,GAAI,KAAMgB,IAAK,MAAOsT,EAAW,uCACxE,OAAQA,EAAOjf,MACX,IAAK,oBACD,OAAOif,EAAOlV,QAClB,IAAK,mBACD,MAAO,CAACY,GAAI,KAAMgB,IAAK,MAC3B,QACI,OAAO3I,IJMfgL,MKfwB,WAOtB,IANFhL,EAMC,uDANO,CACJmc,iBAAiB,EACjB1P,yBAAyB,EACzBC,eAAe,GAEnBuP,EACC,uCACD,OAAQA,EAAOjf,MACX,IAAK,iBACD,MAAO,CACHmf,iBAAkBnc,EAAMmc,gBACxB1P,wBAAyBzM,EAAMyM,wBAC/BC,cAAe,MAEvB,IAAK,0BACD,MAAO,CACHyP,gBAAiBnc,EAAMmc,gBACvB1P,yBAA0BzM,EAAMyM,wBAChCC,cAAe,MAEvB,IAAK,sBACD,MAAO,CACHyP,gBAAiBnc,EAAMmc,gBACvB1P,wBAAyBzM,EAAMyM,wBAC/BC,cAAeuP,EAAOlV,SAE9B,QACI,OAAO/G,ILZfwG,WMf6B,WAA6C,IAA5CxG,EAA2C,uDAAnC,CAAClE,QAAS,EAAG2K,MAAO,GAAIwV,EAAW,uCACzE,OAAQA,EAAOjf,MACX,IAAK,oBAAL,MAC6Bif,EAAOlV,QAAzBjL,EADX,EACWA,QAAS2K,EADpB,EACoBA,MAChB,MAAO,CAAC3K,UAAS2K,SAErB,QACI,OAAOzG,INSfwH,QOjB0B,WAGxB,IAFFxH,EAEC,uDAFO,CAAE6M,KAAM,KAAMhF,SAAU,MAChCoU,EACC,uCACD,OAAQA,EAAOjf,MACX,IAAK,kBAAoB,IAAD,EACaif,EAAOlV,QAAhCK,EADY,EACZA,SAAUrL,EADE,EACFA,KAAMI,EADJ,EACIA,KACxB,MAAO,CACH0L,SAAU,CAAE9L,OAAMqL,WAAUjL,OAAM2N,QAAQ,GAC1C+C,KAAM7M,EAAM6M,MAGpB,IAAK,eAAiB,IAAD,EACgBoP,EAAOlV,QAAhCK,EADS,EACTA,SAAUrL,EADD,EACCA,KAAMI,EADP,EACOA,KAExB,OADAV,QAAQC,IAAI,UAAWugB,EAAOlV,SACvB,CAAE8F,KAAM,CAAE9Q,OAAMqL,WAAUjL,QAAQ0L,SAAU7H,EAAM6H,UAE7D,IAAK,iBAED,OADI7H,EAAM6H,WAAU7H,EAAM6H,SAASiC,QAAS,GACrC9J,EACX,IAAK,iBACD,MAAO,CAAE6M,KAAM,KAAMhF,SAAU,MACnC,QACI,OAAO7H,IPLfrH,MQhBwB,WAA2B,IAA1BqH,EAAyB,uDAAjB,KAAMic,EAAW,uCAClD,OAAQA,EAAOjf,MACX,IAAK,aACD,OAAOU,iBAAe5E,QAG1B,QACI,OAAOkH,MCNNoc,GAAQC,aACjBN,GACAjP,OAAOwP,8BAAgCxP,OAAOwP,gC,UCmBnCC,GArBM,SAAC,GAAgB,IAAfrU,EAAc,EAAdA,SACbsU,EAAYC,yBAAc,CAAEC,MAAO,wBACnCC,EAAeF,yBAAc,CAAEC,MAAO,uBACtCE,GAAYJ,IAAcG,EAHC,EAILviB,mBAAS,MAJJ,mBAI1BkT,EAJ0B,KAIlBuP,EAJkB,KAcjC,OATAphB,QAAQC,IAAI,UACZf,qBAAU,WAGNkiB,EACI,CAACL,EAAWI,EAAUD,GAAcpO,WAAU,SAACuO,GAAD,OAAUA,QAE7D,CAACN,EAAWI,EAAUD,IAGrB,cAAC,GAAcI,SAAf,CAAwB7Y,MAAO,CAACoJ,UAAhC,SACKpF,KCbb8U,iBACC,cAAC,KAAD,CAAUZ,MAAOA,GAAjB,SACC,cAAC,GAAD,UACC,cAAC,GAAD,QAGFla,SAAS+a,eAAe,U,kBCZzB,IAAMC,EAAeC,EAAQ,KACvBC,EAAeD,EAAQ,KACvBpf,EAASof,EAAQ,KACjBzf,EAAiByf,EAAQ,KACzB/M,EAAc+M,EAAQ,KAE5BlnB,EAAOC,QAAU,CACbwH,iBACAU,OAAQ,CAAED,OAAQif,EAAcrT,OAAQmT,GACxCnf,SACAqS,cACAtC,QAAQ,CAAEE,WAAY,EAAGD,OAAQ,EAAGsN,QAAS,K","file":"static/js/main.a4a4b21a.chunk.js","sourcesContent":["//client routes\r\n\r\n// Partial Routes\r\nconst Profile = \"/Profile\",\r\n    ChatRoom = \"ChatRoom\",\r\n    MyGamesAndFriends = \"GamesFriends\",\r\n    Notices = \"Notices\";\r\n\r\nmodule.exports = {\r\n    Root: \"/\",\r\n    SignUp: \"/SignUp\",\r\n    SignIn: \"/SignIn\",\r\n    GameDeck: \"/GameDeck\",\r\n    Rankings: \"/Rankings\",\r\n    GameGuide: \"/GameGuide\",\r\n    ContactUs: \"/ContacUs\",\r\n    Profile,\r\n    ChatRoom: `${Profile}/${ChatRoom}`,\r\n    MyGamesAndFriends: `${Profile}/${MyGamesAndFriends}`,\r\n    Notices: `${Profile}/${Notices}`,\r\n};\r\n","//local routes\r\nmodule.exports = {\r\n    Root: \"http://localhost:4000\",\r\n    WebSocketRoot: \"ws://localhost:4000/ws\",\r\n    wsGamePlayRoute: \"gameplay\",\r\n    wsGlobalRoute: \"global\",\r\n    SignUp: \"signup\",\r\n    SignIn: \"signin\",\r\n    Users: \"users\",\r\n    Credentials: \"credentials\",\r\n    PasswordChange: \"password\",\r\n    Friends: 'friends',\r\n    Public: \"public\",\r\n    Administrators: \"administrators\",\r\n    Games: \"games\",\r\n    Mine: \"mine\",\r\n    Chats: \"chats\",\r\n    Notices: \"notices\",\r\n    NoticeManagement: \"manage\"\r\n};","const isErrorExpected = (error) => {\r\n    return (\r\n        error.response &&\r\n        error.response.status >= 400 && // >= 400\r\n        error.response.status < 500\r\n    );\r\n};\r\n\r\nmodule.exports = {\r\n    Successful: 200,\r\n    CreatedSuccessfully: 201,\r\n    BadRequest: 400,\r\n    Unauthorized: 401,\r\n    Forbidden: 403,\r\n    NotFound: 404,\r\n    NotAcceptable: 406,\r\n    Conflict: 409,\r\n    SessionExpired: 420,\r\n    UnprocessableEntity: 422,\r\n    InternalServerError: 500,\r\n    isErrorExpected,\r\n};\r\n","//browser storage keywords\r\nconst KeyToken = \"ptk\",\r\n    KeyID = \"pid\";\r\n\r\nmodule.exports = {\r\n    writeUser: (id, token) => {\r\n        // use remember me option\r\n        sessionStorage.setItem(KeyID, id); // localStorage or sessionStorage?\r\n        sessionStorage.setItem(KeyToken, token);\r\n    },\r\n    TOKEN: () => sessionStorage.getItem(KeyToken),\r\n    ID: () => sessionStorage.getItem(KeyID),\r\n};\r\n","module.exports = {\r\n    T3D: {\r\n        TableRowMargings: [0, 40, 80, 120, 160],\r\n        TurnTimeOut: 45, //secs\r\n    },\r\n};\r\n","import DateObject from \"react-date-object\";\r\nimport persian from \"react-date-object/calendars/persian\";\r\nimport persian_fa from \"react-date-object/locales/persian_fa\";\r\n\r\nconst objectify = (date) => {\r\n    return new DateObject({\r\n\t\tdate: new Date(date),\r\n\t\tcalendar: persian,\r\n\t\tlocale: persian_fa,\r\n\t});\r\n}\r\nexport const toHijri = (date) => {\r\n\treturn [\r\n\t\tobjectify(date).format(\"dddd DD MMMM YYYY\"),\r\n\t\tobjectify(date).format(\"hh:mm\"),\r\n\t];\r\n};\r\n\r\nexport const toTimeShort = (date) => {\r\n\treturn objectify(date).format(\"hh:mm\");\r\n};\r\n","import { Button, Card, Row } from \"react-bootstrap\";\r\nimport \"./scores.css\";\r\nimport { useEffect, useState } from 'react';\r\nimport { toHijri } from \"../../tools/format\";\r\n\r\nconst SingleScoreCard = ({\r\n    Type,\r\n    date,\r\n    playerXName,\r\n    playerOName,\r\n    xScore,\r\n    oScore,\r\n}) => {\r\n    // format score text:\r\n    const [xBadge, setXBadge] = useState(null);\r\n    const [oBadge, setOBadge] = useState(null);\r\n    const [hijriDate, setHijriDate] = useState(null);\r\n    useEffect(() => {\r\n        setHijriDate(toHijri(date)[0]);//toHijri = [date, time]\r\n        if (xScore > oScore) {\r\n            // x won\r\n            setXBadge(\"badge-success\");\r\n            setOBadge(\"badge-danger\");\r\n        } else if (xScore === oScore) {\r\n            //draw\r\n            setXBadge(\"badge-warning\");\r\n            setOBadge(\"badge-warning\");\r\n        } else {\r\n            // o won\r\n            setOBadge(\"badge-success\");\r\n            setXBadge(\"badge-danger\");\r\n        }\r\n    }, [date, xScore, oScore]);\r\n    // make this card 'bg-transparent' too?\r\n    return (\r\n        <Card border=\"dark\" className=\"single-score-card\">\r\n            {/* <Card.Header className=\"text-center border-dark\">{`T3D ${Type}x${Type}x${Type}`}</Card.Header> */}\r\n            <Card.Body>\r\n                <Row className=\"text-center mx-auto\">\r\n                    <span className=\"col-5\">{playerXName}</span>\r\n                    <span\r\n                        className={`badge badge-pill ${xBadge} single-score-badge col-1`}>\r\n                        {xScore}\r\n                    </span>\r\n\r\n                    <span\r\n                        className={`badge badge-pill ${oBadge} single-score-badge col-1`}>\r\n                        {oScore}\r\n                    </span>\r\n                    <span className=\"col-5\">{playerOName}</span>\r\n                </Row>\r\n            </Card.Body>\r\n            <Card.Footer className=\"p-0\">\r\n                <Button\r\n                    variant=\"outline-dark\"\r\n                    block\r\n                    size=\"lg\"\r\n                    className=\"replay-game-button\">\r\n                        {hijriDate} \r\n                        <i className=\"fa fa-pie-chart px-3\" aria-hidden=\"true\"></i>\r\n                </Button>\r\n            </Card.Footer>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default SingleScoreCard;\r\n","import { Fragment } from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport SingleScoreCard from \"./SingleScoreCard\";\r\n\r\nconst AllScores = ({scores}) => {\r\n    console.log(scores);\r\n    return ( \r\n        <Fragment>\r\n            { scores.length ? scores.map(score => (\r\n                <SingleScoreCard key={score.gameID}\r\n                    Type={score.Type}\r\n                    date={score.date}\r\n                    playerXName={score.players[0].name}\r\n                    playerOName={score.players[1].name}\r\n                    xScore={score.players[0].score}\r\n                    oScore={score.players[1].score}\r\n                ></SingleScoreCard>\r\n            )) :\r\n            <Card className=\"bg-transparent mx-auto mt-3\" border=\"danger\">\r\n                <Card.Body className=\"text-center\">\r\n                    <Card.Text>\r\n                        هیچ بازی ای انجام نگرفته است\r\n                    </Card.Text>\r\n                </Card.Body>\r\n                </Card>}\r\n        </Fragment>\r\n     );\r\n};\r\n \r\nexport default AllScores;","import { toast } from \"react-toastify\";\r\n\r\nexport const Sorry = (text) => {\r\n    toast.error(text, {\r\n        // theme: \"light\",\r\n        position: \"top-right\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-times\" aria-hidden=\"true\"></i>,\r\n    });\r\n    \r\n};\r\n\r\nexport const OK = (text) => {\r\n    toast.success(text, {\r\n        // theme: \"light\",\r\n        position: \"top-left\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-check\" aria-hidden=\"true\"></i>,\r\n    });\r\n    \r\n};\r\n\r\nexport const Notify = (text) => {\r\n    toast.info(text, {\r\n        // theme: \"light\",\r\n        position: \"top-center\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-info\" aria-hidden=\"true\"></i>,\r\n    });  \r\n};\r\n\r\nexport const Attention = (text) => {\r\n    /*toast.warn(text, {\r\n        type: \"colored\",\r\n        position: \"top-center\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-gavel\" aria-hidden=\"true\"></i>,\r\n    });*/\r\n    toast.warn(text, {\r\n        type: \"dark\",\r\n        position: \"top-center\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right'}} className=\"fa fa-gavel\" aria-hidden=\"true\"></i>,\r\n    });\r\n    \r\n};\r\n\r\nexport const NewMsg = ({name, text}) => {\r\n    toast(`${name} : ${text}`, {\r\n        type: \"dark\",\r\n        position: \"top-left\",\r\n        closeOnClick: true,\r\n        icon: <i style={{float:'right', textAlign: 'right'}} className=\"fa fa-envelope-o\" aria-hidden=\"true\"></i>,\r\n    });\r\n}","import axios from \"axios\";\r\nimport { Status, browserStorage } from \"../configs\";\r\nimport { Attention, Sorry } from \"../../tools/msgbox\";\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\naxios.defaults.headers.put[\"Content-Type\"] = \"application/json\";\r\n\r\n// put token in all request headers:\r\naxios.interceptors.request.use(\r\n    (config) => {\r\n        const token = browserStorage.TOKEN();\r\n        if (token) config.headers.Authorization = `Bearer ${token}`;\r\n        else config.headers.Authorization = \"\";\r\n        // console.log(config.headers.Authorization);\r\n        return config;\r\n    },\r\n    (error) => {\r\n        // what to do?\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n// what the f should i do?\r\n// (() => {\r\n//     const token = sessionStorage.getItem(\"token\");\r\n//     if (token)\r\n//         axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n//     else {\r\n//         delete axios.defaults.headers.common[\"Authorization\"];\r\n//         /*if setting null does not remove `Authorization` header then try\r\n//               delete axios.defaults.headers.common['Authorization'];\r\n//             */\r\n//     }\r\n//     console.log(\"token\", token);\r\n// })();\r\n\r\naxios.interceptors.response.use(null, (error) => {\r\n    const expectedErrors =\r\n        error.response &&\r\n        error.response.status >= Status.BadRequest && // >= 400\r\n        error.response.status < Status.InternalServerError; // < 500\r\n\r\n    //*****notice: */\r\n    //remove some oftheese errors... because they need to be costomized in every use in each components\r\n    // change to switch\r\n    if (error.response.status === Status.BadRequest) {\r\n        Sorry(\"مشکلی در ارسال درخواست شما به سرور وجود داشت، لطفا دوباره تلاش کنید\");\r\n    } else if (error.response.status === Status.Unauthorized) {\r\n        Sorry(\"احراز هویت موفقیت آمیز نبود. لطفا وارد حساب کاربری خود شوید\");\r\n    } else if (error.response.status === Status.Forbidden) {\r\n        Sorry(\"شماره دانشجویی یا رمز عبور نادرست است\");\r\n    } else if (error.response.status === Status.NotAcceptable) {\r\n        //or used Locked: 423\r\n        Sorry(\"این قسمت فقط مختص کاربران ادمین می باشد\");\r\n    } else if (error.response.status === Status.Conflict) {\r\n        Attention(\"کاربری با این شماره دانشجویی یا ایمیل قبلا ثبت نام کرده است\");\r\n    } else if (error.response.status === Status.SessionExpired) {\r\n        Sorry(\"نشست شما منقضی شده است، لطفا دوباره وارد حساب خود شوید.\");\r\n        //redirect to sign in page !\r\n    } else if (error.response.status === Status.UnprocessableEntity) {\r\n        Sorry(\"ورودی شما با استانداردهای سایت مطابقت ندارد\");\r\n    } else if (!expectedErrors) {\r\n        // console.log(error);\r\n        Sorry(\"مشکلی از سمت سرور پیش آمده است ... لطفا لحظاتی بعد دوباره تلاش کنید\");\r\n    }\r\n\r\n    return Promise.reject(error);\r\n});\r\n\r\nconst http = {\r\n    get: axios.get,\r\n    post: axios.post,\r\n    put: axios.put,\r\n    delete: axios.delete,\r\n};\r\n\r\nexport default http;\r\n","import http from \"./httpService\";\r\nimport { Routes } from \"../configs\";\r\n\r\nconst {Server} = Routes;\r\n\r\nconst userServices = {\r\n    signUp: (user) => {\r\n        return http.post(\r\n            `${Server.Root}/${Server.Users}/${Server.SignUp}`,\r\n            JSON.stringify(user)\r\n        );\r\n    },\r\n    signIn: (user) => {\r\n        console.log(`${Server.Root}/${Server.Users}/${Server.SignIn}`);\r\n        return http.post(\r\n            `${Server.Root}/${Server.Users}/${Server.SignIn}`,\r\n            JSON.stringify(user)\r\n        );\r\n    },\r\n    getPlayer: (userID) => {\r\n        return http.get(\r\n            `${Server.Root}/${Server.Users}/${Server.Public}/${userID}`\r\n        );\r\n    },\r\n    getAllPlayers: () => {\r\n        return http.get(`${Server.Root}/${Server.Users}/${Server.Public}`);\r\n    },\r\n    getMyCredentials: () => {\r\n        //token will be sent automatically, o.w. method doesnt return anything\r\n        return http.get(`${Server.Root}/${Server.Users}/${Server.Credentials}`);\r\n    },\r\n    editMyCredentials: (newMe) => {\r\n        return http.put(\r\n            `${Server.Root}/${Server.Users}/${Server.Credentials}`,\r\n            JSON.stringify(newMe)\r\n        );\r\n    },\r\n    changeMyPassword: (passwords) => {\r\n        return http.put(\r\n            `${Server.Root}/${Server.Users}/${Server.Credentials}/${Server.PasswordChange}`,\r\n            JSON.stringify(passwords)\r\n        );\r\n    },\r\n    getMyFriends: () => {\r\n        return http.get(`${Server.Root}/${Server.Users}/${Server.Credentials}/${Server.Friends}`);\r\n    },\r\n    isMyFriend: (targetID) => {\r\n        return http.get(\r\n            `${Server.Root}/${Server.Users}/${Server.Credentials}/${Server.Friends}/${targetID}`\r\n        );\r\n    },\r\n    isAdministrator: (userID) => {\r\n        return http.get(\r\n            `${Server.Root}/${Server.Users}/${Server.Administrators}/${userID}`\r\n        );\r\n    }\r\n};\r\n\r\nexport default userServices;","import { Routes, Status } from '../configs';\r\n\r\nimport http from \"./httpService\";\r\nimport userServices from \"./userServices\";\r\n\r\nconst {Server} = Routes;\r\n\r\nconst gameServices = {\r\n    \r\n    getAllGames: () => {\r\n        return http.get(`${Server.Root}/${Server.Games}`);\r\n    },\r\n    getMyGames: () => {\r\n        return http.get(`${Server.Root}/${Server.Games}/${Server.Mine}`);\r\n    },\r\n    loadPlayerData: async(userID) => {\r\n        if (userID) var { data, status } = await userServices.getPlayer(userID);\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (userID === null) reject(null);\r\n            if (status === Status.Successful) resolve(data.player);\r\n            reject(null); //create a guest profile\r\n        });\r\n    },\r\n};\r\n\r\nexport default gameServices;","import \"./scores.css\";\r\nimport { Component } from \"react\";\r\nimport AllScores from \"./AllScores\";\r\nimport gameServices from \"../../services/http/gameServices\";\r\nimport Configs from \"../../services/configs\";\r\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\r\n\r\nclass ScoresTable extends Component {\r\n    state = {\r\n        liveScores: [],\r\n        finalScores: [],\r\n        showLiveOnes: false,\r\n        loading: false,\r\n    };\r\n\r\n    componentDidMount() {\r\n        console.log('CHecking prop: ', this.props.Device);\r\n        // get all game results , live or final, handling promises\r\n        // client and server side for this Module seriously need to be edited\r\n        (async () => {\r\n            this.setState({ loading: true }); // use preloader here?\r\n            const { data, status } = await gameServices.getAllGames();\r\n            if (status === Configs.Status.Successful) return data.allGames;\r\n            return [];\r\n        })()\r\n            .then((result) => {\r\n                result = result.reverse();\r\n                this.setState({\r\n                    liveScores: result.filter((game) => game.isLive),\r\n                    finalScores: result.filter((game) => !game.isLive),\r\n                    loading: false,\r\n                });\r\n                //EDIT EDIT EDIT\r\n            })\r\n            .catch((err) => {\r\n                //******* handle errors */\r\n                // console.log(err);\r\n                this.setState({ finalScores: [], loading: false });\r\n            });\r\n    }\r\n\r\n    btnShowLiveScores = () => {\r\n        this.setState({ showLiveOnes: true });\r\n    };\r\n\r\n    btnShowFinalScores = () => {\r\n        this.setState({ showLiveOnes: false });\r\n    };\r\n\r\n    \r\n    render() {\r\n       \r\n        // game replay? is it a good idea DataBase Size-Wise ? ===> if true: see 1st page of the notebook\r\n        /* add a NextGames button maybe? (گزینه بازی های اینده) */\r\n        let { liveScores, finalScores, showLiveOnes } = this.state;\r\n\r\n        // DESIGN : USE <Tabs> ???\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col>\r\n                        <Button\r\n                            variant={\r\n                                showLiveOnes\r\n                                    ? \"outline-success\"\r\n                                    : \"outline-primary\"\r\n                            }\r\n                            className=\"scores-mode-select-button\"\r\n                            onClick={this.btnShowLiveScores}>\r\n                            نتایج زنده\r\n                            <i\r\n                                className=\"fa fa-play-circle px-3\"\r\n                                aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button\r\n                            variant={\r\n                                !showLiveOnes\r\n                                    ? \"outline-success\"\r\n                                    : \"outline-primary\"\r\n                            }\r\n                            className=\"scores-mode-select-button\"\r\n                            onClick={this.btnShowFinalScores}>\r\n                            نتایج نهایی\r\n                            <i\r\n                                className=\"fa fa-play-circle px-3\"\r\n                                aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        {/* this single column is to make mode select buttons and Allscores same width */}\r\n                        <AllScores\r\n                            scores={showLiveOnes ? liveScores : finalScores}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ScoresTable;\r\n","import './info.css'\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst GameGuide = () => {\r\n    return ( \r\n        <Card border=\"warning\" className=\"simple-single-card\" >\r\n            <Card.Header className=\"text-center\">راهنمای بازی</Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                <Card.Text>دانشگاه علم و صنعت ایران</Card.Text>\r\n                <Card.Text>E-mail: <a href=\"https://mail.google.com\">thcplusplus@gmail.com</a></Card.Text>\r\n                <Card.Text>Phone Number: 0000000000000</Card.Text>\r\n                <Card.Text>اطلاعات تماس استاد</Card.Text>\r\n                <Card.Text>instagram: ......</Card.Text>\r\n                <Card.Text>blah blah blah</Card.Text>\r\n            </Card.Body>\r\n        </Card>\r\n     );\r\n}\r\n \r\nexport default GameGuide;","import { Card } from 'react-bootstrap';\r\nimport './info.css'\r\n\r\nconst ContactUs = () => {\r\n    return ( \r\n        <Card border=\"dark\" className=\"simple-single-card\" >\r\n            <Card.Header className=\"text-center\">اطلاعات تماس</Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                <Card.Text>دانشگاه علم و صنعت ایران</Card.Text>\r\n                <Card.Text>E-mail: <a href=\"https://mail.google.com\">thcplusplus@gmail.com</a></Card.Text>\r\n                <Card.Text>Phone Number: 0000000000000</Card.Text>\r\n                <Card.Text>اطلاعات تماس استاد</Card.Text>\r\n                <Card.Text>instagram: ......</Card.Text>\r\n                <Card.Text>blah blah blah</Card.Text>\r\n            </Card.Body>\r\n        </Card>\r\n     );\r\n}\r\n \r\nexport default ContactUs;","import { Fragment, useLayoutEffect, useState, useEffect } from \"react\";\r\nimport { Planets, Circle2, Sugar } from \"react-preloaders2\";\r\n\r\nconst LoadingBar = ({ loading }) => {\r\n    const [whichOne, setWhichOne] = useState(0);\r\n    useEffect(() => {\r\n        setWhichOne(Math.floor(Math.random() * 100)); //randomize animation\r\n    }, []);\r\n    useLayoutEffect(() => {\r\n        document.body.style = { overflowY: \"auto\" };\r\n        document.body.style = { height: \"auto\" };\r\n    }, [loading, whichOne]); //may have bug yet!!\r\n    //random animation\r\n    const selectedLoader =\r\n        whichOne % 3 === 0 ? (\r\n            <Circle2 time={0} customLoading={loading} />\r\n        ) : whichOne % 3 === 1 ? (\r\n            <Planets time={0} customLoading={loading} />\r\n        ) : (\r\n            <Sugar time={0} customLoading={loading} />\r\n        );\r\n\r\n    return <Fragment>{loading ? selectedLoader : null}</Fragment>;\r\n};\r\n\r\nexport default LoadingBar;\r\n","import { Button, Form, Modal, Row } from \"react-bootstrap\";\r\nimport { Component, Fragment } from \"react\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nclass ModalSignIn extends Component {\r\n    // *********************Objectives***********************\r\n    // 1. handle errors particularly\r\n    state = {\r\n        showModal: false,\r\n        studentID: \"\",\r\n        password: \"\",\r\n        loading: false,\r\n    };\r\n\r\n    onCloseClick = () => this.setState({ showModal: false });\r\n    onShowClick = () => this.setState({ showModal: true });\r\n\r\n    onSignInSubmitted = async (event) => {\r\n        event.preventDefault();\r\n        this.setState({ loading: true });\r\n        const { studentID, password } = this.state;\r\n        const user = { studentID: Number(studentID), password };\r\n        try {\r\n            const { status, data } = await userServices.signIn(user);\r\n            if (status === Configs.Status.Successful) {\r\n                browserStorage.writeUser(data.userID, data.token);\r\n                this.props.history.replace(\"/\");\r\n            }\r\n        } catch (err) {\r\n            // check nonserver errors\r\n            this.setState({ password: \"\" });\r\n            if (!Configs.Status.isErrorExpected(err))\r\n                toast.error(\r\n                    \".ورود با مشکل رو به رو شد. لطفا دوباره تلاش کتنید.\",\r\n                    { position: \"top-right\", closeOnClick: true }\r\n                );\r\n        }\r\n        this.setState({ loading: false });\r\n    };\r\n\r\n    onForgotPasswordClick = () => {};\r\n\r\n    render() {\r\n        const { showModal, studentID, password, loading } = this.state;\r\n\r\n        return (\r\n            <Fragment>\r\n                <LoadingBar loading={loading} />\r\n                <Button variant=\"outline-primary\" onClick={this.onShowClick}>\r\n                    <i className=\"fa fa-user px-2\" aria-hidden=\"true\"></i>\r\n                    ورود کاربران\r\n                </Button>\r\n\r\n                <Modal\r\n                    backdrop=\"static\"\r\n                    show={showModal}\r\n                    onHide={this.onCloseClick}>\r\n                    <Modal.Header closeButton></Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                        <Form\r\n                            className=\"m-4 text-right\"\r\n                            onSubmit={(event) => this.onSignInSubmitted(event)}>\r\n                            <Form.Group className=\"mb-3 form-inline\">\r\n                                <Form.Label className=\"w-25\">\r\n                                    شماره دانشجویی\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    className=\"w-75 text-left\"\r\n                                    placeholder=\"Student ID\"\r\n                                    autoComplete=\"username\"\r\n                                    value={studentID}\r\n                                    onChange={(e) =>\r\n                                        this.setState({\r\n                                            studentID: e.target.value,\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group\r\n                                className=\"mb-3 form-inline\"\r\n                                controlId=\"formBasicPassword\">\r\n                                <Form.Label className=\"w-25\">\r\n                                    رمز عبور\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    type=\"password\"\r\n                                    className=\"w-75 text-left\"\r\n                                    placeholder=\"Password\"\r\n                                    autoComplete=\"current-password\"\r\n                                    value={password}\r\n                                    onChange={(e) =>\r\n                                        this.setState({\r\n                                            password: e.target.value,\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </Form.Group>\r\n                            <hr />\r\n                            <Row>\r\n                                <Button\r\n                                    className=\"w-50\"\r\n                                    type=\"submit\"\r\n                                    variant=\"outline-success\">\r\n                                    <i\r\n                                        className=\"fa fa-sign-in px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                    ورود\r\n                                </Button>\r\n                                <Button\r\n                                    className=\"w-50\"\r\n                                    variant=\"outline-warning\"\r\n                                    onClick={this.onForgotPasswordClick}>\r\n                                    <i\r\n                                        className=\"fa fa-recycle px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                    فراموشی رمز\r\n                                </Button>\r\n                            </Row>\r\n                        </Form>\r\n                    </Modal.Body>\r\n                </Modal>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(ModalSignIn);\r\n","import React, { Component } from \"react\";\r\nimport ModalSignIn from \"./ModalSignIn\";\r\nimport \"./users.css\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { Card, Form, Button } from \"react-bootstrap\";\r\nimport { Sorry, OK, Notify } from \"../tools/msgbox\";\r\n\r\nclass SignUp extends Component {\r\n    // *********************Objectives***********************\r\n    // 1. handle errors particularly\r\n    // 2. first and last name must be persian text so make the direction correct and force persian chars\r\n    state = {\r\n        studentID: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        email: \"\",\r\n        loading: false,\r\n    };\r\n\r\n    checkConfirmPassword = (event) => {\r\n        this.setState({ confirmPassword: event.target.value });\r\n        if (this.state.password !== event.target.value) {\r\n            event.target.setCustomValidity(\r\n                \"تایید رمز عبور باید با خود رمز عبور مطابقت کامل داشته باشد\"\r\n            );\r\n            //console.log(password, confirmPassword);\r\n        } else event.target.setCustomValidity(\"\");\r\n    };\r\n    onSignUpSubmit = async (event) => {\r\n        event.preventDefault();\r\n        const {\r\n            studentID,\r\n            password,\r\n            confirmPassword,\r\n            firstname,\r\n            lastname,\r\n            email,\r\n        } = this.state;\r\n        if (firstname.trim().length < 3 || lastname.trim().length < 3) {\r\n            Sorry(\"نام و نام خانوادگی باید حداقل شام سه حرف فارسی باشد\");\r\n            this.setState({\r\n                firstname: firstname.trim(),\r\n                lastname: lastname.trim(),\r\n            });\r\n            return;\r\n        }\r\n        if (password === confirmPassword) {\r\n            try {\r\n                this.setState({ loading: true });\r\n                const newUser = {\r\n                    studentID: Number(studentID),\r\n                    password,\r\n                    email,\r\n                    fullname: (firstname + \" \" + lastname).replace(/\\s+/g, \" \"), // correct? (iterative?)\r\n                };\r\n\r\n                const { status, data } = await userServices.signUp(newUser);\r\n\r\n                if (status === Configs.Status.CreatedSuccessfully) {\r\n                    //console.log(data);\r\n                    OK(\"ثبت نام با موفقیت انجام شد\");\r\n                    browserStorage.writeUser(data.userID, data.token);\r\n                    this.props.history.replace(\"/\");\r\n                    // this.props.history.replace('/signIn')\r\n                    // ******* change server to return user token and auto sign in\r\n                }\r\n            } catch (err) {\r\n                // console.log(err);\r\n                this.setState({ loading: false });\r\n                if (err.response.status === Configs.Status.Conflict) {\r\n\r\n                    Notify(\"اگر رمز عبور خود را فراموش کرده اید، از گزینه بازیابی رمز عبور در صفحه ی ورود استفاده نمایید\");\r\n                } else if (!Configs.Status.isErrorExpected(err)) {\r\n                    Sorry(\r\n                        \"ثبت نام با مشکل رو به رو شد. لطفا دوباره تلاش کتنید\"\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            Sorry(\"رمز عبورها مطابقت ندارند\");\r\n        }\r\n        this.setState({ loading: false });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            studentID,\r\n            password,\r\n            confirmPassword,\r\n            firstname,\r\n            lastname,\r\n            email,\r\n            loading,\r\n        } = this.state;\r\n\r\n        return (\r\n            <Card border=\"success\" className=\"sign-up-card\">\r\n                <LoadingBar loading={loading} />\r\n                <Card.Header className=\"bg-transparent text-center border-success\">\r\n                    فرم ثبت نام\r\n                </Card.Header>\r\n                <Card.Body>\r\n                    <Form onSubmit={(event) => this.onSignUpSubmit(event)}>\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">نام</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                pattern=\"[آ-ی ]{3,}\" // persian characters and space\r\n                                onInput={(e) => e.target.setCustomValidity(\"\")}\r\n                                onInvalid={(e) =>\r\n                                    e.target.setCustomValidity(\r\n                                        \"نام باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n                                    )\r\n                                }\r\n                                className=\"sign-up-textbox w-75\"\r\n                                placeholder=\"First Name\"\r\n                                value={firstname}\r\n                                required=\"required\"\r\n                                onChange={(e) =>\r\n                                    this.setState({\r\n                                        firstname: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">\r\n                                نام خانوادگی\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                className=\"sign-up-textbox w-75\"\r\n                                pattern=\"[آ-ی ]{3,}\" // persian characters and space\r\n                                onInput={(e) => e.target.setCustomValidity(\"\")}\r\n                                onInvalid={(e) =>\r\n                                    e.target.setCustomValidity(\r\n                                        \"نام خانوادگی باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n                                    )\r\n                                }\r\n                                placeholder=\"Last Name\"\r\n                                value={lastname}\r\n                                required=\"required\"\r\n                                onChange={(e) =>\r\n                                    this.setState({\r\n                                        lastname: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">\r\n                                شماره دانشجویی\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                pattern=\"[0-9]{8}\"\r\n                                onInput={(e) => e.target.setCustomValidity(\"\")}\r\n                                onInvalid={(e) =>\r\n                                    e.target.setCustomValidity(\r\n                                        \"شماره دانشجویی باید یک عدد 8 رقمی باشد\"\r\n                                    )\r\n                                }\r\n                                className=\"sign-up-textbox w-75\"\r\n                                placeholder=\"Student ID\"\r\n                                value={studentID}\r\n                                autoComplete=\"username\"\r\n                                required=\"required\"\r\n                                onChange={(e) =>\r\n                                    this.setState({\r\n                                        studentID: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">ایمیل</Form.Label>\r\n                            <Form.Control\r\n                                type=\"email\"\r\n                                pattern=\".{6,}\"\r\n                                onInput={(e) => e.target.setCustomValidity(\"\")}\r\n                                onInvalid={(e) =>\r\n                                    e.target.setCustomValidity(\r\n                                        \"ورودی باید فرمت معتبر ایمیل را رعایت کرده و حداقل 6 کاراکتر باشد\"\r\n                                    )\r\n                                }\r\n                                className=\"sign-up-textbox w-75\"\r\n                                placeholder=\"E-mail\"\r\n                                value={email}\r\n                                required=\"required\"\r\n                                onChange={(e) =>\r\n                                    this.setState({ email: e.target.value })\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">رمز عبور</Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                pattern=\".{6,15}\"\r\n                                onInput={(e) => e.target.setCustomValidity(\"\")}\r\n                                onInvalid={(e) =>\r\n                                    e.target.setCustomValidity(\r\n                                        \"رمز عبور باید حداقل 6 کاراکتر و حداکثر 15 کاراکتر داشته باشد\"\r\n                                    )\r\n                                }\r\n                                className=\"sign-up-textbox w-75\"\r\n                                placeholder=\"Password\"\r\n                                value={password}\r\n                                autoComplete=\"new-password\"\r\n                                required=\"required\"\r\n                                onChange={(e) =>\r\n                                    this.setState({\r\n                                        password: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"form-inline\">\r\n                            <Form.Label className=\"w-25\">\r\n                                تایید رمز عبور\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                className=\"sign-up-textbox w-75\"\r\n                                placeholder=\"Confirm Password\"\r\n                                value={confirmPassword}\r\n                                required=\"required\"\r\n                                onChange={(event) =>\r\n                                    this.checkConfirmPassword(event)\r\n                                }\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-success btn-block mt-4\">\r\n                            <i\r\n                                className=\"fa fa-user-plus px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            ثبت نام\r\n                        </Button>\r\n                    </Form>\r\n                </Card.Body>\r\n                <Card.Footer className=\"border-primary bg-transparent\">\r\n                    اگر قبلا ثبت نام کردی، به صفحه ی <ModalSignIn /> برو !\r\n                </Card.Footer>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","import { Component } from \"react\";\r\nimport \"./sidebars.css\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport Configs, { browserStorage } from \"../services/configs\";\r\nimport { Card, Form, Button, Col, Row } from \"react-bootstrap\";\r\nimport { Sorry } from \"../tools/msgbox\";\r\n\r\nclass SignInSideBar extends Component {\r\n    // *********************Objectives***********************\r\n    // 1. handle errors particularly\r\n    state = {\r\n        studentID: \"\",\r\n        password: \"\",\r\n        loading: false,\r\n    };\r\n\r\n    onSignInSubmitted = async (event) => {\r\n        event.preventDefault();\r\n        this.setState({ loading: true });\r\n        const { studentID, password } = this.state;\r\n        const user = { studentID: Number(studentID), password };\r\n        try {\r\n            const { status, data } = await userServices.signIn(user);\r\n            if (status === Configs.Status.Successful) {\r\n                console.log(data);\r\n                browserStorage.writeUser(data.userID, data.token);\r\n                this.props.history.replace(\"/\");\r\n            }\r\n        } catch (err) {\r\n            // check nonserver errors\r\n            console.log(err);\r\n            this.setState({ password: \"\" });\r\n            if (!Configs.Status.isErrorExpected(err))\r\n                Sorry(\r\n                    \".ورود با مشکل رو به رو شد. لطفا دوباره تلاش کتنید.\",\r\n                    { position: \"top-left\", closeOnClick: true }\r\n                );\r\n        }\r\n        this.setState({ loading: false });\r\n    };\r\n\r\n    render() {\r\n        const { studentID, password, loading } = this.state;\r\n        return (\r\n            <Card border=\"primary\" className=\"sign-in-sidebar\">\r\n                <Card.Header\r\n                    border=\"primary\"\r\n                    className=\"text-center text-primary\">\r\n                    ورود کاربران\r\n                </Card.Header>\r\n                <LoadingBar loading={loading} />\r\n                <Card.Body className=\"text-primary\">\r\n                    <Form onSubmit={(event) => this.onSignInSubmitted(event)} >\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            autoComplete=\"username\"\r\n                            className=\"sign-in-sidebar-textBox\"\r\n                            placeholder=\"شماره دانشجویی\"\r\n                            value={studentID}\r\n                            onChange={(e) =>\r\n                                this.setState({ studentID: e.target.value })\r\n                            }\r\n                        />\r\n                        <br />\r\n                        <Form.Control\r\n                            type=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                            className=\"sign-in-sidebar-textBox\"\r\n                            placeholder=\"رمز عبور\"\r\n                            value={password}\r\n                            onChange={(e) =>\r\n                                this.setState({ password: e.target.value })\r\n                            }\r\n                        />\r\n                        <br />\r\n                        <Card.Footer className=\"bg-transparent border-primary\">\r\n                            <Row>\r\n                                <Col>\r\n                                    <Button\r\n                                        type=\"submit\"\r\n                                        variant=\"success\"\r\n                                        className=\"sign-in-sidebar-buttons\">\r\n                                        <i\r\n                                            className=\"fa fa-sign-in px-3\"\r\n                                            aria-hidden=\"true\"></i>\r\n                                        ورود\r\n                                    </Button>\r\n                                </Col>\r\n                                <Col>\r\n                                    <Button\r\n                                        className=\"sign-in-sidebar-buttons\"\r\n                                        variant=\"warning\">\r\n                                        <i\r\n                                            className=\"fa fa-recycle px-3\"\r\n                                            aria-hidden=\"true\"></i>\r\n                                        بازیابی پسورد\r\n                                    </Button>\r\n                                </Col>\r\n                            </Row>\r\n                        </Card.Footer>\r\n                    </Form>\r\n                </Card.Body>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SignInSideBar);\r\n","import http from \"./httpService\";\r\nimport { Routes } from \"../configs\";\r\n\r\nconst {Server} = Routes;\r\nconst noticeServices = {\r\n    createNotice: (notice) => {\r\n        return http.post(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}`,\r\n            JSON.stringify(notice)\r\n        );\r\n    },\r\n    getAdvancedNotics: () => { //returns all notices with complete data esp. with ID\r\n        return http.get(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}`\r\n        );\r\n    },\r\n    getShortNotices: () => {\r\n        return http.get(`${Server.Root}/${Server.Notices}`);\r\n    },\r\n    editNotice: (noticeID, notice) => {\r\n        return http.put(\r\n            `${Server.Root}/${Server.Notices}/${Server.NoticeManagement}/${noticeID}`,\r\n            JSON.stringify(notice)\r\n        );\r\n    }\r\n};\r\n\r\nexport default noticeServices;\r\n","import \"./sidebars.css\";\r\nimport { Fragment, useEffect, useState } from \"react\";\r\nimport noticeServices from \"../services/http/noticeServices\";\r\nimport Configs from \"../services/configs\";\r\nimport { Alert, Card } from \"react-bootstrap\";\r\nimport { v1 as uuidv1 } from \"uuid\";\r\nconst NoticeSideBar = () => {\r\n    const [notices, setNotices] = useState([]);\r\n\r\n    // oncomponentMount or update\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { status, data } = await noticeServices.getShortNotices();\r\n                if (status === Configs.Status.Successful) {\r\n                    //return data.notices;\r\n                    \r\n                    if (data.notices.length) setNotices(data.notices.reverse());\r\n                    //if all is empty\r\n                    if(data.notices.length === 0) {\r\n                        setNotices([{\r\n                            title: \"پیام\",\r\n                            text: \"اطلاعیه جدیدی وجود ندارد\",\r\n                        }]);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                setNotices([\r\n                    {\r\n                        title: \"خطا\",\r\n                        text: \"...مشکلی حین بارگذاری اطلاعیه ها پیش آمد. دوباره امتحان کنید\",\r\n                    },\r\n                ]);\r\n            }\r\n        })();\r\n        \r\n    }, []);\r\n\r\n    return (\r\n        <Card className=\"notice-sidebar\" border=\"success\">\r\n            <Card.Header className=\"text-center text-success\">\r\n                اطلاعیه ها\r\n            </Card.Header>\r\n            <Card.Body className=\"text-right\">\r\n                {notices.length && notices.map((notice) => {\r\n                    return (\r\n                        <Fragment key={uuidv1()}>\r\n                            <Alert variant=\"info\">\r\n                                <i\r\n                                    className=\"fa fa-rss px-3\"\r\n                                    aria-hidden=\"true\"></i>\r\n                                <span\r\n                                    style={{ color: \"red\", fontSize: \"18px\" }}>\r\n                                    {notice.title}\r\n                                </span>\r\n                                : {notice.text}\r\n                            </Alert>\r\n                            <hr />\r\n                        </Fragment>\r\n                    );\r\n                })}\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default NoticeSideBar;\r\n","export default __webpack_public_path__ + \"static/media/no-avatar.5e7c913e.png\";","import { Badge, Card, Col, ListGroup, Row } from \"react-bootstrap\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst OnlineStatistics = () => {\r\n    const {players, games} = useSelector((state) => state.statistics);\r\n    return (\r\n        <ListGroup className=\"list-group list-group-flush\">\r\n            <ListGroup.Item className=\"bg-transparent\">\r\n                <Row>\r\n                    <Col>\r\n                        <Card.Text className=\"text-center\">\r\n                            <i\r\n                                className=\"fa fa-wifi px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            کاربران آنلاین\r\n                        </Card.Text>\r\n                    </Col>\r\n                    <Col>\r\n                        <Badge className=\"player-badge-font-size\" variant=\"success\" pill>\r\n                            {players}\r\n                        </Badge>\r\n                    </Col>\r\n                </Row>\r\n            </ListGroup.Item>\r\n            <ListGroup.Item className=\"bg-transparent\">\r\n                <Row>\r\n                    <Col>\r\n                        <Card.Text className=\"text-center\">\r\n                            <i\r\n                                className=\"fa fa-gamepad px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            بازی های فعال\r\n                        </Card.Text>\r\n                    </Col>\r\n                    <Col>\r\n                        <Badge className=\"player-badge-font-size\" variant=\"success\" pill>\r\n                            {games}\r\n                        </Badge>\r\n\r\n                    </Col>\r\n                </Row>\r\n            </ListGroup.Item>\r\n        </ListGroup>\r\n    );\r\n};\r\n\r\nexport default OnlineStatistics;\r\n","export const LoadMe = (player) => ({\r\n    type: \"LOAD_ME\",\r\n    payload: player,\r\n});\r\n\r\nexport const SaveNewToken = () => ({\r\n    type: \"SAVE_TOKEN\",\r\n});\r\n\r\nexport const TriggerRecordUpdate = () => ({\r\n    type: \"TRIGGER_UPDATE\",\r\n});\r\n\r\nexport const SignOut = () => ({\r\n    type: \"SIGN_OUT\",\r\n});\r\n\r\nexport const LoadOpponent = (opponent) => ({\r\n    type: \"LOAD_OPPONENT\",\r\n    payload: opponent,\r\n});\r\n\r\nexport const ResetOpponent = () => ({\r\n    type: \"RESET_OPPONENT\",\r\n});\r\n\r\nexport const SetRoom = (room) => ({\r\n    type: \"SET_ROOM\",\r\n    payload: room,\r\n});\r\nexport const ResetRoom = () => ({\r\n    type: \"RESET_ROOM\",\r\n});\r\nexport const SetGameID = (gameID) => ({\r\n    type: \"SET_GAME_ID\",\r\n    payload: gameID,\r\n});\r\n\r\nexport const UpdateScoreboard = (details) => ({\r\n    type: \"UPDATE_SCOREBOARD\",\r\n    payload: details,\r\n});\r\n\r\nexport const CleanScoreboard = () => ({\r\n    type: \"CLEAN_SCOREBOARD\",\r\n});\r\n\r\nexport const UpdateStatistics = (statistics) => ({\r\n    type: \"UPDATE_STATISTICS\",\r\n    payload: statistics,\r\n});\r\n\r\nexport const TriggerOpponentSearch = () => ({\r\n    type: \"TRIGGER_OPPONENT_SEARCH\",\r\n});\r\n\r\nexport const SendFriendRequestTo = (targetID) => ({\r\n    type: \"SEND_FRIEND_REQUEST\",\r\n    payload: targetID,\r\n});\r\n\r\nexport const SendMessageTo = (name, friendID, text) => ({\r\n    type: \"SEND_MESSAGE\",\r\n    payload: { name, friendID, text },\r\n});\r\n\r\nexport const RecieveMessageFrom = (name, friendID, text) => ({\r\n    type: \"RECIEVE_MESSAGE\",\r\n    payload: { name, friendID, text },\r\n});\r\n\r\nexport const MessagePushed = () => ({\r\n    type: \"MEESAGE_PUSHED\",\r\n});\r\nexport const ResetMessages = () => ({\r\n    type: \"RESET_MESSAGES\",\r\n});\r\n","import { Alert, Button, Form, Row, InputGroup } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SendMessageTo } from \"../globals/redux/actions\";\r\n\r\nconst GameChatBox = ({ friendID }) => {\r\n    const [myMessage, setMyMessage] = useState(\"\");\r\n    const message = useSelector((state) => state.message);\r\n    const dispatch = useDispatch();\r\n    const me = useSelector((state) => state.player);\r\n\r\n    const composeMessage = (event) => {\r\n        if (myMessage) {\r\n            //if message is not empty\r\n            event.preventDefault();\r\n            dispatch(SendMessageTo(me.fullname, friendID, myMessage));\r\n            setMyMessage(\"\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Form onSubmit={(event) => composeMessage(event)}>\r\n            <Row className=\"w-100 mt-3 mx-auto\">\r\n                <Alert className=\"w-100 text-right\" variant=\"info\">\r\n                    {message && message.recieved ? (\r\n                        message.recieved.text\r\n                    ) : (\r\n                        <p className=\"p-1\"> </p>\r\n                    )}\r\n                </Alert>\r\n            </Row>\r\n            <Row className=\"w-100 mx-auto mb-3\">\r\n                <InputGroup className=\"w-100\">\r\n                    <InputGroup.Prepend style={{ width: \"10%\" }}>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"mx-auto\"\r\n                            variant=\"outline-info\">\r\n                            <i\r\n                                className=\"fa fa-paper-plane\"\r\n                                aria-hidden=\"true\"></i>\r\n                        </Button>\r\n                    </InputGroup.Prepend>\r\n\r\n                    <InputGroup.Prepend style={{ width: \"88%\" }}>\r\n                        <Form.Control\r\n                            placeholder=\"پیام...\"\r\n                            value={myMessage}\r\n                            onChange={(e) => setMyMessage(e.target.value)}\r\n                            className=\"text-right\"></Form.Control>\r\n                    </InputGroup.Prepend>\r\n                </InputGroup>\r\n            </Row>\r\n        </Form>\r\n    );\r\n};\r\n\r\nexport default GameChatBox;\r\n","\r\nimport { Card, Col, ListGroup, Row } from 'react-bootstrap';\r\nimport { Badge } from 'react-bootstrap';\r\nimport '../profile.css';\r\n\r\nconst Record = ({children,title, small}) => {\r\n    return (\r\n        <ListGroup.Item className=\"bg-transparent\">\r\n            <Row className={!small && \"py-2\"}>\r\n                <Col className=\"text-center\">\r\n                    <Card.Text>{title}</Card.Text>\r\n                </Col>\r\n                <Col className={small ? \"text-left\" : \"text-center\"}>\r\n                    <Badge\r\n                        className=\"friend-badge-font-size\"\r\n                        pill\r\n                        variant=\"primary\">\r\n                        {children}\r\n                    </Badge>\r\n                </Col>\r\n            </Row>\r\n        </ListGroup.Item>\r\n    );\r\n};\r\n\r\nexport default Record;\r\n","import noAvatar from \"./no-avatar.png\"; // definitely must be changed bro!\r\nimport {\r\n\tCard,\r\n\tRow,\r\n\tCol,\r\n\tAlert,\r\n\tBadge,\r\n\tImage,\r\n\tListGroup,\r\n\tButton,\r\n} from \"react-bootstrap\";\r\nimport OnlineStatistics from \"./OnlineStatistics\";\r\nimport { SendFriendRequestTo } from \"../globals/redux/actions\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport userServices from \"./../services/http/userServices\";\r\nimport Configs from \"../services/configs\";\r\nimport GameChatBox from \"../chat/GameChatBox\";\r\nimport Record from \"../profile/friendgames/Record\";\r\n\r\nconst PlayerInfoSideBar = (props) => {\r\n\tconst me = useSelector((state) => state.player);\r\n\tconst scoreboard = useSelector((state) => state.scoreboard);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst [personIsFriend, setPersonIsFriend] = useState(false);\r\n\r\n\tconst person = props.person ? props.person : me;\r\n\tconst onFriendRequestClick = (event) => {\r\n\t\tevent.target.innerHTML = \"ارسال شد...\";\r\n\t\tevent.target.disabled = true;\r\n\t\tdispatch(SendFriendRequestTo(person.userID));\r\n\t};\r\n\tconst [piece, setPiece] = useState(null); //piece === mohreh\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(scoreboard);\r\n\t\tsetPiece(\r\n\t\t\tme && person.userID !== me.userID ? scoreboard.opp : scoreboard.me\r\n\t\t);\r\n\t}, [person, me, scoreboard]);\r\n\tuseEffect(() => {\r\n\t\tif (me && person.userID !== me.userID) {\r\n\t\t\t(async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { status, data } = await userServices.isMyFriend(\r\n\t\t\t\t\t\tperson.userID\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (status === Configs.Status.Successful) {\r\n\t\t\t\t\t\tsetPersonIsFriend(data.isFriend);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\t// handle error.\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t}, [me, person]);\r\n\tif (!person) return null;\r\n\tconst { records } = person;\r\n\treturn (\r\n\t\t<Card border=\"info\" className=\"player-info-sidebar\">\r\n\t\t\t<Card.Header className=\"text-center text-info form-inline\">\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Card.Text className=\"text-left\">\r\n\t\t\t\t\t\t{person.fullname}\r\n\t\t\t\t\t</Card.Text>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tclassName=\"card-img-top player-avatar\"\r\n\t\t\t\t\t\tsrc={noAvatar}\r\n\t\t\t\t\t\talt=\"مشکلی در بارگذاری تصویر پیش آمد\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Card.Header>\r\n\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<ListGroup className=\"list-group list-group-flush\">\r\n\t\t\t\t\t{piece && (\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<Alert variant={piece.index ? \"danger\" : \"primary\"}>\r\n\t\t\t\t\t\t\t\t<Alert.Heading className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t{piece.score} : {piece.shape}\r\n\t\t\t\t\t\t\t\t</Alert.Heading>\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Record small title=\"امتیاز بازیکن\">{records.points}</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد بردها\">{records.wins}</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد تساوی\">{records.draws}</Record>\r\n\t\t\t\t\t<Record small title=\"تعداد باختها\">{records.loses}</Record>\r\n\t\t\t\t</ListGroup>\r\n\t\t\t</Card.Body>\r\n\t\t\t<Card.Footer>\r\n\t\t\t\t{me === person ? (\r\n\t\t\t\t\t<OnlineStatistics />\r\n\t\t\t\t) : personIsFriend ? (\r\n\t\t\t\t\t<GameChatBox friendID={person.userID} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant={\"outline-info\"}\r\n\t\t\t\t\t\tblock\r\n\t\t\t\t\t\tonClick={(event) => onFriendRequestClick(event)}>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-handshake-o px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\tدرخواست دوستی\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</Card.Footer>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default PlayerInfoSideBar;\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport { MessagePushed } from \"../globals/redux/actions\";\r\nimport { browserStorage, Routes } from \"../services/configs\";\r\nimport { Attention, NewMsg } from \"./msgbox\";\r\nimport jwtdecode from \"jwt-decode\";\r\n\r\nconst NotificationCenter = ({ location }) => {\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst { pathname } = location;\r\n\tconst dispatch = useDispatch();\r\n\t// check TOKEN EXPIRE time and notify user before he starts a game to re login\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tif (message && message.recieved && !message.recieved.pushed) {\r\n\t\t\t\tif (pathname !== Routes.Client.ChatRoom) {\r\n\t\t\t\t\tif (pathname !== Routes.Client.GameDeck) {\r\n\t\t\t\t\t\t// then just only push when message sender is the opponent\r\n\t\t\t\t\t\t//return;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tNewMsg(message.recieved);\r\n\t\t\t\t\t//prevent recieved message from getting stuck in notificatioon loop\r\n\t\t\t\t\tdispatch(MessagePushed());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst decoded_token = jwtdecode(browserStorage.TOKEN());\r\n            \r\n\t\t\tconst toMin = (mili) => mili / 1000 / 60;\r\n\t\t\tif (decoded_token) {\r\n\t\t\t\tconst { exp, iat } = decoded_token;\r\n\t\t\t\tconst expirationLength =  (exp - iat) / 60;\r\n                const criticalNow = toMin(Date.now()) + expirationLength/4;\r\n                // ex: expiration is at 60 min\r\n                // after converting all values to minutes\r\n                // critical point is about 15 minutes to expiration\r\n                // so if toMin(now) + 15min passes expiration date -> inform user to take action\r\n\t\t\t\tif (criticalNow >= exp / 60) {\r\n\t\t\t\t\tAttention(\"نشست شما در شرف انقضاست ... برای پیش گیری از بروز مشکل لطفا دوباره وارد حساب خود شوید\");\r\n                    // ...some action\r\n                    // implement onClick for this toast\r\n                    // like rerouting to sing in model and etc\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}, [message, pathname, dispatch]);\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default withRouter(NotificationCenter);\r\n","import { browserStorage, Routes } from \"../configs\";\r\nimport { Fragment, useCallback, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n\tTriggerOpponentSearch,\r\n\tUpdateStatistics,\r\n\tSetRoom,\r\n\tSendFriendRequestTo,\r\n\tRecieveMessageFrom,\r\n\tResetMessages,\r\n} from \"../../globals/redux/actions\";\r\nimport { Modal, Button, Row, Col, Badge } from \"react-bootstrap\";\r\nimport { Attention, OK } from \"../../tools/msgbox\";\r\nimport NotificationCenter from \"../../tools/NotificationCenter\";\r\n\r\nconst GlobalSocketManager = () => {\r\n\t// I actually used .jsx format to make this Component EventBased\r\n\t// On Each event called socket will do some specific operation\r\n\t// events are actually useEffects bound to special state changes\r\n\tconst [socketGlobal, setSocketGlobal] = useState(null);\r\n\tconst [incommingFriendRequest, setIncommingFriendRequest] = useState(null);\r\n\tconst [showFriendshipModal, setShowFriendshipModal] = useState(false);\r\n\tconst player = useSelector((state) => state.player);\r\n\tconst opponent = useSelector((state) => state.opponent);\r\n\tconst tools = useSelector((state) => state.tools);\r\n\tconst room = useSelector((state) => state.room);\r\n\tconst message = useSelector((state) => state.message);\r\n\tconst [clientOnline, toggleClientOnline] = useState(true);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst enableGlobalTimer = useCallback(() => {\r\n\t\treturn setInterval(() => {\r\n\t\t\tif (socketGlobal) {\r\n\t\t\t\tconsole.log(\"updating statistics...\");\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\t\trequest: \"online\",\r\n\t\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\t\tmsg: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}, 300000); // every 5 MINUTES request number of online members to update the site\r\n\t}, [socketGlobal, player]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"global timer enabled\");\r\n\t\tconst timerID = enableGlobalTimer();\r\n\r\n\t\treturn () => {\r\n\t\t\tconsole.log(\"global timer disabled\");\r\n\t\t\tclearInterval(timerID);\r\n\t\t};\r\n\t}, [enableGlobalTimer]);\r\n\r\n\tconst connect = useCallback(() => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar socket = new WebSocket(\r\n\t\t\t\t`${Routes.Server.WebSocketRoot}/${Routes.Server.wsGlobalRoute}`\r\n\t\t\t);\r\n\t\t\tsocket.onopen = () => {\r\n\t\t\t\tsocket.send(\r\n\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\t\trequest: \"online\",\r\n\t\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\t\tmsg: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t); //temp\r\n\t\t\t\tresolve(socket);\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onmessage = (response) => {\r\n\t\t\t\tconst { data } = response;\r\n\t\t\t\tconst { command, msg } = JSON.parse(data);\r\n\t\t\t\tswitch (command) {\r\n\t\t\t\t\tcase \"ONLINE\": {\r\n\t\t\t\t\t\tconst { players, games } = msg;\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tUpdateStatistics({\r\n\t\t\t\t\t\t\t\tplayers,\r\n\t\t\t\t\t\t\t\tgames,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t); //playing temp\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"FIND_RESULT\": {\r\n\t\t\t\t\t\t//response from random game request\r\n\t\t\t\t\t\tif (msg) {\r\n\t\t\t\t\t\t\tconsole.log(\"your room\", msg);\r\n\t\t\t\t\t\t\tdispatch(SetRoom(msg));\r\n\t\t\t\t\t\t\tsocket.send(\r\n\t\t\t\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\t\t\t\t\trequest: \"online\",\r\n\t\t\t\t\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\t\t\t\t\tmsg: null,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//search again 5s later\r\n\t\t\t\t\t\t\t// **********************\r\n\t\t\t\t\t\t\t//time out must be set with rising time out time to prevent server getting fucked up\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tdispatch(TriggerOpponentSearch());\r\n\t\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"FRIENDSHIP_REQUEST\": {\r\n\t\t\t\t\t\tif (msg.askerID === opponent.userID) {\r\n\t\t\t\t\t\t\t//if both players are in game then ask immidiately\r\n\t\t\t\t\t\t\tsetIncommingFriendRequest(msg);\r\n\t\t\t\t\t\t\tsetShowFriendshipModal(true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//if the friend request is comming from some one else then manage it differently\r\n\t\t\t\t\t\t\t//...\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"FRIENDSHIP_RESPONSE\": {\r\n\t\t\t\t\t\tconst { answer, targetName } = msg;\r\n\t\t\t\t\t\t//if(answer) dispatch(TriggerRecordUpdate());\r\n\t\t\t\t\t\tif (answer)\r\n\t\t\t\t\t\t\tOK(`${targetName} درخواست دوستی شما را پذیرفت`);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tAttention(\r\n\t\t\t\t\t\t\t\t`${targetName} درخواست دوستی شما را رد کرد`\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tdispatch(SendFriendRequestTo(null));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n                    case \"TARGET_OFFLINE\":{\r\n                        //... while chatting or game request\r\n                        break;\r\n                    }\r\n\t\t\t\t\tcase \"FRIENDLY_GAME\": {\r\n                        // ... trigger and show responding form\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n                    case \"FRIENDLY_RESULT\": {\r\n                        // ... friend responded to your request\r\n                        // ... if true -> room info has ben sent to you\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"CHAT\": {\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tRecieveMessageFrom(msg.name, msg.friendID, msg.text)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t//... whatever\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresolve(socket);\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onerror = (error) => {\r\n\t\t\t\t// console.log(`WebSocket error: ${error}`);\r\n\t\t\t\tsocket.close();\r\n\t\t\t\treject(error);\r\n\t\t\t};\r\n\r\n\t\t\tsocket.onclose = () => {\r\n\t\t\t\t// reconnectr or what?\r\n\t\t\t\tconsole.log(\"Reconnecting in  5 seconds\");\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t(async () => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconsole.log(\"global socket online request\");\r\n\t\t\t\t\t\t\tlet socket = player ? await connect() : null;\r\n\t\t\t\t\t\t\tsetSocketGlobal(socket);\r\n\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})();\r\n\t\t\t\t}, 5000);\r\n\t\t\t\tresolve(null);\r\n\t\t\t\t// this part needs editing ? maybe not\r\n\t\t\t};\r\n\t\t});\r\n\t}, [dispatch, opponent, player]);\r\n\r\n\t// EVENT NAME: PlayerUpdateEvent\r\n\t// happens when player sign in status changes => set ups global socket connection and then if signed in=> reads number of online users in page\r\n\tuseEffect(() => {\r\n\t\tif (clientOnline && player) {\r\n\t\t\t(async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log(\"global socket online request\");\r\n\t\t\t\t\tlet socket = player ? await connect() : null;\r\n\t\t\t\t\tsetSocketGlobal(socket);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t}, [clientOnline, player, connect]);\r\n\r\n\t// EVENT NAME: RandomGameInitiated Event\r\n\t// happens when user clicks on 'Random Game\" Tab search button => sends opponent search request to server\r\n\tuseEffect(() => {\r\n\t\tif (room.type) {\r\n\t\t\t//is it necessary?\r\n\t\t\t//completely making sure we're on right stage\r\n\t\t\tif (!room.name && socketGlobal && player)\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\t\trequest: \"find\",\r\n\t\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\t\tmsg: room.type,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t} else if (!room.name) {\r\n\t\t\t//room --> {null,null} --> means room has been reset hand u need to remove\r\n\t\t\tif (socketGlobal)\r\n\t\t\t\tsocketGlobal.send(\r\n\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\t\trequest: \"close_game\",\r\n\t\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\t\tmsg: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t}\r\n\t}, [player, room, tools.opponentSearchTriggered, socketGlobal]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tools.friendRequest) {\r\n\t\t\t//tools.friendRequest either contains null => no request, or contains target ID for friendship\r\n\t\t\tsocketGlobal.send(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\trequest: \"friendship\",\r\n\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttargetID: tools.friendRequest,\r\n\t\t\t\t\t\taskerName: player.fullname,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, [tools.friendRequest, socketGlobal, player]);\r\n\r\n\tconst respondToFriendshipRequest = (answer) => {\r\n\t\t// handle multiple requests *************\r\n\t\tsocketGlobal.send(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\trequest: \"respond_friendship\",\r\n\t\t\t\tclientID: player.userID,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\tanswer,\r\n\t\t\t\t\ttargetName: player.fullname,\r\n\t\t\t\t\taskerID: incommingFriendRequest.askerID,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t);\r\n\t\t// if(answer) dispatch(TriggerRecordUpdate());\r\n\t\tsetShowFriendshipModal(false);\r\n\t\tsetIncommingFriendRequest(null);\r\n\t\tdispatch(SendFriendRequestTo(null)); //reset friend request targetID to prevent any future problm\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (message.sent) {\r\n\t\t\t//if destination is determined, otherwise => means no message has been sent\r\n\t\t\tsocketGlobal.send(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttoken: browserStorage.TOKEN(),\r\n\t\t\t\t\trequest: \"chat\",\r\n\t\t\t\t\tclientID: player.userID,\r\n\t\t\t\t\tmsg: message.sent,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tdispatch(ResetMessages());\r\n\t\t}\r\n\t}, [player, message, socketGlobal, dispatch]);\r\n\r\n\t// if online status changes\r\n\tsetInterval(() => {\r\n\t\tif (window.navigator.onLine) {\r\n\t\t\t//client online\r\n\t\t\tif (!clientOnline)\r\n\t\t\t\t//this means -> client JUST became online\r\n\t\t\t\ttoggleClientOnline(true); //change connection status\r\n\t\t} else {\r\n\t\t\t// clients offline\r\n\t\t\tif (clientOnline)\r\n\t\t\t\t//this means -> client JUST became offline now\r\n\t\t\t\ttoggleClientOnline(false); //change connection status\r\n\t\t}\r\n\t}, 5000);\r\n\r\n\t// is it really necessary though ?????\r\n    // move UI to notification center \r\n\treturn (\r\n\t\t//this is just for firendship request in games\r\n\t\t<Fragment>\r\n\t\t\t<NotificationCenter />\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showFriendshipModal}\r\n\t\t\t\tonHide={() => respondToFriendshipRequest(false)}>\r\n\t\t\t\t<Modal.Header closeButton />\r\n\t\t\t\t<Modal.Body className=\"text-right\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{!incommingFriendRequest ? null : (\r\n\t\t\t\t\t\t\t<Badge\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: \"18px\", margin: \"2%\" }}\r\n\t\t\t\t\t\t\t\tpill\r\n\t\t\t\t\t\t\t\tvariant=\"warning\">\r\n\t\t\t\t\t\t\t\t{incommingFriendRequest.askerName}\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tبه شما پیشنهاد دوستی داده است.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>اگر تمایل به دوستی ندارید میتواند درخواست را رد کنید.</p>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer className=\"w-100 text-right\">\r\n\t\t\t\t\t<Row className=\"w-100\">\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\trespondToFriendshipRequest(true)\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\tپذیرفتن\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\trespondToFriendshipRequest(false)\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\tرد\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default GlobalSocketManager;\r\n","import { useDispatch } from \"react-redux\";\r\nimport { LoadMe, SignOut } from \"../globals/redux/actions\";\r\nimport { browserStorage } from \"../services/configs\";\r\nimport gameServices from \"../services/http/gameServices\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// auto-sign in if store sign in data was reset\r\nconst AutoSignIn = () => {\r\n    const storageUserID = browserStorage.ID();\r\n    const dispatch = useDispatch();\r\n    const opponent = useSelector((state) => state.opponent);\r\n    useEffect(() => {\r\n        console.log(\"storageUserID user changed\");\r\n        if (storageUserID) {\r\n            console.log(\"auth called\");\r\n            gameServices\r\n                .loadPlayerData(storageUserID)\r\n                .then((result) => {\r\n                    dispatch(LoadMe(result));\r\n                    //dispatch(SaveNewToken());\r\n                })\r\n                .catch((err) => {\r\n                    dispatch(LoadMe(null));\r\n                    //dispatch(SaveNewToken());\r\n                });\r\n        }\r\n        else{\r\n            dispatch(LoadMe(null))\r\n        }\r\n    }, [storageUserID, opponent, dispatch]);\r\n\r\n    return null;\r\n};\r\n\r\nexport default AutoSignIn;\r\n","import { createContext } from \"react\";\r\n\r\nconst GlobalContext = createContext({\r\n    device: 0\r\n});\r\n\r\nexport default GlobalContext;","import SignInSideBar from \"../sidebars/SignInSideBar\";\r\nimport NoticeSideBar from \"../sidebars/NoticeSideBar\";\r\nimport { withRouter } from \"react-router\";\r\nimport PlayerInfoSideBar from \"../sidebars/PlayerInfoSideBar\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Fragment, useState, useEffect, useContext } from \"react\";\r\nimport { Col, Container, Row } from \"react-bootstrap\";\r\nimport GlobalSocketManager from \"../services/ws/GlobalSocketManager\";\r\nimport { Devices, Routes } from \"../services/configs\";\r\nimport AutoSignIn from \"../tools/AutoSignIn\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\n\r\nconst MainLayout = (props) => {\r\n\tconst context = useContext(GlobalContext);\r\n\tconst { pathname } = props.location;\r\n\t//redux\r\n\tconst player = useSelector((state) => state.player);\r\n\tconst opponent = useSelector((state) => state.opponent);\r\n\tconst scoreboard = useSelector((state) => state.scoreboard);\r\n\r\n\tconst [leftSideBar, setLeftSideBar] = useState(null);\r\n\tconst [rightSideBar, setRightSideBar] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tsetLeftSideBar(<NoticeSideBar />);\r\n\t}, []);\r\n\r\n\t//teste\r\n\t//determine sidebar\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"context.device responsive manager called\");\r\n\t\tconst setPrimaryRightSideBar = () => {\r\n\t\t\tif (context.device !== Devices.Tablet)\r\n\t\t\t\tsetRightSideBar(\r\n\t\t\t\t\tplayer ? <PlayerInfoSideBar /> : <SignInSideBar />\r\n\t\t\t\t);\r\n\t\t\telse setRightSideBar(null);\r\n\t\t};\r\n\t\tif (pathname === Routes.Client.SignUp) {\r\n\t\t\tsetRightSideBar(null);\r\n\t\t\tsetLeftSideBar(null);\r\n\t\t} else if (pathname === Routes.Client.GameDeck) {\r\n\t\t\t// EDIT THIS..\r\n\t\t\t// ON REFRESH -> rightSideBar is null!\r\n\t\t\t// SOMETIMES: ERROR: cannout read .fullname of undefined person\r\n\t\t\tsetPrimaryRightSideBar();\r\n\t\t\tif (opponent) {\r\n\t\t\t\tif (context.device !== Devices.SmartPhone) {\r\n\t\t\t\t\tsetLeftSideBar(<PlayerInfoSideBar person={opponent} />);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetLeftSideBar(null);\r\n\t\t\t\t\tsetRightSideBar(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetLeftSideBar(<NoticeSideBar />); //EDIT THIS\r\n\t\t\tsetPrimaryRightSideBar();\r\n\t\t}\r\n\t}, [player, opponent, pathname, scoreboard, context.device]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<AutoSignIn />\r\n\t\t\t{player && <GlobalSocketManager />}\r\n\r\n\t\t\t{context.device !== Devices.SmartPhone ? (\r\n\t\t\t\t<Row className=\"w-100 mx-auto\">\r\n\t\t\t\t\t{rightSideBar && <Col xs={3}>{rightSideBar}</Col>}\r\n\t\t\t\t\t<Col\r\n\t\t\t\t\t\tclassName=\"mx-auto\"\r\n\t\t\t\t\t\txs={pathname !== Routes.Client.SignUp ? null : 7}>\r\n\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t{leftSideBar && (\r\n\t\t\t\t\t\t<Col xs={context.device !== Devices.Tablet ? 3 : 4}>\r\n\t\t\t\t\t\t\t{leftSideBar}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Row>\r\n\t\t\t) : (\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t{/* what to do for control panelk sidebar in smartphone */}\r\n\t\t\t\t\t{player ? (\r\n\t\t\t\t\t\t<Row className=\"w-100 mx-auto\">{rightSideBar}</Row>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<Row className=\"w-100 mx-auto\">{leftSideBar}</Row>\r\n\t\t\t\t\t<Row className=\"w-100 mx-auto\">{props.children}</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default withRouter(MainLayout);\r\n","const SinglePlayerCard = ({rowNumber, name, points, wins, loses, draws }) => {\r\n    return (\r\n        <tr>\r\n            <th scope=\"row\">{rowNumber}</th>\r\n            <td>{name}</td>\r\n            <td>{points}</td>\r\n            <td>{wins}</td>\r\n            <td>{loses}</td>\r\n            <td>{draws}</td>\r\n        </tr>\r\n    );\r\n};\r\n\r\nexport default SinglePlayerCard;\r\n","import { Card } from \"react-bootstrap\";\r\nimport SinglePlayerCard from \"./SinglePlayerCard\";\r\n\r\nconst AllPlayers = ({ players }) => {\r\n    return (\r\n        <Card border=\"dark\" style={{ width: \"100%\", borderRadius: \"5px\" }}>\r\n            <Card.Header className=\"text-center\">رده بندی</Card.Header>\r\n            <table className=\"table table-striped table-bordered table-hover text-center\">\r\n                <thead className=\"bg-info\">\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">نام بازیکن</th>\r\n                        <th scope=\"col\">امتیاز</th>\r\n                        <th scope=\"col\">تعداد برد</th>\r\n                        <th scope=\"col\">تعداد باخت</th>\r\n                        <th scope=\"col\">تعداد تساوی</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {players.map((player) => (\r\n                        <SinglePlayerCard\r\n                            key={player.userID}\r\n                            rowNumber={\r\n                                players.findIndex(\r\n                                    (p) => p.userID === player.userID\r\n                                ) + 1\r\n                            }\r\n                            name={player.fullname}\r\n                            points={player.records.points}\r\n                            wins={player.records.wins}\r\n                            loses={player.records.loses}\r\n                            draws={player.records.draws}></SinglePlayerCard>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default AllPlayers;\r\n","import { Component } from \"react\";\r\nimport AllPlayers from \"./AllPlayers\";\r\nimport userServices from \"../../services/http/userServices\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport Configs from '../../services/configs';\r\nimport { Row } from \"react-bootstrap\";\r\n\r\nclass Ranking extends Component {\r\n    state = { players: [], loading: false };\r\n\r\n    componentDidMount() {\r\n        (async () => {\r\n            this.setState({ loading: true });\r\n            const { data, status } = await userServices.getAllPlayers();\r\n            if (status === Configs.Status.Successful) return data.players;\r\n            return [];\r\n        })()\r\n            .then((result) => {\r\n                let tempPlayers = [...result];\r\n                this.setState({\r\n                    players: tempPlayers.sort( //sort priorities: 1. more points 2. more wins 3. less loses\r\n                        (p1, p2) =>\r\n                            p2.records.points - p1.records.points ||\r\n                            p2.records.wins - p1.records.wins ||\r\n                            p1.records.loses - p2.records.loses\r\n                    ),\r\n                    loading: false,\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                //******* handle errors */\r\n                // console.log(err);\r\n                this.setState({ players: [], loading: false });\r\n            });\r\n    }\r\n    render() {\r\n        const { players, loading } = this.state;\r\n        return (\r\n            <Row className=\"mx-auto mt-3\">\r\n                {loading ? <LoadingBar loading={loading} /> : null}\r\n                <Row className=\"w-100 mx-auto\">\r\n                    <AllPlayers players={players} />\r\n                </Row>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Ranking;\r\n","import {browserStorage, Routes} from '../configs';\r\n\r\nexport const createSocketRequest = (request, rname, playerID, msg) =>\r\n    JSON.stringify({\r\n        request,\r\n        rname,\r\n        playerID,\r\n        token: browserStorage.TOKEN(),\r\n        msg,\r\n    });\r\n\r\nexport const connect = (roomName, playerID, gameType) => {\r\n    return new Promise((resolve, reject) => {\r\n        var server = new WebSocket(`${Routes.Server.WebSocketRoot}/${Routes.Server.wsGamePlayRoute}`);\r\n        server.onopen = () => {\r\n            server.send(createSocketRequest(\"join\", roomName, playerID, gameType)); //temp\r\n            resolve(server);\r\n        };\r\n\r\n        server.onerror = (error) => {\r\n            // console.log(`WebSocket error: ${error}`);\r\n            server.close();\r\n            reject(error);\r\n        };\r\n\r\n        server.onclose = () => {\r\n            \r\n            resolve(null);\r\n            // this part needs editing ? maybe not\r\n        };\r\n    });\r\n};\r\n","//ONLY for class components: purpose: using redux in class components\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    LoadMe,\r\n    LoadOpponent,\r\n    ResetOpponent,\r\n    SetRoom,\r\n    SetGameID,\r\n    UpdateScoreboard,\r\n    CleanScoreboard,\r\n    ResetRoom,\r\n    TriggerRecordUpdate,\r\n    SaveNewToken\r\n    // UpdateStatistics,\r\n    // TriggerOpponentSearch,\r\n    // SendFriendRequestTo,\r\n    // SendMessageTo,\r\n    // RecieveMessageFrom,\r\n    // ResetMessages,\r\n} from \"./actions\";\r\n// ***** remove the ones that arent used in class components => for memory management/ not necessary though\r\n// useSelector for functional components\r\n// state==>props : redux\r\n\r\nfunction withReduxDashboard(component) {\r\n    const mapStateToProps = (state) => ({\r\n        player: state.player,\r\n        opponent: state.opponent,\r\n        room: state.room,\r\n        scoreboard: state.scoreboard,\r\n        tools: state.tools,\r\n    });\r\n\r\n    const mapDispatchToProps = (dispatch) => ({\r\n        LoadMe: (player) => dispatch(LoadMe(player)),\r\n        LoadOpponent: (opponent) => dispatch(LoadOpponent(opponent)),\r\n        ResetOpponent: () => dispatch(ResetOpponent()),\r\n        SetRoom: (room) => dispatch(SetRoom(room)),\r\n        ResetRoom: () => dispatch(ResetRoom()),\r\n        SetGameID: (gameID) => dispatch(SetGameID(gameID)),\r\n        UpdateScoreboard: (details) => dispatch(UpdateScoreboard(details)),\r\n        CleanScoreboard: () => dispatch(CleanScoreboard()),\r\n        TriggerRecordUpdate: () => dispatch(TriggerRecordUpdate()),\r\n        SaveNewToken: () => dispatch(SaveNewToken())\r\n        //for memory managment these are commented because they arent used in Class Components yet\r\n        //UpdateStatistics: (stat) => dispatch(UpdateStatistics(stat)),\r\n        //TriggerOpponentSearch: () => dispatch(TriggerOpponentSearch()),\r\n        //SendFriendRequestTo: () => dispatch(SendFriendRequestTo()),\r\n        //SendMessageTo: (name, friendID, text) => dispatch(SendMessageTo(name, friendID, text)),\r\n        //RecieveMessageFrom: (name, friendID, text) => dispatch(RecieveMessageFrom(name, friendID, text)),\r\n        //ResetMessages: () => dispatch(ResetMessages())\r\n    });\r\n    return connect(mapStateToProps, mapDispatchToProps)(component);\r\n}\r\n\r\nexport default withReduxDashboard;\r\n// export const useDashboard = connect(mapStateToProps, mapDispatchToProps);\r\n","import { Card, Col, Row } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { GameSetting } from \"../../services/configs\";\r\n\r\nconst BriefScoreboard = ({ timeRemaining, players }) => {\r\n    const [timeStamp, setTimeStamp] = useState(null);\r\n    const aThird = GameSetting.T3D.TurnTimeOut / 3;\r\n    useEffect(() => {\r\n        let color = null,\r\n            icon = null;\r\n        if (timeRemaining) {\r\n            if (timeRemaining >= aThird) {\r\n                color = \"text-success\";\r\n                icon = (\r\n                    <i className=\"fa fa-hourglass-start px-2\" aria-hidden=\"true\"></i>\r\n                );\r\n            } else {\r\n                color = \"text-danger\";\r\n                icon = (\r\n                    <i className=\"fa fa-hourglass-half px-2\" aria-hidden=\"true\"></i>\r\n                );\r\n            }\r\n        } else {\r\n            color = \"text-dark\";\r\n            icon = <i className=\"fa fa-hourglass-end px-2\" aria-hidden=\"true\"></i>;\r\n        }\r\n        setTimeStamp(<div className={color}>{icon}{timeRemaining}</div>);\r\n    }, [timeRemaining, aThird]);\r\n\r\n    return (\r\n        <Card.Header className=\"w-100 text-center\">\r\n            <Row style={{ fontSize: \"20px\" }}>\r\n                <Col\r\n                    style={{\r\n                        textAlign: \"right\",\r\n                        color: players[1].color,\r\n                    }}>\r\n                    {players[1].shape} : {players[1].score}\r\n                </Col>\r\n                <Col>{timeStamp}</Col>\r\n                <Col\r\n                    style={{\r\n                        textAlign: \"left\",\r\n                        color: players[0].color,\r\n                    }}>\r\n                    {players[0].score} : {players[0].shape}\r\n                </Col>\r\n            </Row>\r\n        </Card.Header>\r\n    );\r\n};\r\n\r\nexport default BriefScoreboard;\r\n","import { Fragment } from \"react\";\r\nimport { Button, Card, Row } from \"react-bootstrap\";\r\nimport { GameSetting } from \"../../services/configs\";\r\nimport BriefScoreboard from \"./BriefScoreboard\";\r\nimport \"../games.css\";\r\n\r\nconst TableDesign = ({ timeRemaining, dimension, players, table, onEachCellClick,normalCell }) => {\r\n    let dimens = [];\r\n    for (let i = 0; i < dimension; i++) dimens.push(i);\r\n\r\n    //prop drilling in BriefScoreBoard\r\n    return (\r\n        <Card\r\n            bg=\"transparent\"\r\n            border=\"dark\"\r\n            className=\"w-100 mx-auto\">\r\n            <BriefScoreboard timeRemaining={timeRemaining} players={players} />\r\n            <Card.Body className=\"game-border-card\">\r\n                {table ? (\r\n                    dimens.map((floor) => (\r\n                        <Fragment>\r\n                            {dimens.map((row) => (\r\n                                <Row\r\n                                    style={{\r\n                                        direction: \"ltr\",\r\n                                        marginLeft: `${GameSetting.T3D.TableRowMargings[row]}px`,\r\n                                    }}>\r\n                                    {dimens.map((column) => (\r\n                                        <Button\r\n                                            key={\r\n                                                floor * dimension * dimension +\r\n                                                row * dimension +\r\n                                                column\r\n                                            }\r\n                                            variant={normalCell}\r\n                                            className=\"game-table-cells\"\r\n                                            style={\r\n                                                table[floor][row][column] !==\r\n                                                null\r\n                                                    ? {\r\n                                                          color: players[\r\n                                                              table[floor][row][\r\n                                                                  column\r\n                                                              ]\r\n                                                          ].color,\r\n                                                      }\r\n                                                    : null\r\n                                            }\r\n                                            id={\r\n                                                floor * dimension * dimension +\r\n                                                row * dimension +\r\n                                                column\r\n                                            }\r\n                                            onClick={(event) =>\r\n                                                onEachCellClick(event)\r\n                                            }>\r\n                                            {table[floor][row][column] !==\r\n                                                null &&\r\n                                                players[\r\n                                                    table[floor][row][column]\r\n                                                ].shape}\r\n                                        </Button>\r\n                                    ))}\r\n                                </Row>\r\n                            ))}\r\n                            <br />\r\n                        </Fragment>\r\n                    ))\r\n                ) : (\r\n                    <p className=\"text-center\"> در حال اتصال... </p>\r\n                )}\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default TableDesign;\r\n","import { Component } from \"react\";\r\nimport \"../games.css\";\r\nimport gameServices from \"../../services/http/gameServices\";\r\nimport {\r\n\tconnect,\r\n\tcreateSocketRequest,\r\n} from \"../../services/ws/gamePlaySocketServices\";\r\nimport withReduxDashboard from \"../../globals/redux/withReduxDashboard\";\r\nimport { withRouter } from \"react-router\";\r\nimport TableDesign from \"./TableDesign\";\r\nimport { GameSetting } from \"../../services/configs\";\r\nimport { Attention, Notify } from \"../../tools/msgbox\";\r\nimport { toTimeShort } from \"../../tools/format\";\r\n\r\nclass GamePlay extends Component {\r\n\t//**** game resets on device change. fix it */\r\n\tstate = {\r\n\t\tnormalCell: \"outline-dark\",\r\n\t\tplayers: [\r\n\t\t\t{\r\n\t\t\t\t// ID: '',\r\n\t\t\t\tshape: <i className=\"fa fa-times\" aria-hidden=\"true\" />, // \"X\" : some device may not support font-awsome\r\n\t\t\t\tcolor: \"blue\",\r\n\t\t\t\tselected: \"warning\",\r\n\t\t\t\tlineColor: \"primary\",\r\n\t\t\t\tscore: 0,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// ID: '',\r\n\t\t\t\tshape: <i className=\"fa fa-sun-o\" aria-hidden=\"true\" />, // \"O\" : some device may not support font-awsome\r\n\t\t\t\tcolor: \"darkred\",\r\n\t\t\t\tselected: \"warning\",\r\n\t\t\t\tlineColor: \"danger\",\r\n\t\t\t\tscore: 0,\r\n\t\t\t},\r\n\t\t], // maybe use player actual user name and change this item to an object of objects?\r\n\t\tturn: 0, // start turn is decided by throwning dices\r\n\t\tdimension: 3,\r\n\t\ttable: null,\r\n\t\tmyTurn: undefined, // change this\r\n\t\tgameID: null,\r\n\t\tsocketGamePlay: undefined,\r\n\t\tplayerOnline: true,\r\n\t\ttimeRemaining: 0, //create a config\r\n\t\ttimerID: null,\r\n\t\tconnectionCheckTimerID: null,\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.cellButtons = [];\r\n\t}\r\n\r\n\tLoadOpponentData = (opponentID) => {\r\n\t\tconst { opponent, LoadOpponent } = this.props;\r\n\t\tif (!opponent && opponentID) {\r\n\t\t\tgameServices\r\n\t\t\t\t.loadPlayerData(opponentID)\r\n\t\t\t\t.then((result) => {\r\n\t\t\t\t\tLoadOpponent(result ? result : null);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t//console.log(err);\r\n\t\t\t\t\tLoadOpponent(null);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tupdateGameScorebaord = () => {\r\n\t\tconst { myTurn, players } = this.state;\r\n\t\tconst oppTurn = Number(!myTurn);\r\n\r\n\t\tthis.props.UpdateScoreboard({\r\n\t\t\tme: {\r\n\t\t\t\tindex: myTurn,\r\n\t\t\t\tshape: players[myTurn].shape,\r\n\t\t\t\tscore: players[myTurn].score,\r\n\t\t\t},\r\n\t\t\topp: {\r\n\t\t\t\tindex: oppTurn,\r\n\t\t\t\tshape: players[oppTurn].shape,\r\n\t\t\t\tscore: players[oppTurn].score,\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tenableTimerForMyMove = (timeout = GameSetting.T3D.TurnTimeOut) => {\r\n\t\tthis.setState({ timeRemaining: timeout });\r\n\t\t//is it needed to declare timerID as state?\r\n\t\tconst timerID = setInterval(() => {\r\n\t\t\tconst { timeRemaining, timerID } = this.state;\r\n\t\t\tif (timeRemaining <= 0) {\r\n\t\t\t\tclearInterval(timerID);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({ timeRemaining: this.state.timeRemaining - 1 });\r\n\t\t}, 1000);\r\n\t\tthis.setState({ timerID });\r\n\t};\r\n\r\n\tupdatePlayerStates = ({ turn, xScore, oScore }) => {\r\n\t\tconst players = [...this.state.players];\r\n\t\tplayers[0].score = xScore;\r\n\t\tplayers[1].score = oScore;\r\n\t\tthis.setState({\r\n\t\t\tplayers,\r\n\t\t\tturn,\r\n\t\t});\r\n\t\tthis.updateGameScorebaord();\r\n\t};\r\n\r\n\tdisableAllTimers = () => {\r\n\t\tconst { connectionCheckTimerID, timerID } = this.state;\r\n\t\tclearTimeout(connectionCheckTimerID);\r\n\t\tclearTimeout(timerID); //move time out timer\r\n\t};\r\n\r\n\tsocketOnMessage = (response) => {\r\n\t\tconst { data } = response;\r\n\t\tconst { cmd, msg } = JSON.parse(data);\r\n\t\tif (cmd === \"START\") {\r\n\t\t\tconst startTime = toTimeShort(msg);\r\n\t\t\tAttention(`بازی راس ساعت ${startTime} آغاز شد.`);\r\n\t\t} else if (cmd === \"GAME\") {\r\n\t\t\tconst { IDs, dimension, myTurn } = msg;\r\n\t\t\tthis.setState({ dimension, myTurn });\r\n\t\t\tconst opponentIndex = Number(!myTurn);\r\n\t\t\tthis.LoadOpponentData(IDs[opponentIndex]);\r\n\t\t} else if (cmd === \"LOAD\") {\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\t\t\tconst { table } = msg;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttable,\r\n\t\t\t});\r\n\t\t\tthis.updateGameScorebaord();\r\n\t\t} else if (cmd === \"TIMER\") {\r\n\t\t\t//you can calculate request respone time -> then minimize it from tiem sent by server -> to gain acurate time\r\n\t\t\t//but its real neccessary, Math.floor on the server side does this nearly\r\n\t\t\t//but for accurate approach remember: remove Math.floor from server side\r\n\t\t\tconsole.log(\"time updated: \", msg);\r\n\t\t\tthis.setState({ timeRemaining: msg });\r\n\t\t\tclearTimeout(this.state.timerID); //clear move time out timers, though their disabled before, this is for assurance\r\n\t\t\tthis.enableTimerForMyMove(msg);\r\n\t\t} else if (cmd === \"SCORES\") this.updatePlayerStates(msg);\r\n\t\telse if (cmd === \"UPDATE\") {\r\n\t\t\tconst { player, room } = this.props;\r\n\t\t\tconst { dimension } = this.state;\r\n\t\t\tconst cellID = Number(msg.nextMove);\r\n\r\n\t\t\t//*************** */\r\n\t\t\t//is this needed to check the move in client? considering that complete check has been made in client\r\n\t\t\t//and consder that: checking move in client may cause some bugs\r\n\t\t\t//for ex: new move is sent -> and 'cause of some error the cell is not empty\r\n\t\t\t//turn is not updated and this player can not make new moves to recieve server's table!!!\r\n\t\t\tthis.verifyAndApplyTheMove(\r\n\t\t\t\tthis.getCellCoordinates(cellID, dimension),\r\n\t\t\t\tthis.cellButtons[cellID]\r\n\t\t\t);\r\n\t\t\t//wrap it up this part of UPDATE and LOAD in a method\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\r\n\t\t\tthis.cellButtons[cellID].focus();\r\n\t\t\tthis.updateGameScorebaord();\r\n\r\n\t\t\t// now inform the server that the move is recieved\r\n\t\t\t//force connect it?\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\r\n\t\t\t\t\t\"move_recieved\",\r\n\t\t\t\t\troom.name,\r\n\t\t\t\t\tplayer.userID,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t// server time out is set and now setInterval for this client to show how much time left\r\n\t\t\tthis.enableTimerForMyMove();\r\n\t\t} else if (cmd === \"MOVE_MISSED\") {\r\n\t\t\tconst { myTurn } = this.state;\r\n\t\t\t//msg --> forced set turn\r\n\t\t\tthis.setState({ turn: msg });\r\n\t\t\tif (msg === myTurn) this.enableTimerForMyMove();\r\n\t\t} else if (cmd === \"END\") {\r\n\t\t\tthis.updatePlayerStates(msg);\r\n\t\t\tthis.endThisGame();\r\n\t\t\tthis.disableAllTimers();\r\n\t\t} else if (cmd === \"CLOSE\") {\r\n\t\t\tAttention(\r\n\t\t\t\t\"بدلیل حاضر نبودن هیچ کدام از بازیکینان، بازی شما کنسل شد\"\r\n\t\t\t);\r\n\t\t\tthis.closeThisGame();\r\n\t\t} else {\r\n\t\t\tconsole.log(\"wrong socket request\");\r\n\t\t}\r\n\t};\r\n\r\n\tforceConnectWS = async (nextJob) => {\r\n\t\tconst { player, room } = this.props;\r\n\r\n\t\ttry {\r\n\t\t\tlet socket = await connect(room.name, player.userID, room.type);\r\n\t\t\tsocket.onmessage = this.socketOnMessage;\r\n\t\t\tthis.setState({ socketGamePlay: socket });\r\n\t\t\tif (nextJob) nextJob();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\t// **********************\r\n\t\t\t//time out must be set with rising time out time to prevent server getting fucked up\r\n\t\t\tsetTimeout(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconsole.log(\"rconnecting from GamePlay\");\r\n\t\t\t\t\tthis.forceConnectWS(nextJob);\r\n\t\t\t\t},\r\n\t\t\t\tnextJob ? 1000 : 3000\r\n\t\t\t);\r\n\t\t\t//if there is a next job --> then player is sending a move or something important and\r\n\t\t\t//time out needs to be called quicker 'cause players have timeout in server for sending moves\r\n\t\t}\r\n\t};\r\n\r\n\tenableConnectionCheckTimer = () => {\r\n\t\treturn setInterval(() => {\r\n\t\t\tif (window.navigator.onLine) {\r\n\t\t\t\tif (!this.state.playerOnline) {\r\n\t\t\t\t\t//player JUST became online\r\n\t\t\t\t\tconsole.log(\"connected\");\r\n\t\t\t\t\tthis.setState({ playerOnline: true }); // toggle online status\r\n\t\t\t\t\tthis.forceConnectWS(null); // reconnect to gamePlayWebSocket\r\n\t\t\t\t}\r\n\t\t\t} else if (this.state.playerOnline) {\r\n\t\t\t\t//player JUST became offline\r\n\t\t\t\tconsole.log(\"dissconnected\");\r\n\t\t\t\tthis.setState({ playerOnline: false });\r\n\t\t\t}\r\n\t\t}, 2500); //2.5 sec is it ok?\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.cellButtons = document.getElementsByClassName(\"game-table-cells\"); // pay attension to searched className! may cause an error\r\n\r\n\t\tconst { player, room } = this.props;\r\n\t\tconst { myTurn } = this.state;\r\n\t\tthis.setState({ dimension: room.type });\r\n\r\n\t\tthis.forceConnectWS(() => {\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\"load\", room.name, player.userID, null)\r\n\t\t\t);\r\n\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\tcreateSocketRequest(\"mytimer\", room.name, player.userID, myTurn)\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tconsole.log(\"TOO MANY UNNEEDED PROPS SENT: \", this.props);\r\n\t\tthis.setState({\r\n\t\t\tconnectionCheckTimerID: this.enableConnectionCheckTimer(),\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.disableAllTimers();\r\n\t}\r\n\tgetCellCoordinates = (cellID, dimen) => {\r\n\t\tconst cellFloor = Math.floor(cellID / (dimen * dimen));\r\n\t\tconst onFloorId = cellID % (dimen * dimen);\r\n\t\tconst cellRow = Math.floor(onFloorId / dimen);\r\n\t\tconst cellColumn = onFloorId % dimen;\r\n\t\t// just test a random id to see how above formula works!\r\n\t\treturn { floor: cellFloor, row: cellRow, column: cellColumn };\r\n\t};\r\n\tonEachCellClick = (event) => {\r\n\t\tconst { dimension, turn, timerID } = this.state;\r\n\t\tconst { player, opponent, room } = this.props;\r\n\t\tif (opponent) {\r\n\t\t\ttry {\r\n\t\t\t\tconst selectedCellButton = event.target;\r\n\r\n\t\t\t\t//this is just for when the connection is not automatically came back, so the user via clicking cells can initiate connection\r\n\t\t\t\tif (this.state.turn !== this.state.myTurn) {\r\n\t\t\t\t\tconsole.log(this.state.myTurn);\r\n\t\t\t\t\t//is this needed really?\r\n\t\t\t\t\tthis.forceConnectWS(null);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst cell = this.getCellCoordinates(\r\n\t\t\t\t\tselectedCellButton.id,\r\n\t\t\t\t\tdimension\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (this.verifyAndApplyTheMove(cell, selectedCellButton)) {\r\n\t\t\t\t\t//send move to WebSocket Server\r\n\r\n\t\t\t\t\tthis.setState({ turn: (turn + 1) % 2 });\r\n\t\t\t\t\tthis.forceConnectWS(() => {\r\n\t\t\t\t\t\tthis.state.socketGamePlay.send(\r\n\t\t\t\t\t\t\tcreateSocketRequest(\r\n\t\t\t\t\t\t\t\t\"move\",\r\n\t\t\t\t\t\t\t\troom.name,\r\n\t\t\t\t\t\t\t\tplayer.userID,\r\n\t\t\t\t\t\t\t\tselectedCellButton.id\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t//load is not needed cause i updated server to send back new scores immediately\r\n\t\t\t\t\t\t/*this.state.socketGamePlay.send(\r\n                            createSocketRequest(\r\n                                \"load\",\r\n                                room.name,\r\n                                player.userID,\r\n                                null\r\n                            )\r\n                        );*/\r\n\t\t\t\t\t});\r\n\t\t\t\t\tclearInterval(timerID);\r\n\t\t\t\t\tthis.setState({ timeRemaining: 0 });\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\t//load again here?\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tverifyAndApplyTheMove = (cell, cellButton) => {\r\n\t\tconst { players, turn, normalCell } = this.state;\r\n\t\tlet tempTable = [...this.state.table];\r\n\t\tif (tempTable[cell.floor][cell.row][cell.column] === null) {\r\n\t\t\ttempTable[cell.floor][cell.row][cell.column] = turn; //maybe its better to use players actual Id huh?\r\n\t\t\tthis.setState({ table: tempTable });\r\n\t\t\t// cellButton.value = players[turn].shape;\r\n\t\t\t// cellButton.style.color = players[turn].color;\r\n\t\t\tcellButton.className = `game-table-cells btn btn-${players[turn].selected}`;\r\n            setTimeout(() => {cellButton.className = `game-table-cells btn btn-${normalCell}`;}, 1000);\r\n\t\t\t// time to inspect the new cell:\r\n\t\t\tthis.inspectAreaAroundTheCell(cell.floor, cell.row, cell.column);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tinspectAreaAroundTheCell = (floor, row, column) => {\r\n\t\t// inpect the table in all ways around a selected cell (new selected one), to update points and color the score routes\r\n\t\t// is it needed to write a inspectAll method ?\r\n\t\tconst { players, table, dimension } = this.state;\r\n\t\tconst playerInTheCell = table[floor][row][column];\r\n\t\tlet rowCount = 0,\r\n\t\t\tcolumnCount = 0,\r\n\t\t\tfloorMainDiagCount = 0,\r\n\t\t\tfloorSideDiagCount = 0;\r\n\t\tlet tableMainDiagCount = 0,\r\n\t\t\ttableSideDiagCount = 0,\r\n\t\t\ttableAltitudeCount = 0;\r\n\t\tfor (let i = 0; i < dimension; i++) {\r\n\t\t\tif (table[floor][row][i] === playerInTheCell) rowCount++; // inspect in a row\r\n\t\t\tif (table[floor][i][column] === playerInTheCell) columnCount++; // inspect in a column\r\n\t\t\tif (table[i][row][column] === playerInTheCell) tableAltitudeCount++; // inspect in a altitude line\r\n\t\t\tif (row === column) {\r\n\t\t\t\tif (table[floor][i][i] === playerInTheCell)\r\n\t\t\t\t\tfloorMainDiagCount++; // inspect in a 2D main diagonal line through the cell's floor\r\n\t\t\t\tif (row === floor && table[i][i][i] === playerInTheCell)\r\n\t\t\t\t\ttableMainDiagCount++; // inspect in a 3D main diagonal line through the whole table\r\n\t\t\t}\r\n\t\t\tif (row + column + 1 === dimension) {\r\n\t\t\t\tif (table[floor][i][dimension - i - 1] === playerInTheCell)\r\n\t\t\t\t\tfloorSideDiagCount++; // inpect in a 2D side Diagonal line through the cell's floor\r\n\t\t\t\tif (\r\n\t\t\t\t\trow === floor &&\r\n\t\t\t\t\ttable[i][i][dimension - i - 1] === playerInTheCell\r\n\t\t\t\t)\r\n\t\t\t\t\ttableSideDiagCount++; // inspect in a 3D side diagonal line through the whole table\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// now inspect wether a line has been made and take action for it\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\trowCount,\r\n\t\t\tfloor * dimension * dimension + row * dimension,\r\n\t\t\t1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tcolumnCount,\r\n\t\t\tfloor * dimension * dimension + column,\r\n\t\t\tdimension,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tfloorMainDiagCount,\r\n\t\t\tfloor * dimension * dimension,\r\n\t\t\tdimension + 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\tfloorSideDiagCount,\r\n\t\t\tfloor * dimension * dimension + (dimension - 1),\r\n\t\t\tdimension - 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableMainDiagCount,\r\n\t\t\t0,\r\n\t\t\tdimension * (dimension + 1) + 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableSideDiagCount,\r\n\t\t\tdimension - 1,\r\n\t\t\tdimension * (dimension + 1) - 1,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t\tthis.connectTheScoreLines(\r\n\t\t\ttableAltitudeCount,\r\n\t\t\trow * dimension + column,\r\n\t\t\tdimension * dimension,\r\n\t\t\tplayers[playerInTheCell],\r\n\t\t\tdimension\r\n\t\t);\r\n\t};\r\n\r\n\t// method below: checks each possible line(according to the condition that user gives it),\r\n\t// if the line is made colorifies the line and returns 1 ( as one single score for each line checked ), otherwise returns 0\r\n\tconnectTheScoreLines = (count, firstCell, step, player, dimension) => {\r\n\t\tconst { normalCell } = this.state;\r\n\t\tif (count === dimension) {\r\n\t\t\tfor (let i = 0; i < dimension; i++) {\r\n\t\t\t\tthis.cellButtons[\r\n\t\t\t\t\tfirstCell + i * step\r\n\t\t\t\t].className = `game-table-cells btn btn-${player.lineColor}`;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.cellButtons[\r\n\t\t\t\t\t\tfirstCell + i * step\r\n\t\t\t\t\t].className = `game-table-cells btn btn-${normalCell}`;\r\n\t\t\t\t}, 1000 + i * 100);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcloseThisGame = () => {\r\n\t\tthis.state.socketGamePlay.close();\r\n\t\tthis.setState({ socketGamePlay: null });\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.props.CleanScoreboard();\r\n\t\t\tthis.props.ResetOpponent();\r\n\t\t\tthis.props.ResetRoom();\r\n\t\t\tthis.props.TriggerRecordUpdate();\r\n\t\t\tthis.props.history.replace(\"/\"); // in competition mode must be send back to competition page\r\n\t\t}, 5000);\r\n\t};\r\n\r\n\tendThisGame = () => {\r\n\t\tconst { players, myTurn } = this.state;\r\n\t\tconst oppTurn = Number(!myTurn);\r\n\t\t//NOTE: u can deliver this message to socket global to make sure toast shows all the tie but its no need really :|\r\n\t\tif (players[myTurn].score > players[oppTurn].score)\r\n\t\t\tNotify(\"شما برنده شدید و سه امتیاز کسب کردید\");\r\n\t\telse if (players[myTurn].score === players[oppTurn].score)\r\n\t\t\tNotify(\"شما مساوی شدید و یک امتیاز کسب کردید\");\r\n\t\telse Notify(\"شما باختید\");\r\n\t\t//reset everything:\r\n\t\tthis.closeThisGame();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<TableDesign\r\n\t\t\t\tdimension={this.state.dimension}\r\n\t\t\t\tplayers={this.state.players}\r\n\t\t\t\ttable={this.state.table}\r\n\t\t\t\ttimeRemaining={this.state.timeRemaining}\r\n\t\t\t\tonEachCellClick={this.onEachCellClick}\r\n                normalCell={this.state.normalCell}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(withReduxDashboard(GamePlay));\r\n\r\n//another way to check online / offline status :\r\n// initiateGameTimer = () => {\r\n//     setInterval(() => {\r\n//         if (window.navigator.onLine) {\r\n//             if (this.connectionLost) {\r\n//                 console.log(\"connected\");\r\n//                 this.connectionLost = false;\r\n//                 this.forceConnectWS(null);\r\n//             }\r\n//         } else {\r\n//             console.log(\"dissconnected\");\r\n//             this.connectionLost = true;\r\n//         }\r\n//         /*this.isOnline(\r\n//             () => {\r\n//                 if (this.connectionLost) {\r\n//                     console.log(\"connected\");\r\n//                     this.connectionLost = false;\r\n//                     this.forceConnectWS(null);\r\n//                 }\r\n//             },\r\n//             () => {\r\n//                 console.log(\"dissconnected\");\r\n//                 this.connectionLost = true;\r\n//             }\r\n//         );*/\r\n//     }, 1000);\r\n// };\r\n\r\n// /*    isOnline = (success, failure) => {\r\n//     var xhr = XMLHttpRequest\r\n//         ? new XMLHttpRequest()\r\n//         : new window.ActiveXObject(\"Microsoft.XMLHttp\");\r\n//     xhr.onload = function () {\r\n//         if (success instanceof Function) {\r\n//             success();\r\n//         }\r\n//     };\r\n//     xhr.onerror = function () {\r\n//         if (failure instanceof Function) {\r\n//             failure();\r\n//         }\r\n//     };\r\n//      xhr.open(\"GET\", \"https://t3dweb.herokuapp.com/users\", true);//edit this ******************************\r\n//      xhr.send();\r\n// }; */\r\n","import { Fragment, useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { SetRoom, TriggerOpponentSearch } from \"../globals/redux/actions\";\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\";\r\nimport LoadingBar from '../commons/LoadingBar';\r\nimport { Notify } from \"../tools/msgbox\";\r\n\r\nconst RoomManager = ({ friendlyGame }) => {\r\n    const [roomName, setRoomName] = useState(\"\");\r\n    const [gameType, setGameType] = useState(4);\r\n    const player = useSelector((state) => state.player);\r\n    const [searching, setSearching] = useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onStartGameClick = (event) => {\r\n        event.preventDefault();\r\n        if (!player) {\r\n            Notify(\"ابتدا باید وارد حساب کاربری خود شوید\");\r\n            return;\r\n        }\r\n        if (friendlyGame) dispatch(SetRoom({ name: roomName, type: gameType }));\r\n        // random game:\r\n        else {\r\n            dispatch(SetRoom({ name: null, type: gameType }));\r\n            dispatch(TriggerOpponentSearch());\r\n            setSearching(true);\r\n        }\r\n    };\r\n\r\n    //on destroy\r\n    useEffect(() => {\r\n        return () => {\r\n            setSearching(false); //make sure preloader turns off\r\n         }\r\n    }, [])\r\n    return (\r\n        <Fragment>\r\n            <LoadingBar loading={searching} />\r\n            <hr />\r\n            <Form onSubmit={(event) => onStartGameClick(event)}>\r\n                <Form.Group className=\"form-inline\">\r\n                    <Form.Label className=\"w-25\">ابعاد جدول</Form.Label>\r\n                    <InputGroup\r\n                        style={{\r\n                            border: \"1px solid orange\",\r\n                            borderRadius: \"5px\",\r\n                            padding: \"2px\",\r\n                        }}>\r\n                        <InputGroup.Prepend className=\"mx-5\">\r\n                            <InputGroup.Radio\r\n                                value=\"3\"\r\n                                name=\"tableDimension\"\r\n                                checked={gameType === 3}\r\n                                onChange={() => setGameType(3)}\r\n                            />\r\n                            <InputGroup.Text>3 * 3 * 3</InputGroup.Text>\r\n                        </InputGroup.Prepend>\r\n                        <InputGroup.Prepend className=\"mx-5\">\r\n                            <InputGroup.Radio\r\n                                value=\"4\"\r\n                                name=\"tableDimension\"\r\n                                checked={gameType === 4}\r\n                                onChange={() => setGameType(4)}\r\n                            />\r\n                            <InputGroup.Text>4 * 4 * 4</InputGroup.Text>\r\n                        </InputGroup.Prepend>\r\n                        <InputGroup.Prepend className=\"mx-5\">\r\n                            <InputGroup.Radio\r\n                                value=\"5\"\r\n                                name=\"tableDimension\"\r\n                                checked={gameType === 5}\r\n                                onChange={() => setGameType(5)}\r\n                            />\r\n                            <InputGroup.Text>5 * 5 * 5</InputGroup.Text>\r\n                        </InputGroup.Prepend>\r\n                    </InputGroup>\r\n                </Form.Group>\r\n                <hr />\r\n                {friendlyGame && (\r\n                    \r\n                    <Form.Group className=\"mt-3 form-inline\">\r\n                        \r\n                        <Form.Label className=\"w-25\">نام روم</Form.Label>\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            className=\"w-75 text-left bg-transparent\"\r\n                            placeholder=\"Room Name\"\r\n                            value={roomName}\r\n                            required=\"required\"\r\n                            onChange={(event) =>\r\n                                setRoomName(event.target.value)\r\n                            }\r\n                        />\r\n                    </Form.Group>\r\n                )}\r\n                <hr />\r\n                <Button type=\"submit\" className=\"mt-4\" block variant=\"success\">\r\n                    <i\r\n                        className={`fa ${\r\n                            friendlyGame ? \"fa-handshake-o\" : \"fa-search\"\r\n                        } px-2`}\r\n                        aria-hidden=\"true\"></i>\r\n                    {friendlyGame ? \"ارسال درخواست\" : \"جستجو\"}\r\n                </Button>\r\n            </Form>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default RoomManager;\r\n","import { Alert, Badge, Container, Row, Col, Button } from \"react-bootstrap\";\r\n\r\nconst CompetitionSummary = ({ title, summary }) => {\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <Alert className=\"text-right w-100\" variant=\"info\">\r\n                    <Alert.Heading className=\"text-center\">\r\n                        <Badge variant=\"success p-2\" >\r\n                            {title}\r\n                        </Badge>\r\n                    </Alert.Heading>\r\n\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                    <p>{summary}</p>\r\n                </Alert>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n                <Alert className=\"text-right w-100\" pill=\"true\" variant=\"info\">\r\n                    <p>تعداد شرکت کنندگان : 00000000</p>\r\n                    <p>نکات دیگر</p>\r\n                </Alert>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n                <Col>\r\n                    <Button block variant=\"outline-success\">شرکت در مسابقه</Button>\r\n                </Col>\r\n                <Col>\r\n                <Button block variant=\"outline-secondary\">بازیکنان حاضر</Button>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default CompetitionSummary;\r\n","import { Col, Nav, Row, Tab } from \"react-bootstrap\";\r\nimport \"./competitions.css\";\r\nimport CompetitionSummary from \"./CompetitionSummary\";\r\n\r\nconst CompetitionsMain = () => {\r\n    return (\r\n        <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\">\r\n            <hr />\r\n\r\n            <Row>\r\n                <Col className=\"competition-menu-body\" sm={3}>\r\n                    <Nav variant=\"pills\" className=\"flex-column\">\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"first\">\r\n                                جام حذفی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"second\">\r\n                                لیگ امتیازی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"third\">\r\n                                بازی شرطی\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"forth\">\r\n                                جدول رندوم\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                        <Nav.Item>\r\n                            <Nav.Link className=\"text-right\" eventKey=\"fifth\">\r\n                                و غیره\r\n                            </Nav.Link>\r\n                        </Nav.Item>\r\n                    </Nav>\r\n                </Col>\r\n                {/* <div style={{borderLeft: '1px solid gray', height:'500px'}}></div> */}\r\n                <Col sm={9}>\r\n                    <Tab.Content>\r\n                        <Tab.Pane eventKey=\"first\">\r\n                            <CompetitionSummary\r\n                                title=\"جام حذفی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"second\">\r\n                            <CompetitionSummary\r\n                                title=\"لیگ امتیازی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"third\">\r\n                            <CompetitionSummary\r\n                                title=\"بازی شرطی\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"forth\">\r\n                            <CompetitionSummary\r\n                                title=\"جدول رندوم\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                        <Tab.Pane eventKey=\"fifth\">\r\n                            <CompetitionSummary\r\n                                title=\"و غیره\"\r\n                                summary=\"توضیحات این نوع مسابقه\"\r\n                            />\r\n                        </Tab.Pane>\r\n                    </Tab.Content>\r\n                </Col>\r\n            </Row>\r\n        </Tab.Container>\r\n    );\r\n};\r\n\r\nexport default CompetitionsMain;\r\n","import GamePlay from \"./gameplay/GamePlay\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SingleGame from \"./SingleGame\";\r\nimport { Tab, Tabs, Card, Fade } from \"react-bootstrap\";\r\nimport { Fragment } from \"react\";\r\nimport CompetitionsMain from \"./competitions/CompetitionsMain\";\r\n\r\nconst GameDeck = () => {\r\n    const room = useSelector((state) => state.room);\r\n\r\n    return (\r\n        <Fragment>\r\n            {room.name ? (\r\n                <GamePlay />\r\n            ) : (\r\n                <Card\r\n                    border=\"secondary\"\r\n                    bg=\"transparent\"\r\n                    className=\"game-deck-card\">\r\n                    <Card.Body>\r\n                        <Tabs\r\n                            defaultActiveKey=\"randomGame\"\r\n                            transition={false}\r\n                            id=\"noanim-tab-example\"\r\n                            variant=\"pills\"\r\n                            // transition={Fade}\r\n                            className=\"mb-3\">\r\n                            \r\n                            <Tab eventKey=\"randomGame\" title=\"بازی تصادفی\">\r\n                                <SingleGame friendlyGame={false} />\r\n                            </Tab>\r\n                            <Tab eventKey=\"competitions\" title=\"مسابقات\">\r\n                                <CompetitionsMain />\r\n                            </Tab>\r\n                            <Tab eventKey=\"friendlyGame\" title=\"بازی با دوستان\">\r\n                                <SingleGame friendlyGame={true} />\r\n                            </Tab>\r\n                        </Tabs>\r\n                    </Card.Body>\r\n                </Card>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default GameDeck;\r\n","import { Fragment, useState, useEffect } from \"react\";\r\nimport { Form, Card, Col, Row, Button, Alert } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport DatePicker from \"react-multi-date-picker\";\r\nimport persian from \"react-date-object/calendars/persian\";\r\nimport persian_fa from \"react-date-object/locales/persian_fa\";\r\nimport noticeServices from \"../services/http/noticeServices\";\r\nimport { Status, browserStorage } from \"../services/configs\";\r\nimport \"./profile.css\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport jwtdecode from \"jwt-decode\";\r\nimport { OK, Sorry } from \"../tools/msgbox\";\r\nconst NoticeManager = () => {\r\n\t//u can create another component for listing notices ?\r\n\tconst player = useSelector((state) => state.player);\r\n\tconst [isAllowed, setAllowed] = useState(undefined);\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [text, setText] = useState(\"\");\r\n\tconst [startDate, setStartDate] = useState(null);\r\n\tconst [endDate, setEndDate] = useState(null);\r\n\tconst [notices, setNotices] = useState([]);\r\n\tconst [selectedNoticeID, setSelectedNoticeID] = useState(null);\r\n\tconst [updateTrigger, setUpdateTrigger] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst resetStates = () => {\r\n\t\tsetTitle(\"\");\r\n\t\tsetText(\"\");\r\n\t\tsetStartDate(null);\r\n\t\tsetEndDate(null);\r\n\t\tsetSelectedNoticeID(null);\r\n\t\tsetUpdateTrigger(!updateTrigger); // updateTrigger: true <===> false -> chane -> useEffects calls\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t//use another simpler preloader\r\n\t\t//load all notices in left side for selecting: load all and push them in notices state\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tconst { status, data } =\r\n\t\t\t\t\tawait noticeServices.getAdvancedNotics();\r\n\t\t\t\tif (status === Status.Successful) {\r\n\t\t\t\t\t//return data.notices;\r\n\t\t\t\t\tif (data.notices.length) setNotices(data.notices.reverse());\r\n\t\t\t\t\t//if all is empty\r\n\t\t\t\t\tif (data.notices.length === 0) {\r\n\t\t\t\t\t\tsetNotices([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: \"پیام\",\r\n\t\t\t\t\t\t\t\ttext: \"اطلاعیه جدیدی وجود ندارد\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetNotices([\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"خطا\",\r\n\t\t\t\t\t\ttext: \"...مشکلی حین بارگذاری اطلاعیه ها پیش آمد. دوباره امتحان کنید\",\r\n\t\t\t\t\t},\r\n\t\t\t\t]);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [updateTrigger]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst token = browserStorage.TOKEN();\r\n        let isAdmin = undefined;\r\n\t\tif (token) {\r\n\t\t\tconst decoded_token = jwtdecode(browserStorage.TOKEN());\r\n\t\t\tisAdmin = decoded_token &&\r\n\t\t\t\tdecoded_token.user.admin &&\r\n\t\t\t\tdecoded_token.exp > Date.now() / 1000; //user is admin and token not expired\r\n\t\t\t// show proper message for simple users\r\n\t\t\tif (!player || isAdmin === false) {\r\n\t\t\t\t//in first render a wronge message will be shown! find a fix\r\n\t\t\t\t//2nd condition must be exactly the same\r\n\t\t\t\tSorry(\"متاسفانه شما مجوز دسترسی به این صفحه را ندارید.\");\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n        else isAdmin = false;\r\n\t\tsetAllowed(isAdmin);\r\n\t}, [player]);\r\n\t//***** in server implemented a middleware for this, is this needed? */\r\n\r\n\t//runs when create notice button clicks\r\n\tconst createNewNotice = async () => {\r\n\t\t//add patern and stuff to states and inputs\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst { status } = await noticeServices.createNotice({\r\n\t\t\t\ttitle,\r\n\t\t\t\ttext,\r\n\t\t\t\tstartDate: new Date(startDate),\r\n\t\t\t\tendDate: new Date(endDate),\r\n\t\t\t});\r\n\t\t\t//*********** */\r\n\t\t\t//COMPLETELY CHECK NOTICE IN CLIENT AND SERVER\r\n\t\t\tif (status === Status.CreatedSuccessfully) {\r\n\t\t\t\tOK(`اطلاعیه ی ${title} با موفقیت ساخته شد`);\r\n\t\t\t\tresetStates();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره اطلاعیه بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\tconst selecteNotice = (notice) => {\r\n\t\t// console.log(notice);\r\n\t\tsetSelectedNoticeID(notice._id);\r\n\t\tsetTitle(notice.title);\r\n\t\tsetText(notice.text);\r\n\t\tsetStartDate(new Date(notice.startDate));\r\n\t\tsetEndDate(new Date(notice.endDate));\r\n\t};\r\n\r\n\tconst cancelEditing = () => {\r\n\t\tresetStates();\r\n\t};\r\n\r\n\tconst saveChanges = async () => {\r\n\t\t//add patern and stuff to states and inputs\r\n\t\tif (!selectedNoticeID) return;\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { status } = await noticeServices.editNotice(\r\n\t\t\t\tselectedNoticeID,\r\n\t\t\t\t{ title, text, startDate, endDate }\r\n\t\t\t);\r\n\t\t\tif (status === Status.Successful) {\r\n\t\t\t\tOK(`اطلاعیه ی ${title} با مورفقیت ویرایش شد`);\r\n\t\t\t\tresetStates();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!Status.isErrorExpected(err))\r\n\t\t\t\tSorry(\r\n\t\t\t\t\t\"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t};\r\n\t// if admin status is checked directly by server then start rendering the page\r\n\t//consists two part\" right part => used for creating and editing notices\r\n\t//left part lists all notices and allows admin to select one => after selecting the notice will be ready to be edited on right side\r\n\r\n\t//edit all heights in control panel\r\n\t//add patern and stuff to states and inputs\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{player && isAllowed && (\r\n\t\t\t\t<Row style={{ height: \"100%\" }}>\r\n\t\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t\t<Col xs={5}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tborder=\"success\"\r\n\t\t\t\t\t\t\tbg=\"transparent\"\r\n\t\t\t\t\t\t\tclassName=\"mx-auto notice-manager-card\">\r\n\t\t\t\t\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\t\t\t\t\tاطلاعیه جدید\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Card.Body className=\"text-right\">\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-auto\">\r\n\t\t\t\t\t\t\t\t\tعنوان اطلاعیه\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tpattern=\".{3,30}\"\r\n\t\t\t\t\t\t\t\t\tonInput={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\t\"عنوان اطلاعیه باید حداقل 3 و حداکثر 30 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"عنوان\"\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-auto\">\r\n\t\t\t\t\t\t\t\t\tتوضیحات\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\t\tpattern=\".{5,200}\"\r\n\t\t\t\t\t\t\t\t\tonInput={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonInvalid={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.target.setCustomValidity(\r\n\t\t\t\t\t\t\t\t\t\t\t\"متن اطلاعیه باید حداقل 5 و حداکثر 200 کاراکتر داشته باشد\"\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto h-25\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"متن کامل اطلاعیه را وارد کنید\"\r\n\t\t\t\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setText(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-2\">\r\n\t\t\t\t\t\t\t\t\tتاریخ شروع نمایش\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto w-100\"\r\n\t\t\t\t\t\t\t\t\tcalendar={persian}\r\n\t\t\t\t\t\t\t\t\tlocale={persian_fa}\r\n\t\t\t\t\t\t\t\t\tcalendarPosition=\"bottom-right\"\r\n\t\t\t\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\t\t\t\tonChange={setStartDate}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<Form.Label className=\"my-1 mx-2\">\r\n\t\t\t\t\t\t\t\t\tتاریخ پایان نمایش\r\n\t\t\t\t\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tclassName=\"my-1 mx-auto\"\r\n\t\t\t\t\t\t\t\t\tcalendar={persian}\r\n\t\t\t\t\t\t\t\t\tlocale={persian_fa}\r\n\t\t\t\t\t\t\t\t\tcalendarPosition=\"bottom-right\"\r\n\t\t\t\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\t\t\t\tonChange={setEndDate}\r\n\t\t\t\t\t\t\t\t\trequired=\"required\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t\t\t\t{!selectedNoticeID ? (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={createNewNotice}>\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\tایجاد اطلاعیه\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={saveChanges}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\tذخیره تغییرات\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-warning text-secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={cancelEditing}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-floppy-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\tلغو ویرایش\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Card.Footer>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={7}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tborder=\"info\"\r\n\t\t\t\t\t\t\tbg=\"transparent\"\r\n\t\t\t\t\t\t\tclassName=\"mx-auto notice-manager-card\">\r\n\t\t\t\t\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\t\t\t\t\tاطلاعیه های قبلی\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Card.Body\r\n\t\t\t\t\t\t\t\tstyle={{ overflowY: \"scroll\" }}\r\n\t\t\t\t\t\t\t\tclassName=\"text-right\">\r\n\t\t\t\t\t\t\t\t{notices.map((notice) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t<Alert variant=\"secondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-info-circle px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"18px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{notice.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t: {notice.text}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"icon-edit-notice fa fa-pencil-square-o px-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselecteNotice(notice)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default NoticeManager;\r\n","import { Fragment, useState, useEffect } from \"react\";\r\nimport { Button, Card, Form, Col, Row } from \"react-bootstrap\";\r\nimport LoadingBar from \"../commons/LoadingBar\";\r\nimport \"./profile.css\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport Configs from \"../services/configs\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { TriggerRecordUpdate } from \"../globals/redux/actions\";\r\nimport { OK, Sorry } from \"../tools/msgbox\";\r\n\r\nconst MODES = { READ_ONLY: 0, EDIT: 1, CHANGE_PASS: 2 };\r\nconst AccountCredentials = () => {\r\n    //states\r\n\r\n    const [fullname, setFullname] = useState(\"\");\r\n    const [studentID, setStudentID] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [loading, setLoading] = useState(\"\");\r\n    const [pageMode, setPageMode] = useState(MODES.READ_ONLY); //  0 => read only, 1 => edit mode, 2 => change password\r\n    const [pageUpdateTrigger, triggerPageUpdate] = useState(false); // true <=> false -> triggers page , ==> see useEffect\r\n    const [newPassword, setNewPassword] = useState(\"\");\r\n    const [confirmNewPassword, setConfirmNewPassword] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    //on component mount download user credentials\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                setLoading(true);\r\n                const { status, data } = await userServices.getMyCredentials();\r\n                if (status === Configs.Status.Successful) {\r\n                    const { me } = data;\r\n                    setFullname(me.fullname);\r\n                    setStudentID(me.studentID);\r\n                    setEmail(me.email);\r\n                }\r\n            } catch (err) {\r\n                if (!Configs.Status.isErrorExpected(err))\r\n                    Error(\r\n                        \"حین دریافت اطلاعات کاربر ایرادی پیش آمد. ... لطفا دوباره تلاش کنید.\"\r\n                    );\r\n                setLoading(false);\r\n            }\r\n            setLoading(false);\r\n        })();\r\n    }, [pageUpdateTrigger]);\r\n\r\n    const reloadPage = () => {\r\n        setLoading(false);\r\n        setPageMode(MODES.READ_ONLY);\r\n        triggerPageUpdate(!pageUpdateTrigger);\r\n    };\r\n    const saveChanges = async () => {\r\n        //add patern and stuff to states and inputs\r\n        // check all inputs plz\r\n        setLoading(true);\r\n        try {\r\n            const { status } = await userServices.editMyCredentials({\r\n                studentID,\r\n                fullname,\r\n                email,\r\n                password,\r\n            });\r\n            if (status === Configs.Status.Successful) {\r\n                OK(`تغییرات با موفقیت اعمال شد`);\r\n                dispatch(TriggerRecordUpdate());\r\n\r\n                reloadPage();\r\n            }\r\n        } catch (err) {\r\n            if (!Configs.Status.isErrorExpected(err))\r\n                Error(\r\n                    \"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\",\r\n                    { position: \"top-left\", closeOnClick: true }\r\n                );\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const changeMyPassword = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { status } = await userServices.changeMyPassword({\r\n                studentID,\r\n                password,\r\n                newPassword,\r\n            });\r\n            if (status === Configs.Status.Successful) {\r\n                OK(\"رمز شما با موفقیت تغییر داده شد\");\r\n                dispatch(TriggerRecordUpdate());\r\n                reloadPage();\r\n            }\r\n        } catch (err) {\r\n            if (!Configs.Status.isErrorExpected(err))\r\n                Sorry(\r\n                    \"خطایی در ذخیره تغییرات بوجود امد ... لطفا دوباره تلاش کنید\"\r\n                );\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const selectMode = (e) => {\r\n        e.preventDefault();\r\n        switch (pageMode) {\r\n            case MODES.EDIT:\r\n                saveChanges();\r\n                return;\r\n            case MODES.CHANGE_PASS:\r\n                changeMyPassword();\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n    const checkConfirmPassword = (event) => {\r\n        setConfirmNewPassword(event.target.value);\r\n        if (newPassword !== event.target.value) {\r\n            event.target.setCustomValidity(\r\n                \"تایید رمز عبور جدید باید با خود رمز عبور جدید مطابقت کامل داشته باشد\"\r\n            );\r\n            //console.log(password, confirmPassword);\r\n        } else event.target.setCustomValidity(\"\");\r\n    };\r\n\r\n    // *************************** DESIGN NOTE *******/\r\n    // HOW ABOUT USING TABS ? <Tabs>\r\n    return (\r\n        <Fragment>\r\n            <Card\r\n                border=\"secondary\"\r\n                bg=\"transparent\"\r\n                className=\"big-single-card\">\r\n                <Card.Header className=\"text-center\">\r\n                    <Row className=\"w-100 mx-auto\">\r\n                        <Col>\r\n                            <Button\r\n                                block\r\n                                onClick={() => setPageMode(MODES.READ_ONLY)}\r\n                                variant={`${\r\n                                    !pageMode\r\n                                        ? \"outline-primary\"\r\n                                        : \"outline-secondary\"\r\n                                }`}>\r\n                                {pageMode === MODES.READ_ONLY && (\r\n                                    <i\r\n                                        className=\"fa fa-dot-circle-o px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                )}\r\n                                فقط مشاهده\r\n                            </Button>\r\n                        </Col>\r\n                        <Col>\r\n                            <Button\r\n                                block\r\n                                onClick={() => setPageMode(MODES.EDIT)}\r\n                                variant={`${\r\n                                    pageMode === MODES.EDIT\r\n                                        ? \"outline-primary\"\r\n                                        : \"outline-secondary\"\r\n                                }`}>\r\n                                {pageMode === MODES.EDIT && (\r\n                                    <i\r\n                                        className=\"fa fa-dot-circle-o px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                )}\r\n                                ویرایش\r\n                            </Button>\r\n                        </Col>\r\n                        <Col>\r\n                            <Button\r\n                                block\r\n                                onClick={() => setPageMode(MODES.CHANGE_PASS)}\r\n                                variant={`${\r\n                                    pageMode === MODES.CHANGE_PASS\r\n                                        ? \"outline-primary\"\r\n                                        : \"outline-secondary\"\r\n                                }`}>\r\n                                {pageMode === MODES.CHANGE_PASS && (\r\n                                    <i\r\n                                        className=\"fa fa-dot-circle-o px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                )}\r\n                                تغییر رمز عبور\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                </Card.Header>\r\n                <Form onSubmit={(e) => selectMode(e)}>\r\n                    <Card.Body className=\"w-75 text-center mx-auto\">\r\n                        <LoadingBar loading={loading} />\r\n\r\n                        {pageMode !== MODES.CHANGE_PASS && (\r\n                            <Fragment>\r\n                                <Form.Group className=\"form-inline\">\r\n                                    <Form.Label className=\"w-25\">\r\n                                        شماره دانشجویی\r\n                                    </Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        disabled\r\n                                        className=\"account-info-textbox w-75\"\r\n                                        placeholder=\"Student ID\"\r\n                                        value={studentID}\r\n                                    />\r\n                                </Form.Group>\r\n                                <Form.Group className=\"form-inline\">\r\n                                    <Form.Label className=\"w-25\">\r\n                                        نام کاربر\r\n                                    </Form.Label>\r\n                                    <Form.Control\r\n                                        disabled={!pageMode}\r\n                                        type=\"text\"\r\n                                        className=\"account-info-textbox w-75\"\r\n                                        pattern=\"[آ-ی ]{6,}\" // persian characters and space\r\n                                        onInput={(e) =>\r\n                                            e.target.setCustomValidity(\"\")\r\n                                        }\r\n                                        onInvalid={(e) =>\r\n                                            e.target.setCustomValidity(\r\n                                                \"نام خانوادگی باید با حروف فارسی و با حداقل طول سه حرف باشد\"\r\n                                            )\r\n                                        }\r\n                                        placeholder=\"Full Name\"\r\n                                        value={fullname}\r\n                                        required=\"required\"\r\n                                        onChange={(e) =>\r\n                                            setFullname(e.target.value)\r\n                                        }\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Form.Group className=\"form-inline\">\r\n                                    <Form.Label className=\"w-25\">\r\n                                        ایمیل\r\n                                    </Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"email\"\r\n                                        disabled={!pageMode}\r\n                                        pattern=\".{6,}\"\r\n                                        onInput={(e) =>\r\n                                            e.target.setCustomValidity(\"\")\r\n                                        }\r\n                                        onInvalid={(e) =>\r\n                                            e.target.setCustomValidity(\r\n                                                \"ورودی باید فرمت معتبر ایمیل را رعایت کرده و حداقل 6 کاراکتر باشد\"\r\n                                            )\r\n                                        }\r\n                                        className=\"account-info-textbox w-75\"\r\n                                        placeholder=\"E-mail\"\r\n                                        value={email}\r\n                                        required=\"required\"\r\n                                        onChange={(e) =>\r\n                                            setEmail(e.target.value)\r\n                                        }\r\n                                    />\r\n                                </Form.Group>\r\n                            </Fragment>\r\n                        )}\r\n                        {pageMode !== MODES.READ_ONLY && (\r\n                            <Form.Group className=\"form-inline\">\r\n                                <Form.Label className=\"w-25\">\r\n                                    {`رمز عبور ${\r\n                                        pageMode === MODES.CHANGE_PASS\r\n                                            ? \"فعلی\"\r\n                                            : \"\"\r\n                                    }`}\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    type=\"password\"\r\n                                    className=\"account-info-textbox w-75\"\r\n                                    placeholder=\"Password\"\r\n                                    value={password}\r\n                                    onChange={(e) =>\r\n                                        setPassword(e.target.value)\r\n                                    }\r\n                                />\r\n                            </Form.Group>\r\n                        )}\r\n                        {pageMode === MODES.CHANGE_PASS && (\r\n                            <>\r\n                                <Form.Group className=\"form-inline\">\r\n                                    <Form.Label className=\"w-25\">\r\n                                        رمز عبور جدید\r\n                                    </Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        pattern=\".{6,15}\"\r\n                                        onInput={(e) =>\r\n                                            e.target.setCustomValidity(\"\")\r\n                                        }\r\n                                        onInvalid={(e) =>\r\n                                            e.target.setCustomValidity(\r\n                                                \"رمز عبور باید حداقل 6 کاراکتر و حداکثر 15 کاراکتر داشته باشد\"\r\n                                            )\r\n                                        }\r\n                                        className=\"account-info-textbox w-75\"\r\n                                        placeholder=\"New Password\"\r\n                                        value={newPassword}\r\n                                        required=\"required\"\r\n                                        onChange={(e) =>\r\n                                            setNewPassword(e.target.value)\r\n                                        }\r\n                                    />\r\n                                </Form.Group>\r\n                                <Form.Group className=\"form-inline\">\r\n                                    <Form.Label className=\"w-25\">\r\n                                        تایید رمز عبور جدید\r\n                                    </Form.Label>\r\n\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        className=\"account-info-textbox w-75\"\r\n                                        placeholder=\"Confirm New Password\"\r\n                                        value={confirmNewPassword}\r\n                                        required=\"required\"\r\n                                        onChange={(event) =>\r\n                                            checkConfirmPassword(event)\r\n                                        }\r\n                                    />\r\n                                </Form.Group>\r\n                            </>\r\n                        )}\r\n                    </Card.Body>\r\n                    <Card.Footer>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={!pageMode}\r\n                            block\r\n                            variant=\"success\"\r\n                            className=\"w-50 mx-auto\">\r\n                            <i\r\n                                className=\"fa fa-wrench px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            ثبت تغییرات\r\n                        </Button>\r\n                    </Card.Footer>\r\n                </Form>\r\n            </Card>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default AccountCredentials;\r\n","export default __webpack_public_path__ + \"static/media/no-avatar.5e7c913e.png\";","import { Button, Card, Col, Image, ListGroup, Row } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"../profile.css\";\r\nimport noAvatar from \"./no-avatar.png\"; // definitely must be changed bro!\r\nimport Record from \"./Record\";\r\nimport Avatar from \"react-avatar\";\r\nconst FriendRecords = (props) => {\r\n\tconst me = useSelector((state) => state.player);\r\n\tif (!me) return null; //because of time delay to load player data, component crashes below\r\n\t//fix the bug in a better way\r\n\tconst { records } = props.friend ? props.friend : me;\r\n\treturn (\r\n\t\t<Card border=\"success\" bg=\"transparent\" className=\"friend-records\">\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<Row className=\"w-100 p-0 mx-auto\">\r\n\t\t\t\t\t{/* <hr /> */}\r\n\t\t\t\t\t<Col xs={3} className=\"text-center mx-auuto\">\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\t\tmargin: \"auto\",\r\n\t\t\t\t\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tround={true}\r\n\t\t\t\t\t\t\tsrc={noAvatar}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<ListGroup className=\" list-group list-group-flush\">\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"امتیاز بازیکن\">\r\n\t\t\t\t\t\t\t\t\t\t{records.points}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد بردها\">\r\n\t\t\t\t\t\t\t\t\t\t{records.wins}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد تساوی\">\r\n\t\t\t\t\t\t\t\t\t\t{records.draws}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col className=\"p-0 w-100\">\r\n\t\t\t\t\t\t\t\t\t<Record title=\"تعداد باختها\">\r\n\t\t\t\t\t\t\t\t\t\t{records.loses}\r\n\t\t\t\t\t\t\t\t\t</Record>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card.Body>\r\n\t\t\t{props.friend && (\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tonClick={null}>\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tclassName=\"fa fa-handshake-o px-2\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\tدرخواست بازی\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\tonClick={null}>\r\n\t\t\t\t\t\t\t\tتست\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t)}\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default FriendRecords;\r\n","import { useState, useEffect } from \"react\";\r\nimport LoadingBar from \"../../commons/LoadingBar\";\r\nimport userServices from \"../../services/http/userServices\";\r\nimport Configs from \"../../services/configs\";\r\nimport gameServices from \"../../services/http/gameServices\";\r\nimport { Card, Col, Nav, Row, Tab } from \"react-bootstrap\";\r\nimport AllScores from \"../../tables/scores/AllScores\";\r\nimport \"../profile.css\";\r\nimport FriendRecords from \"./FriendRecords\";\r\n\r\nconst MyGamesAndFriends = () => {\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [myFriends, setMyFriends] = useState([]);\r\n\tconst [myGames, setMyGames] = useState([]);\r\n\tconst [filterID, setFilterID] = useState(\"me\");\r\n\tconst [selectedFriendIndex, setSelectedFriendIndex] = useState(-1);\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tsetLoading(true); // use preloader here?\r\n\t\t\t\tlet serverResponse = await gameServices.getMyGames();\r\n\t\t\t\tif (serverResponse.status === Configs.Status.Successful)\r\n\t\t\t\t\tsetMyGames(serverResponse.data.myGames.reverse());\r\n\t\t\t\tserverResponse = await userServices.getMyFriends();\r\n\t\t\t\tif (serverResponse.status === Configs.Status.Successful)\r\n\t\t\t\t\tsetMyFriends(serverResponse.data.friends);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetSelectedFriendIndex(\r\n\t\t\tfilterID !== \"me\"\r\n\t\t\t\t? myFriends.findIndex((friend) => friend.userID === filterID)\r\n\t\t\t\t: -1\r\n\t\t);\r\n\t\t// if filterID === \"me\" || frined id wia .findIndex not found ---> returns -1\r\n\t}, [filterID, myFriends]);\r\n\r\n    const unfriend = (friend) => {\r\n        //... show a modal or sth to ask if user's sure\r\n        // send proper http request to clear both from each others friend list\r\n\r\n    }\r\n\treturn (\r\n\t\t<Card border=\"secondary\" bg=\"transparent\" className=\"big-single-card\">\r\n\t\t\t<Card.Header className=\"text-center\">\r\n\t\t\t\tلیست دوستان و آمار بازی ها\r\n\t\t\t</Card.Header>\r\n\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<LoadingBar loading={loading} />\r\n\t\t\t\t<Tab.Container\r\n\t\t\t\t\tdefaultActiveKey={filterID}\r\n\t\t\t\t\tonSelect={(key) => setFilterID(key)}>\r\n\t\t\t\t\t<Row className=\"tabs-list-friends-in-games-scrollable\">\r\n\t\t\t\t\t\t<Col className=\"friend-list-name-length\" xs={3}>\r\n\t\t\t\t\t\t\t<Nav\r\n\t\t\t\t\t\t\t\tvariant=\"pills\"\r\n\t\t\t\t\t\t\t\tclassName=\"flex-column text-right\">\r\n\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"me\">\r\n\t\t\t\t\t\t\t\t\t\tهمه بازی ها\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t{myFriends.map((friend) => (\r\n\t\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link eventKey={friend.userID}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Row className=\"w-100\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col>{friend.fullname}</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col xs={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i onClick={() => unfriend(friend)} className=\"icon-unfriend fa fa-times pl-2\" area-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{/* EDIT MAIL LAYOUT <Col> LIKE THIS */}\r\n\t\t\t\t\t\t<Col xs={9}>\r\n\t\t\t\t\t\t\t<FriendRecords\r\n\t\t\t\t\t\t\t\tfriend={\r\n\t\t\t\t\t\t\t\t\tselectedFriendIndex !== -1\r\n\t\t\t\t\t\t\t\t\t\t? myFriends[selectedFriendIndex]\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Tab.Content>\r\n\t\t\t\t\t\t\t\t<Tab.Pane eventKey=\"me\">\r\n\t\t\t\t\t\t\t\t\t<AllScores scores={myGames} />\r\n\t\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t\t{myFriends.map((friend) => (\r\n\t\t\t\t\t\t\t\t\t<Tab.Pane eventKey={friend.userID}>\r\n\t\t\t\t\t\t\t\t\t\t<AllScores\r\n\t\t\t\t\t\t\t\t\t\t\tscores={myGames.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(game) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.userID ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgame.players[0].id ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.userID ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgame.players[1].id\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Tab.Content>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{/* EDIT MAIL LAYOUT <Col> LIKE THIS */}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Tab.Container>\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default MyGamesAndFriends;\r\n","import { Routes } from '../configs';\r\n\r\nimport http from \"./httpService\";\r\n\r\nconst {Server} = Routes;\r\n\r\nconst chatServices = {\r\n    \r\n    getOurChat: (friendID) => {\r\n        return http.get(`${Server.Root}/${Server.Chats}/${friendID}`);\r\n    }\r\n};\r\n\r\nexport default chatServices;","import { Fragment, useState, useEffect } from \"react\";\r\nimport { Alert, Col, Row } from \"react-bootstrap\";\r\nimport \"./chat.css\";\r\nimport { v1 as uuidv1 } from 'uuid'\r\nimport { toHijri } from \"../tools/format\";\r\nconst Message = ({ msg, previousDay, inDesktop }) => {\r\n    const { date } = msg; // destructure date from msg then make a new date object\r\n    // reason for making new Date objects is that react throws error some time when you use it without new Date :|\r\n    const [showDate, setShowDate] = useState(false); //for each day, the first message in that day has persian date above it\r\n    const [time, setTime] = useState(null);\r\n    const [hijriDate, setHijriDate] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const [hDate, hTime] = toHijri(date);\r\n        setTime(hTime); setHijriDate(hDate);\r\n        setShowDate(\r\n            new Date(date).getDate() !== previousDay || previousDay === 0\r\n        ); //     0 means this is the first message in the chat\r\n    }, [date, previousDay]);\r\n\r\n    //note: Device.Desktop is 0 -> so it inDesktop is used conditionally but it actually contains device type and not a boolean\r\n    return (\r\n        <Fragment key={uuidv1()}>\r\n            {!showDate ? null : (\r\n                <Fragment>\r\n                    <hr />\r\n                    <p className=\"message-date\">{hijriDate}</p>\r\n                </Fragment>\r\n            )}\r\n            <Row>\r\n                <Col>\r\n                    {msg.me && (\r\n                        <Alert className=\"text-right\" variant=\"dark\">\r\n                            {inDesktop ? (\r\n                                <Row>\r\n                                    <Col>{msg.me}</Col>\r\n                                    <Col className=\"my-message-time\" xs={3}>\r\n                                        {time}\r\n                                    </Col>\r\n                                </Row>\r\n                            ) : (\r\n                                <Fragment>\r\n                                    <Row>{msg.me}</Row>\r\n                                    <Row className=\"my-message-time\" xs={3}>\r\n                                        {time}\r\n                                    </Row>\r\n                                </Fragment>\r\n                            )}\r\n                        </Alert>\r\n                    )}\r\n                </Col>\r\n                <Col>\r\n                    {msg.friend && (\r\n                        <Alert className=\"text-right\" variant=\"primary\">\r\n                            {inDesktop ? (\r\n                                <Row>\r\n                                    <Col className=\"friend-message-time\" xs={3}>\r\n                                        {time}\r\n                                    </Col>\r\n                                    <Col>{msg.friend}</Col>\r\n                                </Row>\r\n                            ) : (\r\n                                <Fragment>\r\n                                    <Row>{msg.friend}</Row>\r\n                                    <Row className=\"friend-message-time\" xs={3}>\r\n                                        {time}\r\n                                    </Row>\r\n                                </Fragment>\r\n                            )}\r\n                        </Alert>\r\n                    )}\r\n                </Col>\r\n            </Row>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default Message;\r\n","import {\r\n    Button,\r\n    Card,\r\n    Container,\r\n    Form,\r\n    InputGroup,\r\n    Row,\r\n    Tab,\r\n} from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useState, useEffect, useCallback, useRef, useContext } from \"react\";\r\nimport { SendMessageTo } from \"../globals/redux/actions\";\r\nimport \"./chat.css\";\r\nimport { Devices, Status } from \"../services/configs\";\r\nimport chatServices from \"../services/http/chatServices\";\r\n\r\nimport Message from \"./Message\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\n\r\nconst ChatBox = ({ friendID }) => {\r\n    const [myMessage, setMyMessage] = useState(\"\");\r\n    const message = useSelector((state) => state.message);\r\n    const dispatch = useDispatch();\r\n    const me = useSelector((state) => state.player);\r\n    const mostRecentMessageRef = useRef(null);\r\n    const context = useContext(GlobalContext);\r\n\r\n    //...TEMP: just save msges in client side\r\n    const [allMsgs, setAllMsgs] = useState([\r\n        { me: null, friend: null, date: null, key: 0 },\r\n    ]);\r\n\r\n    const loadPreviousMessages = useCallback(async () => {\r\n        try {\r\n            const { status, data } = await chatServices.getOurChat(friendID);\r\n            if (status === Status.Successful) {\r\n                const { myIndex, chat } = data;\r\n                const previousMsgs = chat.map((message) => {\r\n                    const { text, owner, date } = message;\r\n                    if (owner === myIndex)\r\n                        return {\r\n                            me: text,\r\n                            friend: null,\r\n                            date,\r\n                        };\r\n                    return {\r\n                        me: null,\r\n                        friend: text,\r\n                        date,\r\n                    };\r\n                });\r\n                setAllMsgs(previousMsgs);\r\n            }\r\n        } catch (err) {\r\n            //consider a special place in chat box to show status change or error messages\r\n        }\r\n    }, [friendID]);\r\n\r\n    useEffect(() => {\r\n        loadPreviousMessages();\r\n\r\n        return () => {\r\n            setAllMsgs([]);\r\n        };\r\n    }, [loadPreviousMessages]);\r\n\r\n    const composeMessage = (event) => {\r\n        event.preventDefault();\r\n        if (myMessage) {\r\n            let tempMsg = [...allMsgs];\r\n            tempMsg.push({\r\n                me: myMessage,\r\n                friend: null,\r\n                date: new Date(),\r\n                key: allMsgs.length,\r\n            });\r\n            setAllMsgs(tempMsg);\r\n            dispatch(SendMessageTo(me.fullname, friendID, myMessage));\r\n            setMyMessage(\"\");\r\n\r\n            if (mostRecentMessageRef && mostRecentMessageRef.current) {\r\n                setTimeout(() => {\r\n                    mostRecentMessageRef.current.scrollIntoView({\r\n                        behavior: \"smooth\",\r\n                        top: mostRecentMessageRef.current.offsetTop,\r\n                    });\r\n                }, 100);\r\n            }\r\n        }\r\n    };\r\n\r\n    const recieveMessage = useCallback(\r\n        (msg) => {\r\n            let tempMsg = [...allMsgs];\r\n            tempMsg.push({ me: null, friend: msg.text, date: new Date() });\r\n            return tempMsg;\r\n        },\r\n        [allMsgs]\r\n    );\r\n\r\n    useEffect(() => {\r\n        const { recieved } = message;\r\n        if (!message.sent && recieved && recieved.friendID === friendID) {\r\n            setAllMsgs(recieveMessage(message.recieved));\r\n\r\n            setTimeout(() => {\r\n                if (mostRecentMessageRef && mostRecentMessageRef.current)\r\n                    mostRecentMessageRef.current.scrollIntoView({\r\n                        behavior: \"smooth\",\r\n                        top: mostRecentMessageRef.current.offsetTop,\r\n                    });\r\n            }, 100);\r\n        }\r\n    }, [message, friendID]);\r\n\r\n    return (\r\n        <Tab.Pane eventKey={friendID}>\r\n            <Container>\r\n                <Row>\r\n                    <Card\r\n                        border=\"dark\"\r\n                        bg=\"transparent\"\r\n                        className={`big-single-card ${\r\n                            context.device !== Devices.SmartPhone\r\n                                ? \"chat-box-scrollable\"\r\n                                : \"smartphone-chat-box-scrollable\"\r\n                        }`}>\r\n                        <Card.Body>\r\n                            {allMsgs.map((msg, index) => (\r\n                                <div ref={mostRecentMessageRef}>\r\n                                    <Message\r\n                                        // key={msg.key}\r\n                                        msg={msg}\r\n                                        inDesktop={context.device === Devices.Desktop}\r\n                                        previousDay={\r\n                                            index !== 0\r\n                                                ? new Date(\r\n                                                      allMsgs[index - 1].date\r\n                                                  ).getDate()\r\n                                                : 0\r\n                                        }\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Row>\r\n                <Row>\r\n                    <Form\r\n                        onSubmit={(event) => composeMessage(event)}\r\n                        className=\"w-100 mt-3\">\r\n                        <InputGroup className=\"w-100\">\r\n                            <InputGroup.Prepend\r\n                                style={{\r\n                                    width: \"8%\",\r\n                                }}>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    style={{ border: \"none\", fontSize: \"22px\" }}\r\n                                    className=\"w-100 mx-auto\"\r\n                                    variant=\"outline-info\">\r\n                                    <i\r\n                                        className=\"fa fa-paper-plane\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                </Button>\r\n                            </InputGroup.Prepend>\r\n\r\n                            <InputGroup.Prepend\r\n                                style={{ margin: \"auto\", width: \"92%\" }}>\r\n                                <Form.Control\r\n                                    value={myMessage}\r\n                                    onChange={(e) =>\r\n                                        setMyMessage(e.target.value)\r\n                                    }\r\n                                    placeholder=\"پیام...\"\r\n                                    className=\"bg-transparent chat-room-message-box\r\n                                    mx-auto text-right\"></Form.Control>\r\n                            </InputGroup.Prepend>\r\n                        </InputGroup>\r\n                    </Form>\r\n                </Row>\r\n            </Container>\r\n        </Tab.Pane>\r\n    );\r\n};\r\n\r\nexport default ChatBox;\r\n","import { Card, Row, Col, Nav, Tab } from \"react-bootstrap\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport {Status, Devices} from \"../services/configs\";\r\nimport userServices from \"../services/http/userServices\";\r\nimport ChatBox from \"./ChatBox\";\r\nimport \"./chat.css\";\r\nimport LoadingBar from '../commons/LoadingBar';\r\nimport { v1 as uuidv1 } from 'uuid'\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nconst ChatRoom = ({Device}) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [myFriends, setMyFriends] = useState([]);\r\n    const context = useContext(GlobalContext);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                setLoading(true); // use preloader here?\r\n                const { status, data } = await userServices.getMyFriends();\r\n                if (status === Status.Successful)\r\n                    setMyFriends(data.friends);\r\n            } catch (err) {\r\n                setLoading(false);\r\n            }\r\n            setLoading(false);\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <Card\r\n            border=\"secondary\"\r\n            bg=\"transparent\"\r\n            className=\"chat-main-card\">\r\n            <LoadingBar loading={loading} />\r\n            <Card.Header className=\"text-center\">چت روم شما</Card.Header>\r\n            <Card.Body>\r\n                <Tab.Container\r\n                // id=\"left-tabs-example\"\r\n                // defaultActiveKey={filterID}\r\n                // onSelect={(key) => setFilterID(key)}\r\n                >\r\n                    <Row>\r\n                        <Col\r\n                            className={\r\n                                context.device !== Devices.SmartPhone\r\n                                    ? \"chat-room-devider chat-scrollable-friends\"\r\n                                    : \"smartphone-chat-scrollable-friends\"\r\n                            }\r\n                            sm={3}>\r\n                            <Nav\r\n                                variant=\"pills\"\r\n                                className=\"flex-column text-right\">\r\n                                {myFriends.map((friend) => (\r\n                                    <Nav.Item>\r\n                                        <Nav.Link key={friend.userID} eventKey={friend.userID}>\r\n                                            {friend.fullname}\r\n                                        </Nav.Link>\r\n                                    </Nav.Item>\r\n                                ))}\r\n                            </Nav>\r\n                        </Col>\r\n                        {/* EDIT MAIL LAYOUT <Col> LIKE THIS */}\r\n                        <Col>\r\n                            <Tab.Content>\r\n                                {myFriends.map((friend) => (\r\n                                    <ChatBox key={uuidv1()} friendID={friend.userID} />\r\n                                ))}\r\n                            </Tab.Content>\r\n                        </Col>\r\n                    </Row>\r\n                </Tab.Container>\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ChatRoom;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { Button, Row } from \"react-bootstrap\";\r\nimport \"../profile.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { SignOut } from \"../../globals/redux/actions\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Fragment } from \"react\";\r\nimport Configs from \"../../services/configs\";\r\n\r\nconst ProfilePanel = (props) => {\r\n    const player = useSelector((state) => state.player);\r\n    const dispatch = useDispatch();\r\n    const signMeOut = () => {\r\n        dispatch(SignOut());\r\n        props.history.replace(\"/\"); //what the f is wrong\r\n    };\r\n\r\n    return (\r\n            <Row className=\"profile-panel-sidebar d-flex flex-column flex-shrink-0\">\r\n                <Button\r\n                    style={{ border: \"none\" }}\r\n                    variant=\"outline-warning\"\r\n                    className=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none\">\r\n                    <i className=\"fa fa-cogs px-2\" aria-hidden=\"true\"></i>\r\n                    پنل کاربری\r\n                </Button>\r\n                <hr />\r\n                <ul className=\"nav nav-pills flex-column mb-auto\">\r\n                    <li className=\"nav-item\">\r\n                        <NavLink\r\n                            exact\r\n                            to={Configs.Routes.Client.Profile}\r\n                            className=\"nav-link\"\r\n                            aria-current=\"page\">\r\n                            <i\r\n                                className=\"fa fa-user-o px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            مشخصات\r\n                        </NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink\r\n                            className=\"nav-link link-dark\"\r\n                            to={Configs.Routes.Client.MyGamesAndFriends}>\r\n                            <i\r\n                                className=\"fa fa-users px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            دوستان و بازی ها\r\n                        </NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink\r\n                            className=\"nav-link link-dark\"\r\n                            to={Configs.Routes.Client.ChatRoom}>\r\n                            <i\r\n                                className=\"fa fa-comment px-2\"\r\n                                aria-hidden=\"true\"></i>\r\n                            چت روم\r\n                        </NavLink>\r\n                    </li>\r\n                    <hr />\r\n                    {player && player.isAdmin && (\r\n                        <Fragment>\r\n                            {/* admin tools */}\r\n                            <li>\r\n                                <NavLink\r\n                                    className=\"nav-link link-dark border-top\"\r\n                                    to={Configs.Routes.Client.Notices}>\r\n                                    <i\r\n                                        className=\"fa fa-newspaper-o px-2\"\r\n                                        aria-hidden=\"true\"></i>\r\n                                    اطلاعیه ها\r\n                                </NavLink>\r\n                            </li>\r\n                            <li>\r\n                                <NavLink\r\n                                    className=\"nav-link link-dark\"\r\n                                    to=\"/controlPanel/admin/whatever\">\r\n                                    <svg\r\n                                        className=\"bi me-2\"\r\n                                        width=\"16\"\r\n                                        height=\"16\"></svg>\r\n                                    امکانات ادمین\r\n                                </NavLink>\r\n                            </li>\r\n                        </Fragment>\r\n                    )}\r\n                </ul>\r\n                <hr />\r\n                <Button variant=\"outline-danger\" onClick={signMeOut}>\r\n                    <i className=\"fa fa-sign-out px-2\" aria-hidden=\"true\"></i>\r\n                    خروج از حساب کاربری\r\n                </Button>\r\n            </Row>\r\n    );\r\n};\r\n\r\nexport default withRouter(ProfilePanel);\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { Button, Row } from \"react-bootstrap\";\r\nimport \"../profile.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { SignOut } from \"../../globals/redux/actions\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Fragment } from \"react\";\r\nimport Configs from \"../../services/configs\";\r\n\r\nconst CollapsedPanel = (props) => {\r\n    const player = useSelector((state) => state.player);\r\n    const dispatch = useDispatch();\r\n    const signMeOut = () => {\r\n        dispatch(SignOut());\r\n        props.history.replace(\"/\"); //what the f is wrong\r\n    };\r\n\r\n    return (\r\n        <Row bg=\"light\" className=\"profile-panel-sidebar-collapsed w-100 text-right\">\r\n            <Button\r\n                style={{ border: \"none\", padding:0 }}\r\n                variant=\"outline-warning\"\r\n                className=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none\">\r\n                <i className=\"fa fa-cogs\" aria-hidden=\"true\"></i>\r\n            </Button>\r\n            <NavLink\r\n                exact\r\n                to={Configs.Routes.Client.Profile}\r\n                className=\"nav-link\"\r\n                aria-current=\"page\">\r\n                <i className=\"fa fa-user-o\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n            <NavLink\r\n                className=\"nav-link link-dark\"\r\n                to={Configs.Routes.Client.MyGamesAndFriends}>\r\n                <i className=\"fa fa-users\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n            <NavLink\r\n                className=\"nav-link link-dark\"\r\n                to={Configs.Routes.Client.ChatRoom}>\r\n                <i className=\"fa fa-weixin\" aria-hidden=\"true\"></i>\r\n            </NavLink>\r\n            <hr />\r\n            {player && player.isAdmin && (\r\n                <Fragment>\r\n                    {/* admin tools */}\r\n                    <NavLink\r\n                        className=\"nav-link link-dark border-top\"\r\n                        to={Configs.Routes.Client.Notices}>\r\n                        <i className=\"fa fa-newspaper-o\" aria-hidden=\"true\"></i>\r\n                    </NavLink>\r\n                    <NavLink\r\n                        className=\"nav-link link-dark\"\r\n                        to=\"/controlPanel/admin/whatever\">\r\n                        <svg className=\"bi me-2\" width=\"16\" height=\"16\"></svg>\r\n                    </NavLink>\r\n                </Fragment>\r\n            )}\r\n            <hr />\r\n            <Button\r\n                className=\"text-right\"\r\n                variant=\"outline-danger\"\r\n                onClick={signMeOut}>\r\n                <i className=\"fa fa-sign-out\" aria-hidden=\"true\"></i>\r\n            </Button>\r\n        </Row>\r\n    );\r\n};\r\n\r\nexport default withRouter(CollapsedPanel);\r\n","import { Fragment, useContext } from \"react\";\r\nimport { Devices } from \"../services/configs\";\r\nimport ProfilePanel from \"../profile/panel/ProfilePanel\";\r\nimport CollapsedPanel from \"../profile/panel/CollapsedPanel\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport GlobalSocketManager from \"./../services/ws/GlobalSocketManager\";\r\nimport { useSelector } from \"react-redux\";\r\nimport AutoSignIn from \"../tools/AutoSignIn\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\n\r\nconst ProfilePanelLayout = ({ Device, children }) => {\r\n    const user = useSelector((state) => state.player);\r\n    const context = useContext(GlobalContext);\r\n    return (\r\n        <Fragment>\r\n            <AutoSignIn />\r\n            {user && <GlobalSocketManager />}\r\n            {(context.device === Devices.Desktop) ? (\r\n                <Row className=\"w-100 mx-auto\">\r\n                    <Col xs={3}>\r\n                        <ProfilePanel />\r\n                    </Col>\r\n                    <Col>{children}</Col>\r\n                </Row>\r\n            ) : (\r\n                <Row className=\"w-100 mx-auto\">\r\n                    <Col xs={1}>\r\n                        <CollapsedPanel />\r\n                    </Col>\r\n                    <Col>{children}</Col>\r\n                </Row>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default ProfilePanelLayout;\r\n","import { useContext } from \"react\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport GlobalContext from \"../globals/state/GlobalContext\";\r\nimport { Devices, Routes } from \"../services/configs\";\r\n\r\nconst NavigationBar = () => {\r\n\tconst player = useSelector((state) => state.player);\r\n\tconst context = useContext(GlobalContext);\r\n\r\n\treturn (\r\n\t\t<Navbar bg=\"light\" className=\"nav-pills text-right\">\r\n\t\t\t<Container className=\"text-right\">\r\n\t\t\t\t<Nav className=\"me-auto\">\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tactiveClassName=\"btn-success text-dark\"\r\n\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t? Routes.Client.Profile\r\n\t\t\t\t\t\t\t\t: Routes.Client.SignUp\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-address-card px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{player\r\n\t\t\t\t\t\t\t? context.device !== Devices.SmartPhone && player.fullname\r\n\t\t\t\t\t\t\t: \"ثبت نام\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.Root}\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i className=\"fa fa-home px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"صفحه اصلی\"}\r\n\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.GameDeck}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-gamepad px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"بازی ها\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t{player && (\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\t\tto={Routes.Client.ChatRoom}\r\n\t\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fa fa-comment px-2\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t{context.device === Devices.Desktop && \"چت روم\"}\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.Rankings}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-list-ol px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"رنکینگ\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.GameGuide}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i className=\"fa fa-eye px-2\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"راهنما\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tclassName=\"nav-link text-primary\"\r\n\t\t\t\t\t\tto={Routes.Client.ContactUs}\r\n\t\t\t\t\t\tactiveClassName=\"btn-outline-secondary text-dark\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-phone-square px-2\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t{context.device === Devices.Desktop && \"تماس با ما\"}\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</Nav>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n};\r\n\r\nexport default NavigationBar;\r\n","import ScoresTable from \"./tables/scores/ScoresTable\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport GameGuide from \"./informations/GameGuide\";\r\nimport ContactUs from \"./informations/ContactUs\";\r\nimport SignUp from \"./users/SignUp\";\r\nimport MainLayout from \"./layouts/MainLayout\";\r\nimport Rankings from \"./tables/rankings/Rankings\";\r\nimport GameDeck from \"./games/GameDeck\";\r\nimport NoticeManager from \"./profile/NoticeManager\";\r\nimport AccountCredentials from \"./profile/AcountCredentials\";\r\nimport MyGamesAndFriends from \"./profile/friendgames/MyGamesAndFriends\";\r\nimport { Routes } from \"./services/configs\";\r\nimport ChatRoom from \"./chat/ChatRoom\";\r\nimport ProfilePanelLayout from \"./layouts/ProfilePanelLayout\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport NavigationBar from \"./commons/NavigationBar\";\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<NavigationBar />\r\n\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path={`${Routes.Client.Profile}/:path?`} exact>\r\n\t\t\t\t\t<ProfilePanelLayout>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.MyGamesAndFriends}>\r\n\t\t\t\t\t\t\t\t<MyGamesAndFriends />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.Notices}>\r\n\t\t\t\t\t\t\t\t<NoticeManager />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.ChatRoom}>\r\n\t\t\t\t\t\t\t\t<ChatRoom />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route exact path={Routes.Client.Profile}>\r\n\t\t\t\t\t\t\t\t<AccountCredentials />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</ProfilePanelLayout>\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route>\r\n\t\t\t\t\t<MainLayout>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.SignUp}>\r\n\t\t\t\t\t\t\t\t<SignUp />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.GameDeck}>\r\n\t\t\t\t\t\t\t\t<GameDeck />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.Rankings}>\r\n\t\t\t\t\t\t\t\t<Rankings />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.GameGuide}>\r\n\t\t\t\t\t\t\t\t<GameGuide />/\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.ContactUs}>\r\n\t\t\t\t\t\t\t\t<ContactUs />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path={Routes.Client.Root} exact>\r\n\t\t\t\t\t\t\t\t<ScoresTable />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</MainLayout>\r\n\t\t\t\t</Route>\r\n\t\t\t</Switch>\r\n\t\t</BrowserRouter>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import { combineReducers } from \"redux\";\r\nimport { playerReducer } from \"./player\";\r\nimport { opponentReducer } from \"./opponent\";\r\nimport { roomReducer } from './room';\r\nimport { scoreboardReducer } from './scoreboard';\r\nimport { toolsReducer } from \"./tools\";\r\nimport { statisticsReducer } from \"./statistics\";\r\nimport { messageReducer } from './message';\r\nimport { tokenReducer } from './token';\r\n\r\nexport const reducers = combineReducers({\r\n    player: playerReducer,\r\n    opponent: opponentReducer,\r\n    room: roomReducer,\r\n    scoreboard: scoreboardReducer,\r\n    tools: toolsReducer,\r\n    statistics: statisticsReducer,\r\n    message: messageReducer,\r\n    token: tokenReducer\r\n});","export const playerReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOAD_ME\":\r\n            return action.payload;\r\n        case \"SIGN_OUT\": \r\n            sessionStorage.clear();\r\n            return null;\r\n        \r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const opponentReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOAD_OPPONENT\":\r\n            return action.payload;\r\n        case \"RESET_OPPONENT\":\r\n            return null;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const roomReducer = (state = {name: null, type: null}, action) => {\r\n    switch (action.type) {\r\n        case \"SET_ROOM\":\r\n            const {name, type} = action.payload;            \r\n            return {name, type};\r\n        // case \"SET_GAME_ID\":\r\n        //     return action.payload;\r\n        case \"RESET_ROOM\":\r\n            return {name: null, type: null}\r\n        default:\r\n            return state;\r\n    }\r\n};","// simple scoreboard for player's live games\r\n\r\nexport const scoreboardReducer = (state = {me: null, opp: null}, action) => {\r\n    switch (action.type) {\r\n        case \"UPDATE_SCOREBOARD\":\r\n            return action.payload; // payload === {me: {shape: , score: }, opp: 0} // null for ended or not started games : {me: null, opp: null}\r\n        case \"CLEAN_SCOREBOARD\":\r\n            return {me: null, opp: null};\r\n        default:\r\n            return state;\r\n    }\r\n};","export const toolsReducer = (\r\n    state = {\r\n        updateTriggered: false,\r\n        opponentSearchTriggered: false,\r\n        friendRequest: false,\r\n    },\r\n    action\r\n) => {\r\n    switch (action.type) {\r\n        case \"TRIGGER_UPDATE\":\r\n            return {\r\n                updateTriggered: !state.updateTriggered,\r\n                opponentSearchTriggered: state.opponentSearchTriggered,\r\n                friendRequest: null,\r\n            }; //trigger update\r\n        case \"TRIGGER_OPPONENT_SEARCH\":\r\n            return {\r\n                updateTriggered: state.updateTriggered,\r\n                opponentSearchTriggered: !state.opponentSearchTriggered,\r\n                friendRequest: null,\r\n            }; //trigger search\r\n        case \"SEND_FRIEND_REQUEST\":\r\n            return {\r\n                updateTriggered: state.updateTriggered,\r\n                opponentSearchTriggered: state.opponentSearchTriggered,\r\n                friendRequest: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","\r\nexport const statisticsReducer = (state = {players: 0, games: 0}, action) => {\r\n    switch (action.type) {\r\n        case \"UPDATE_STATISTICS\":\r\n            const {players, games} = action.payload;\r\n            return {players, games};\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n};","export const messageReducer = (\r\n    state = { sent: null, recieved: null },\r\n    action\r\n) => {\r\n    switch (action.type) {\r\n        case \"RECIEVE_MESSAGE\": {\r\n            const { friendID, name, text } = action.payload;\r\n            return {\r\n                recieved: { name, friendID, text, pushed: false },\r\n                sent: state.sent,\r\n            };\r\n        }\r\n        case \"SEND_MESSAGE\": {\r\n            const { friendID, name, text } = action.payload;\r\n            console.log(\"payload\", action.payload);\r\n            return { sent: { name, friendID, text }, recieved: state.recieved };\r\n        }\r\n        case \"MEESAGE_PUSHED\":\r\n            if (state.recieved) state.recieved.pushed = true;\r\n            return state;\r\n        case \"RESET_MESSAGES\":\r\n            return { sent: null, recieved: null };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { browserStorage } from \"../../../services/configs\";\r\n\r\nexport const tokenReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"SAVE_TOKEN\":\r\n            return browserStorage.TOKEN();\r\n        // case \"RESET_TOKEN\":\r\n        //     return null;\r\n        default:\r\n            return state;\r\n    }\r\n};","import { createStore } from \"redux\";\r\nimport { reducers } from \"../reducers\";\r\n\r\nexport const store = createStore(\r\n    reducers,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() //temp: enable chrome redux manager extension\r\n);\r\n\r\n//dispatch\r\n// store.subscribe(() => console.log(store.getState()));","import { useMediaQuery } from 'react-responsive';\r\nimport { useEffect, useState } from 'react';\r\nimport GlobalContext from './GlobalContext';\r\nconst GlobalStates = ({children}) => {\r\n    const isDesktop = useMediaQuery({ query: \"(min-width: 1200px)\" });\r\n    const isSmartPhone = useMediaQuery({ query: \"(max-width: 768px)\" });\r\n    const isTablet = !isDesktop && !isSmartPhone;\r\n    const [device, setDevice] = useState(null);\r\n    console.log(\"runned\");//s\r\n    useEffect(() => {\r\n        // find device mode\r\n        // array is sorted according to Configs.Devices\r\n        setDevice(\r\n            [isDesktop, isTablet, isSmartPhone].findIndex((mode) => mode)\r\n        ); //return the index of the one that is true -> wich is the curret device mode\r\n    }, [isDesktop, isTablet, isSmartPhone]);\r\n\r\n    return ( \r\n        <GlobalContext.Provider value={{device}}>\r\n            {children}\r\n        </GlobalContext.Provider>\r\n     );\r\n}\r\n \r\nexport default GlobalStates;","import { render } from \"react-dom\";\r\nimport App from \"./App.js\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./globals/redux/store/index\";\r\nimport GlobalStates from \"./globals/state/GlobalStates.jsx\";\r\n\r\nrender(\r\n\t<Provider store={store}>\r\n\t\t<GlobalStates>\r\n\t\t\t<App />\r\n\t\t</GlobalStates>\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n","const ClientRoutes = require('./client');\r\nconst ServerRoutes = require('./local');\r\nconst Status = require('./status');\r\nconst browserStorage = require('./browser');\r\nconst GameSetting = require('./gamesetting');\r\n//all configs\r\nmodule.exports = {\r\n    browserStorage,\r\n    Routes: { Server: ServerRoutes, Client: ClientRoutes },\r\n    Status,\r\n    GameSetting,\r\n    Devices:{ SmartPhone: 2, Tablet: 1, Desktop: 0 },\r\n}"],"sourceRoot":""}